var h0=Object.defineProperty;var d0=(wt,ot,Gt)=>ot in wt?h0(wt,ot,{enumerable:!0,configurable:!0,writable:!0,value:Gt}):wt[ot]=Gt;var Z=(wt,ot,Gt)=>d0(wt,typeof ot!="symbol"?ot+"":ot,Gt);define(["exports","core/ajax"],function(wt,ot){"use strict";/**
* @vue/shared v3.5.0-beta.3
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Gt(t,e){const s=new Set(t.split(","));return n=>s.has(n)}const Iu={},Ou=()=>{},p0=Object.assign,Fu=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Lu=Object.prototype.hasOwnProperty,qr=(t,e)=>Lu.call(t,e),bt=Array.isArray,_s=t=>fn(t)==="[object Map]",ju=t=>fn(t)==="[object Set]",Kr=t=>typeof t=="function",Du=t=>typeof t=="string",ws=t=>typeof t=="symbol",bs=t=>t!==null&&typeof t=="object",Bu=Object.prototype.toString,fn=t=>Bu.call(t),Nu=t=>fn(t).slice(8,-1),Hu=t=>fn(t)==="[object Object]",Gr=t=>Du(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,yt=(t,e)=>!Object.is(t,e),Vu=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})};/**
* @vue/reactivity v3.5.0-beta.3
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ce;class Do{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ce,!e&&Ce&&(this.index=(Ce.scopes||(Ce.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){if(this._isPaused=!0,this.scopes)for(let e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(let e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){if(this._isPaused=!1,this.scopes)for(let e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(let e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Ce;try{return Ce=this,e()}finally{Ce=s}}}on(){Ce=this}off(){Ce=this.parent}stop(e){if(this._active){let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function Bo(t){return new Do(t)}function No(){return Ce}function Uu(t,e=!1){Ce&&Ce.cleanups.push(t)}let re;const Jr=new WeakSet;class Ho{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.nextEffect=void 0,this.cleanup=void 0,this.scheduler=void 0,Ce&&Ce.active&&Ce.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Jr.has(this)&&(Jr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||(this.flags|=8,this.nextEffect=ys,ys=this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,qo(this),Vo(this);const e=re,s=We;re=this,We=!0;try{return this.fn()}finally{Uo(this),re=e,We=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Yr(e);this.deps=this.depsTail=void 0,qo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Jr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Qr(this)&&this.run()}get dirty(){return Qr(this)}}let hn=0,ys;function Xr(){hn++}function Zr(){if(hn>1){hn--;return}hn--;let t;for(;ys;){let e=ys;for(ys=void 0;e;){const s=e.nextEffect;if(e.nextEffect=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function Vo(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Uo(t){let e,s=t.depsTail;for(let n=s;n;n=n.prevDep)n.version===-1?(n===s&&(s=n.prevDep),Yr(n),zu(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0;t.deps=e,t.depsTail=s}function Qr(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&zo(e.dep.computed)===!1||e.dep.version!==e.version)return!0;return!!t._dirty}function zo(t){if(t.flags&2)return!1;if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===xs))return;t.globalVersion=xs;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&!Qr(t)){t.flags&=-3;return}const s=re,n=We;re=t,We=!0;try{Vo(t);const r=t.fn();(e.version===0||yt(r,t._value))&&(t._value=r,e.version++)}catch(r){throw e.version++,r}finally{re=s,We=n,Uo(t),t.flags&=-3}}function Yr(t){const{dep:e,prevSub:s,nextSub:n}=t;if(s&&(s.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=s,t.nextSub=void 0),e.subs===t&&(e.subs=s),!e.subs&&e.computed){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)Yr(r)}}function zu(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let We=!0;const Wo=[];function at(){Wo.push(We),We=!1}function lt(){const t=Wo.pop();We=t===void 0?!0:t}function qo(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=re;re=void 0;try{e()}finally{re=s}}}let xs=0;class ei{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0}track(e){if(!re||!We)return;let s=this.activeLink;if(s===void 0||s.sub!==re)s=this.activeLink={dep:this,sub:re,version:this.version,nextDep:void 0,prevDep:void 0,nextSub:void 0,prevSub:void 0,prevActiveLink:void 0},re.deps?(s.prevDep=re.depsTail,re.depsTail.nextDep=s,re.depsTail=s):re.deps=re.depsTail=s,re.flags&4&&Ko(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=re.depsTail,s.nextDep=void 0,re.depsTail.nextDep=s,re.depsTail=s,re.deps===s&&(re.deps=n)}return s}trigger(e){this.version++,xs++,this.notify(e)}notify(e){Xr();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()}finally{Zr()}}}function Ko(t){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Ko(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}const dn=new WeakMap,Pt=Symbol(""),ti=Symbol(""),vs=Symbol("");function we(t,e,s){if(We&&re){let n=dn.get(t);n||dn.set(t,n=new Map);let r=n.get(s);r||n.set(s,r=new ei),r.track()}}function ct(t,e,s,n,r,i){const o=dn.get(t);if(!o){xs++;return}let a=[];if(e==="clear")a=[...o.values()];else{const l=bt(t),u=l&&Gr(s);if(l&&s==="length"){const c=Number(n);o.forEach((h,p)=>{(p==="length"||p===vs||!ws(p)&&p>=c)&&a.push(h)})}else{const c=h=>h&&a.push(h);switch(s!==void 0&&c(o.get(s)),u&&c(o.get(vs)),e){case"add":l?u&&c(o.get("length")):(c(o.get(Pt)),_s(t)&&c(o.get(ti)));break;case"delete":l||(c(o.get(Pt)),_s(t)&&c(o.get(ti)));break;case"set":_s(t)&&c(o.get(Pt));break}}}Xr();for(const l of a)l.trigger();Zr()}function Wu(t,e){var s;return(s=dn.get(t))==null?void 0:s.get(e)}function Jt(t){const e=G(t);return e===t?e:(we(e,"iterate",vs),qe(t)?e:e.map(be))}function pn(t){return we(t=G(t),"iterate",vs),t}const qu={__proto__:null,[Symbol.iterator](){return si(this,Symbol.iterator,be)},concat(...t){return Jt(this).concat(...t.map(e=>Jt(e)))},entries(){return si(this,"entries",t=>(t[1]=be(t[1]),t))},every(t,e){return ut(this,"every",t,e,void 0,arguments)},filter(t,e){return ut(this,"filter",t,e,s=>s.map(be),arguments)},find(t,e){return ut(this,"find",t,e,be,arguments)},findIndex(t,e){return ut(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ut(this,"findLast",t,e,be,arguments)},findLastIndex(t,e){return ut(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ut(this,"forEach",t,e,void 0,arguments)},includes(...t){return ni(this,"includes",t)},indexOf(...t){return ni(this,"indexOf",t)},join(t){return Jt(this).join(t)},lastIndexOf(...t){return ni(this,"lastIndexOf",t)},map(t,e){return ut(this,"map",t,e,void 0,arguments)},pop(){return Cs(this,"pop")},push(...t){return Cs(this,"push",t)},reduce(t,...e){return Go(this,"reduce",t,e)},reduceRight(t,...e){return Go(this,"reduceRight",t,e)},shift(){return Cs(this,"shift")},some(t,e){return ut(this,"some",t,e,void 0,arguments)},splice(...t){return Cs(this,"splice",t)},toReversed(){return Jt(this).toReversed()},toSorted(t){return Jt(this).toSorted(t)},toSpliced(...t){return Jt(this).toSpliced(...t)},unshift(...t){return Cs(this,"unshift",t)},values(){return si(this,"values",be)}};function si(t,e,s){const n=pn(t),r=n[e]();return n!==t&&!qe(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=s(i.value)),i}),r}const Ku=Array.prototype;function ut(t,e,s,n,r,i){const o=pn(t),a=o!==t&&!qe(t),l=o[e];if(l!==Ku[e]){const h=l.apply(o,i);return a?be(h):h}let u=s;o!==t&&(a?u=function(h,p){return s.call(this,be(h),p,t)}:s.length>2&&(u=function(h,p){return s.call(this,h,p,t)}));const c=l.call(o,u,n);return a&&r?r(c):c}function Go(t,e,s,n){const r=pn(t);let i=s;return r!==t&&(qe(t)?s.length>3&&(i=function(o,a,l){return s.call(this,o,a,l,t)}):i=function(o,a,l){return s.call(this,o,be(a),l,t)}),r[e](i,...n)}function ni(t,e,s){const n=G(t);we(n,"iterate",vs);const r=n[e](...s);return(r===-1||r===!1)&&ii(s[0])?(s[0]=G(s[0]),n[e](...s)):r}function Cs(t,e,s=[]){at(),Xr();const n=G(t)[e].apply(t,s);return Zr(),lt(),n}const Gu=Gt("__proto__,__v_isRef,__isVue"),Jo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ws));function Ju(t){ws(t)||(t=String(t));const e=G(this);return we(e,"has",t),e.hasOwnProperty(t)}class Xo{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){const r=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return i;if(s==="__v_raw")return n===(r?i?oa:ia:i?ra:na).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=bt(e);if(!r){let l;if(o&&(l=qu[s]))return l;if(s==="hasOwnProperty")return Ju}const a=Reflect.get(e,s,ce(e)?e:n);return(ws(s)?Jo.has(s):Gu(s))||(r||we(e,"get",s),i)?a:ce(a)?o&&Gr(s)?a:a.value:bs(a)?r?aa(a):ks(a):a}}class Zo extends Xo{constructor(e=!1){super(!1,e)}set(e,s,n,r){let i=e[s];if(!this._isShallow){const l=$t(i);if(!qe(n)&&!$t(n)&&(i=G(i),n=G(n)),!bt(e)&&ce(i)&&!ce(n))return l?!1:(i.value=n,!0)}const o=bt(e)&&Gr(s)?Number(s)<e.length:qr(e,s),a=Reflect.set(e,s,n,r);return e===G(r)&&(o?yt(n,i)&&ct(e,"set",s,n):ct(e,"add",s,n)),a}deleteProperty(e,s){const n=qr(e,s);e[s];const r=Reflect.deleteProperty(e,s);return r&&n&&ct(e,"delete",s,void 0),r}has(e,s){const n=Reflect.has(e,s);return(!ws(s)||!Jo.has(s))&&we(e,"has",s),n}ownKeys(e){return we(e,"iterate",bt(e)?"length":Pt),Reflect.ownKeys(e)}}class Qo extends Xo{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const Xu=new Zo,Zu=new Qo,Qu=new Zo(!0),Yu=new Qo(!0),ri=t=>t,gn=t=>Reflect.getPrototypeOf(t);function mn(t,e,s=!1,n=!1){t=t.__v_raw;const r=G(t),i=G(e);s||(yt(e,i)&&we(r,"get",e),we(r,"get",i));const{has:o}=gn(r),a=n?ri:s?ai:be;if(o.call(r,e))return a(t.get(e));if(o.call(r,i))return a(t.get(i));t!==r&&t.get(e)}function _n(t,e=!1){const s=this.__v_raw,n=G(s),r=G(t);return e||(yt(t,r)&&we(n,"has",t),we(n,"has",r)),t===r?s.has(t):s.has(t)||s.has(r)}function wn(t,e=!1){return t=t.__v_raw,!e&&we(G(t),"iterate",Pt),Reflect.get(t,"size",t)}function Yo(t,e=!1){!e&&!qe(t)&&!$t(t)&&(t=G(t));const s=G(this);return gn(s).has.call(s,t)||(s.add(t),ct(s,"add",t,t)),this}function ea(t,e,s=!1){!s&&!qe(e)&&!$t(e)&&(e=G(e));const n=G(this),{has:r,get:i}=gn(n);let o=r.call(n,t);o||(t=G(t),o=r.call(n,t));const a=i.call(n,t);return n.set(t,e),o?yt(e,a)&&ct(n,"set",t,e):ct(n,"add",t,e),this}function ta(t){const e=G(this),{has:s,get:n}=gn(e);let r=s.call(e,t);r||(t=G(t),r=s.call(e,t)),n&&n.call(e,t);const i=e.delete(t);return r&&ct(e,"delete",t,void 0),i}function sa(){const t=G(this),e=t.size!==0,s=t.clear();return e&&ct(t,"clear",void 0,void 0),s}function bn(t,e){return function(n,r){const i=this,o=i.__v_raw,a=G(o),l=e?ri:t?ai:be;return!t&&we(a,"iterate",Pt),o.forEach((u,c)=>n.call(r,l(u),l(c),i))}}function yn(t,e,s){return function(...n){const r=this.__v_raw,i=G(r),o=_s(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...n),c=s?ri:e?ai:be;return!e&&we(i,"iterate",l?ti:Pt),{next(){const{value:h,done:p}=u.next();return p?{value:h,done:p}:{value:a?[c(h[0]),c(h[1])]:c(h),done:p}},[Symbol.iterator](){return this}}}}function xt(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ef(){const t={get(i){return mn(this,i)},get size(){return wn(this)},has:_n,add:Yo,set:ea,delete:ta,clear:sa,forEach:bn(!1,!1)},e={get(i){return mn(this,i,!1,!0)},get size(){return wn(this)},has:_n,add(i){return Yo.call(this,i,!0)},set(i,o){return ea.call(this,i,o,!0)},delete:ta,clear:sa,forEach:bn(!1,!0)},s={get(i){return mn(this,i,!0)},get size(){return wn(this,!0)},has(i){return _n.call(this,i,!0)},add:xt("add"),set:xt("set"),delete:xt("delete"),clear:xt("clear"),forEach:bn(!0,!1)},n={get(i){return mn(this,i,!0,!0)},get size(){return wn(this,!0)},has(i){return _n.call(this,i,!0)},add:xt("add"),set:xt("set"),delete:xt("delete"),clear:xt("clear"),forEach:bn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=yn(i,!1,!1),s[i]=yn(i,!0,!1),e[i]=yn(i,!1,!0),n[i]=yn(i,!0,!0)}),[t,s,e,n]}const[tf,sf,nf,rf]=ef();function xn(t,e){const s=e?t?rf:nf:t?sf:tf;return(n,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(qr(s,r)&&r in n?s:n,r,i)}const of={get:xn(!1,!1)},af={get:xn(!1,!0)},lf={get:xn(!0,!1)},cf={get:xn(!0,!0)},na=new WeakMap,ra=new WeakMap,ia=new WeakMap,oa=new WeakMap;function uf(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ff(t){return t.__v_skip||!Object.isExtensible(t)?0:uf(Nu(t))}function ks(t){return $t(t)?t:vn(t,!1,Xu,of,na)}function hf(t){return vn(t,!1,Qu,af,ra)}function aa(t){return vn(t,!0,Zu,lf,ia)}function g0(t){return vn(t,!0,Yu,cf,oa)}function vn(t,e,s,n,r){if(!bs(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=r.get(t);if(i)return i;const o=ff(t);if(o===0)return t;const a=new Proxy(t,o===2?n:s);return r.set(t,a),a}function vt(t){return $t(t)?vt(t.__v_raw):!!(t&&t.__v_isReactive)}function $t(t){return!!(t&&t.__v_isReadonly)}function qe(t){return!!(t&&t.__v_isShallow)}function ii(t){return t?!!t.__v_raw:!1}function G(t){const e=t&&t.__v_raw;return e?G(e):t}function oi(t){return Object.isExtensible(t)&&Vu(t,"__v_skip",!0),t}const be=t=>bs(t)?ks(t):t,ai=t=>bs(t)?aa(t):t;function ce(t){return t?t.__v_isRef===!0:!1}function Ae(t){return df(t,!1)}function df(t,e){return ce(t)?t:new pf(t,e)}class pf{constructor(e,s){this.dep=new ei,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:G(e),this._value=s?e:be(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||qe(e)||$t(e);e=n?e:G(e),yt(e,s)&&(this._rawValue=e,this._value=n?e:be(e),this.dep.trigger())}}function Mt(t){return ce(t)?t.value:t}const gf={get:(t,e,s)=>Mt(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const r=t[e];return ce(r)&&!ce(s)?(r.value=s,!0):Reflect.set(t,e,s,n)}};function la(t){return vt(t)?t:new Proxy(t,gf)}function mf(t){const e=bt(t)?new Array(t.length):{};for(const s in t)e[s]=wf(t,s);return e}class _f{constructor(e,s,n){this._object=e,this._key=s,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Wu(G(this._object),this._key)}}function wf(t,e,s){const n=t[e];return ce(n)?n:new _f(t,e,s)}class bf{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new ei(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=xs-1,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){re!==this&&(this.flags|=16,this.dep.notify())}get value(){const e=this.dep.track();return zo(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function yf(t,e,s=!1){let n,r;return Kr(t)?n=t:(n=t.get,r=t.set),new bf(n,r,s)}const Cn={},kn=new WeakMap;let Tt;function xf(t,e=!1,s=Tt){if(s){let n=kn.get(s);n||kn.set(s,n=[]),n.push(t)}}function vf(t,e,s=Iu){const{immediate:n,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=s,u=g=>r?g:qe(g)||r===!1||r===0?ft(g,1):ft(g);let c,h,p,_,S=!1,y=!1;if(ce(t)?(h=()=>t.value,S=qe(t)):vt(t)?(h=()=>u(t),S=!0):bt(t)?(y=!0,S=t.some(g=>vt(g)||qe(g)),h=()=>t.map(g=>{if(ce(g))return g.value;if(vt(g))return u(g);if(Kr(g))return l?l(g,2):g()})):Kr(t)?e?h=l?()=>l(t,2):t:h=()=>{if(p){at();try{p()}finally{lt()}}const g=Tt;Tt=c;try{return l?l(t,3,[_]):t(_)}finally{Tt=g}}:h=Ou,e&&r){const g=h,R=r===!0?1/0:r;h=()=>ft(g(),R)}if(i)if(e){const g=e;e=(...R)=>{g(...R),c.stop()}}else{const g=h;h=()=>{g(),c.stop()}}let k=y?new Array(t.length).fill(Cn):Cn;const j=g=>{if(!(!(c.flags&1)||!c.dirty&&!g))if(e){const R=c.run();if(r||S||(y?R.some((N,D)=>yt(N,k[D])):yt(R,k))){p&&p();const N=Tt;Tt=c;try{const D=[R,k===Cn?void 0:y&&k[0]===Cn?[]:k,_];l?l(e,3,D):e(...D),k=R}finally{Tt=N}}}else c.run()};a&&a(j),c=new Ho(h),c.scheduler=o?()=>o(j,!1):j,_=g=>xf(g,!1,c),p=c.onStop=()=>{const g=kn.get(c);if(g){if(l)l(g,4);else for(const R of g)R();kn.delete(c)}},e?n?j(!0):k=c.run():o?o(j.bind(null,!0),!0):c.run();const E=No(),w=()=>{c.stop(),E&&Fu(E.effects,c)};return w.pause=c.pause.bind(c),w.resume=c.resume.bind(c),w.stop=w,w}function ft(t,e=1/0,s){if(e<=0||!bs(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,ce(t))ft(t.value,e,s);else if(bt(t))for(let n=0;n<t.length;n++)ft(t[n],e,s);else if(ju(t)||_s(t))t.forEach(n=>{ft(n,e,s)});else if(Hu(t)){for(const n in t)ft(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&ft(t[n],e,s)}return t}/**
* @vue/shared v3.5.0-beta.3
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Cf(t,e){const s=new Set(t.split(","));return n=>s.has(n)}const ae={},Xt=[],ht=()=>{},kf=()=>!1,li=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ca=t=>t.startsWith("onUpdate:"),ye=Object.assign,ua=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Sf=Object.prototype.hasOwnProperty,Q=(t,e)=>Sf.call(t,e),J=Array.isArray,Ef=t=>ci(t)==="[object Map]",Af=t=>ci(t)==="[object Set]",U=t=>typeof t=="function",ke=t=>typeof t=="string",fa=t=>typeof t=="symbol",pe=t=>t!==null&&typeof t=="object",ha=t=>(pe(t)||U(t))&&U(t.then)&&U(t.catch),da=Object.prototype.toString,ci=t=>da.call(t),Rf=t=>ci(t)==="[object Object]",Ss=Cf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sn=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},Pf=/-(\w)/g,It=Sn(t=>t.replace(Pf,(e,s)=>s?s.toUpperCase():"")),$f=/\B([A-Z])/g,Es=Sn(t=>t.replace($f,"-$1").toLowerCase()),Mf=Sn(t=>t.charAt(0).toUpperCase()+t.slice(1)),ui=Sn(t=>t?`on${Mf(t)}`:""),fi=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Tf=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},If=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let pa;const ga=()=>pa||(pa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function hi(t){if(J(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],r=ke(n)?jf(n):hi(n);if(r)for(const i in r)e[i]=r[i]}return e}else if(ke(t)||pe(t))return t}const Of=/;(?![^(]*\))/g,Ff=/:([^]+)/,Lf=/\/\*[^]*?\*\//g;function jf(t){const e={};return t.replace(Lf,"").split(Of).forEach(s=>{if(s){const n=s.split(Ff);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function As(t){let e="";if(ke(t))e=t;else if(J(t))for(let s=0;s<t.length;s++){const n=As(t[s]);n&&(e+=n+" ")}else if(pe(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const ma=t=>!!(t&&t.__v_isRef===!0),Ot=t=>ke(t)?t:t==null?"":J(t)||pe(t)&&(t.toString===da||!U(t.toString))?ma(t)?Ot(t.value):JSON.stringify(t,_a,2):String(t),_a=(t,e)=>ma(e)?_a(t,e.value):Ef(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,r],i)=>(s[di(n,i)+" =>"]=r,s),{})}:Af(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>di(s))}:fa(e)?di(e):pe(e)&&!J(e)&&!Rf(e)?String(e):e,di=(t,e="")=>{var s;return fa(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/runtime-core v3.5.0-beta.3
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Rs=[];let pi=!1;function m0(t,...e){if(pi)return;pi=!0,at();const s=Rs.length?Rs[Rs.length-1].component:null,n=s&&s.appContext.config.warnHandler,r=Df();if(n)Zt(n,s,11,[t+e.map(i=>{var o,a;return(a=(o=i.toString)==null?void 0:o.call(i))!=null?a:JSON.stringify(i)}).join(""),s&&s.proxy,r.map(({vnode:i})=>`at <${ul(s,i.type)}>`).join(`
`),r]);else{const i=[`[Vue warn]: ${t}`,...e];r.length&&i.push(`
`,...Bf(r)),console.warn(...i)}lt(),pi=!1}function Df(){let t=Rs[Rs.length-1];if(!t)return[];const e=[];for(;t;){const s=e[0];s&&s.vnode===t?s.recurseCount++:e.push({vnode:t,recurseCount:0});const n=t.component&&t.component.parent;t=n&&n.vnode}return e}function Bf(t){const e=[];return t.forEach((s,n)=>{e.push(...n===0?[]:[`
`],...Nf(s))}),e}function Nf({vnode:t,recurseCount:e}){const s=e>0?`... (${e} recursive calls)`:"",n=t.component?t.component.parent==null:!1,r=` at <${ul(t.component,t.type,n)}`,i=">"+s;return t.props?[r,...Hf(t.props),i]:[r+i]}function Hf(t){const e=[],s=Object.keys(t);return s.slice(0,3).forEach(n=>{e.push(...wa(n,t[n]))}),s.length>3&&e.push(" ..."),e}function wa(t,e,s){return ke(e)?(e=JSON.stringify(e),s?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?s?e:[`${t}=${e}`]:ce(e)?(e=wa(t,G(e.value),!0),s?e:[`${t}=Ref<`,e,">"]):U(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=G(e),s?e:[`${t}=`,e])}function Zt(t,e,s,n){try{return n?t(...n):t()}catch(r){En(r,e,s)}}function Ye(t,e,s,n){if(U(t)){const r=Zt(t,e,s,n);return r&&ha(r)&&r.catch(i=>{En(i,e,s)}),r}if(J(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Ye(t[i],e,s,n));return r}}function En(t,e,s,n=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ae;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const c=a.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](t,l,u)===!1)return}a=a.parent}if(i){at(),Zt(i,null,10,[t,l,u]),lt();return}}Vf(t,s,r,n,o)}function Vf(t,e,s,n=!0,r=!1){if(r)throw t;console.error(t)}let Ps=!1,gi=!1;const Me=[];let Ft=0;const Qt=[];let Ct=null,Yt=0;const ba=Promise.resolve();let mi=null;function _i(t){const e=mi||ba;return t?e.then(this?t.bind(this):t):e}function Uf(t){let e=Ps?Ft+1:0,s=Me.length;for(;e<s;){const n=e+s>>>1,r=Me[n],i=$s(r);i<t||i===t&&r.flags&2?e=n+1:s=n}return e}function wi(t){if(!(t.flags&1)){const e=$s(t),s=Me[Me.length-1];!s||!(t.flags&2)&&e>=$s(s)?Me.push(t):Me.splice(Uf(e),0,t),t.flags&4||(t.flags|=1),ya()}}function ya(){!Ps&&!gi&&(gi=!0,mi=ba.then(Ca))}function zf(t){J(t)?Qt.push(...t):Ct&&t.id===-1?Ct.splice(Yt+1,0,t):t.flags&1||(Qt.push(t),t.flags&4||(t.flags|=1)),ya()}function xa(t,e,s=Ps?Ft+1:0){for(;s<Me.length;s++){const n=Me[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Me.splice(s,1),s--,n(),n.flags&=-2}}}function va(t){if(Qt.length){const e=[...new Set(Qt)].sort((s,n)=>$s(s)-$s(n));if(Qt.length=0,Ct){Ct.push(...e);return}for(Ct=e,Yt=0;Yt<Ct.length;Yt++){const s=Ct[Yt];s.flags&8||s(),s.flags&=-2}Ct=null,Yt=0}}const $s=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Ca(t){gi=!1,Ps=!0;try{for(Ft=0;Ft<Me.length;Ft++){const e=Me[Ft];e&&!(e.flags&8)&&(Zt(e,e.i,e.i?15:14),e.flags&=-2)}}finally{Ft=0,Me.length=0,va(),Ps=!1,mi=null,(Me.length||Qt.length)&&Ca()}}let Te=null,ka=null;function An(t){const e=Te;return Te=t,ka=t&&t.type.__scopeId||null,e}function Wf(t,e=Te,s){if(!e||t._n)return t;const n=(...r)=>{n._d&&tl(-1);const i=An(e);let o;try{o=t(...r)}finally{An(i),n._d&&tl(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Rn(t,e){if(Te===null)return t;const s=jn(Te),n=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=ae]=e[r];i&&(U(i)&&(i={mounted:i,updated:i}),i.deep&&ft(o),n.push({dir:i,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Lt(t,e,s,n){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[n];l&&(at(),Ye(l,s,8,[t.el,a,t,e]),lt())}}const qf=Symbol("_vte"),Kf=t=>t.__isTeleport;function Sa(t,e){t.shapeFlag&6&&t.component?Sa(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Ms(t,e){return U(t)?ye({name:t.name},e,{setup:t}):t}function Ea(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function bi(t,e,s,n,r=!1){if(J(t)){t.forEach((p,_)=>bi(p,e&&(J(e)?e[_]:e),s,n,r));return}if(Ts(n)&&!r)return;const i=n.shapeFlag&4?jn(n.component):n.el,o=r?null:i,{i:a,r:l}=t,u=e&&e.r,c=a.refs===ae?a.refs={}:a.refs,h=a.setupState;if(u!=null&&u!==l&&(ke(u)?(c[u]=null,Q(h,u)&&(h[u]=null)):ce(u)&&(u.value=null)),U(l))Zt(l,a,12,[o,c]);else{const p=ke(l),_=ce(l);if(p||_){const S=()=>{if(t.f){const y=p?Q(h,l)?h[l]:c[l]:l.value;r?J(y)&&ua(y,i):J(y)?y.includes(i)||y.push(i):p?(c[l]=[i],Q(h,l)&&(h[l]=c[l])):(l.value=[i],t.k&&(c[t.k]=l.value))}else p?(c[l]=o,Q(h,l)&&(h[l]=o)):_&&(l.value=o,t.k&&(c[t.k]=o))};o?(S.id=-1,Ie(S,s)):S()}}}const Ts=t=>!!t.type.__asyncLoader,Aa=t=>t.type.__isKeepAlive;function Gf(t,e){Ra(t,"a",e)}function Jf(t,e){Ra(t,"da",e)}function Ra(t,e,s=xe){const n=t.__wdc||(t.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Pn(e,n,s),s){let r=s.parent;for(;r&&r.parent;)Aa(r.parent.vnode)&&Xf(n,e,s,r),r=r.parent}}function Xf(t,e,s,n){const r=Pn(e,t,n,!0);$a(()=>{ua(n[e],r)},s)}function Pn(t,e,s=xe,n=!1){if(s){const r=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{at();const a=Ds(s),l=Ye(e,s,t,o);return a(),lt(),l});return n?r.unshift(i):r.push(i),i}}const dt=t=>(e,s=xe)=>{(!Ln||t==="sp")&&Pn(t,(...n)=>e(...n),s)},Zf=dt("bm"),Pa=dt("m"),Qf=dt("bu"),Yf=dt("u"),eh=dt("bum"),$a=dt("um"),th=dt("sp"),sh=dt("rtg"),nh=dt("rtc");function rh(t,e=xe){Pn("ec",t,e)}const ih=Symbol.for("v-ndc");function yi(t,e,s,n){let r;const i=s,o=J(t);if(o||ke(t)){const a=o&&vt(t);a&&(t=pn(t)),r=new Array(t.length);for(let l=0,u=t.length;l<u;l++)r[l]=e(a?be(t[l]):t[l],l,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(pe(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];r[l]=e(t[c],c,l,i)}}else r=[];return r}const xi=t=>t?ol(t)?jn(t):xi(t.parent):null,Is=ye(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>xi(t.parent),$root:t=>xi(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ki(t),$forceUpdate:t=>t.f||(t.f=()=>{wi(t.update)}),$nextTick:t=>t.n||(t.n=_i.bind(t.proxy)),$watch:t=>Rh.bind(t)}),vi=(t,e)=>t!==ae&&!t.__isScriptSetup&&Q(t,e),oh={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const _=o[e];if(_!==void 0)switch(_){case 1:return n[e];case 2:return r[e];case 4:return s[e];case 3:return i[e]}else{if(vi(n,e))return o[e]=1,n[e];if(r!==ae&&Q(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&Q(u,e))return o[e]=3,i[e];if(s!==ae&&Q(s,e))return o[e]=4,s[e];Ci&&(o[e]=0)}}const c=Is[e];let h,p;if(c)return e==="$attrs"&&we(t.attrs,"get",""),c(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(s!==ae&&Q(s,e))return o[e]=4,s[e];if(p=l.config.globalProperties,Q(p,e))return p[e]},set({_:t},e,s){const{data:n,setupState:r,ctx:i}=t;return vi(r,e)?(r[e]=s,!0):n!==ae&&Q(n,e)?(n[e]=s,!0):Q(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:r,propsOptions:i}},o){let a;return!!s[o]||t!==ae&&Q(t,o)||vi(e,o)||(a=i[0])&&Q(a,o)||Q(n,o)||Q(Is,o)||Q(r.config.globalProperties,o)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:Q(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Ma(t){return J(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let Ci=!0;function ah(t){const e=ki(t),s=t.proxy,n=t.ctx;Ci=!1,e.beforeCreate&&Ta(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:p,beforeUpdate:_,updated:S,activated:y,deactivated:k,beforeDestroy:j,beforeUnmount:E,destroyed:w,unmounted:g,render:R,renderTracked:N,renderTriggered:D,errorCaptured:B,serverPrefetch:F,expose:X,inheritAttrs:W,components:$e,directives:Rt,filters:an}=e;if(u&&lh(u,n,null),o)for(const q in o){const ie=o[q];U(ie)&&(n[q]=ie.bind(s))}if(r){const q=r.call(s,s);pe(q)&&(t.data=ks(q))}if(Ci=!0,i)for(const q in i){const ie=i[q],qt=U(ie)?ie.bind(s,s):U(ie.get)?ie.get.bind(s,s):ht,zr=!U(ie)&&U(ie.set)?ie.set.bind(s):ht,Kt=Ii({get:qt,set:zr});Object.defineProperty(n,q,{enumerable:!0,configurable:!0,get:()=>Kt.value,set:rt=>Kt.value=rt})}if(a)for(const q in a)Ia(a[q],n,s,q);if(l){const q=U(l)?l.call(s):l;Reflect.ownKeys(q).forEach(ie=>{ph(ie,q[ie])})}c&&Ta(c,t,"c");function fe(q,ie){J(ie)?ie.forEach(qt=>q(qt.bind(s))):ie&&q(ie.bind(s))}if(fe(Zf,h),fe(Pa,p),fe(Qf,_),fe(Yf,S),fe(Gf,y),fe(Jf,k),fe(rh,B),fe(nh,N),fe(sh,D),fe(eh,E),fe($a,g),fe(th,F),J(X))if(X.length){const q=t.exposed||(t.exposed={});X.forEach(ie=>{Object.defineProperty(q,ie,{get:()=>s[ie],set:qt=>s[ie]=qt})})}else t.exposed||(t.exposed={});R&&t.render===ht&&(t.render=R),W!=null&&(t.inheritAttrs=W),$e&&(t.components=$e),Rt&&(t.directives=Rt),F&&Ea(t)}function lh(t,e,s=ht){J(t)&&(t=Si(t));for(const n in t){const r=t[n];let i;pe(r)?"default"in r?i=es(r.from||n,r.default,!0):i=es(r.from||n):i=es(r),ce(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function Ta(t,e,s){Ye(J(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function Ia(t,e,s,n){let r=n.includes(".")?Za(s,n):()=>s[n];if(ke(t)){const i=e[t];U(i)&&Mn(r,i)}else if(U(t))Mn(r,t.bind(s));else if(pe(t))if(J(t))t.forEach(i=>Ia(i,e,s,n));else{const i=U(t.handler)?t.handler.bind(s):e[t.handler];U(i)&&Mn(r,i,t)}}function ki(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!s&&!n?l=e:(l={},r.length&&r.forEach(u=>$n(l,u,o,!0)),$n(l,e,o)),pe(e)&&i.set(e,l),l}function $n(t,e,s,n=!1){const{mixins:r,extends:i}=e;i&&$n(t,i,s,!0),r&&r.forEach(o=>$n(t,o,s,!0));for(const o in e)if(!(n&&o==="expose")){const a=ch[o]||s&&s[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const ch={data:Oa,props:Fa,emits:Fa,methods:Os,computed:Os,beforeCreate:Se,created:Se,beforeMount:Se,mounted:Se,beforeUpdate:Se,updated:Se,beforeDestroy:Se,beforeUnmount:Se,destroyed:Se,unmounted:Se,activated:Se,deactivated:Se,errorCaptured:Se,serverPrefetch:Se,components:Os,directives:Os,watch:fh,provide:Oa,inject:uh};function Oa(t,e){return e?t?function(){return ye(U(t)?t.call(this,this):t,U(e)?e.call(this,this):e)}:e:t}function uh(t,e){return Os(Si(t),Si(e))}function Si(t){if(J(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Se(t,e){return t?[...new Set([].concat(t,e))]:e}function Os(t,e){return t?ye(Object.create(null),t,e):e}function Fa(t,e){return t?J(t)&&J(e)?[...new Set([...t,...e])]:ye(Object.create(null),Ma(t),Ma(e??{})):e}function fh(t,e){if(!t)return e;if(!e)return t;const s=ye(Object.create(null),t);for(const n in e)s[n]=Se(t[n],e[n]);return s}function La(){return{app:null,config:{isNativeTag:kf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hh=0;function dh(t,e){return function(n,r=null){U(n)||(n=ye({},n)),r!=null&&!pe(r)&&(r=null);const i=La(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:hh++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Yh,get config(){return i.config},set config(c){},use(c,...h){return o.has(c)||(c&&U(c.install)?(o.add(c),c.install(u,...h)):U(c)&&(o.add(c),c(u,...h))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,h){return h?(i.components[c]=h,u):i.components[c]},directive(c,h){return h?(i.directives[c]=h,u):i.directives[c]},mount(c,h,p){if(!l){const _=u._ceVNode||Re(n,r);return _.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),h&&e?e(_,c):t(_,c,p),l=!0,u._container=c,c.__vue_app__=u,jn(_.component)}},onUnmount(c){a.push(c)},unmount(){l&&(Ye(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,h){return i.provides[c]=h,u},runWithContext(c){const h=jt;jt=u;try{return c()}finally{jt=h}}};return u}}let jt=null;function ph(t,e){if(xe){let s=xe.provides;const n=xe.parent&&xe.parent.provides;n===s&&(s=xe.provides=Object.create(n)),s[t]=e}}function es(t,e,s=!1){const n=xe||Te;if(n||jt){const r=jt?jt._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return s&&U(e)?e.call(n&&n.proxy):e}}function gh(){return!!(xe||Te||jt)}const ja={},Da=()=>Object.create(ja),Ba=t=>Object.getPrototypeOf(t)===ja;function mh(t,e,s,n=!1){const r={},i=Da();t.propsDefaults=Object.create(null),Na(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);s?t.props=n?r:hf(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function _h(t,e,s,n){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=G(r),[l]=t.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let p=c[h];if(Tn(t.emitsOptions,p))continue;const _=e[p];if(l)if(Q(i,p))_!==i[p]&&(i[p]=_,u=!0);else{const S=It(p);r[S]=Ei(l,a,S,_,t,!1)}else _!==i[p]&&(i[p]=_,u=!0)}}}else{Na(t,e,r,i)&&(u=!0);let c;for(const h in a)(!e||!Q(e,h)&&((c=Es(h))===h||!Q(e,c)))&&(l?s&&(s[h]!==void 0||s[c]!==void 0)&&(r[h]=Ei(l,a,h,void 0,t,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!Q(e,h))&&(delete i[h],u=!0)}u&&ct(t.attrs,"set","")}function Na(t,e,s,n){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ss(l))continue;const u=e[l];let c;r&&Q(r,c=It(l))?!i||!i.includes(c)?s[c]=u:(a||(a={}))[c]=u:Tn(t.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(i){const l=G(s),u=a||ae;for(let c=0;c<i.length;c++){const h=i[c];s[h]=Ei(r,l,h,u[h],t,!Q(u,h))}}return o}function Ei(t,e,s,n,r,i){const o=t[s];if(o!=null){const a=Q(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&U(l)){const{propsDefaults:u}=r;if(s in u)n=u[s];else{const c=Ds(r);n=u[s]=l.call(null,e),c()}}else n=l;r.ce&&r.ce._setProp(s,n)}o[0]&&(i&&!a?n=!1:o[1]&&(n===""||n===Es(s))&&(n=!0))}return n}const wh=new WeakMap;function Ha(t,e,s=!1){const n=s?wh:e.propsCache,r=n.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!U(t)){const c=h=>{l=!0;const[p,_]=Ha(h,e,!0);ye(o,p),_&&a.push(..._)};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!l)return pe(t)&&n.set(t,Xt),Xt;if(J(i))for(let c=0;c<i.length;c++){const h=It(i[c]);Va(h)&&(o[h]=ae)}else if(i)for(const c in i){const h=It(c);if(Va(h)){const p=i[c],_=o[h]=J(p)||U(p)?{type:p}:ye({},p),S=_.type;let y=!1,k=!0;if(J(S))for(let j=0;j<S.length;++j){const E=S[j],w=U(E)&&E.name;if(w==="Boolean"){y=!0;break}else w==="String"&&(k=!1)}else y=U(S)&&S.name==="Boolean";_[0]=y,_[1]=k,(y||Q(_,"default"))&&a.push(h)}}const u=[o,a];return pe(t)&&n.set(t,u),u}function Va(t){return t[0]!=="$"&&!Ss(t)}const Ua=t=>t[0]==="_"||t==="$stable",Ai=t=>J(t)?t.map(et):[et(t)],bh=(t,e,s)=>{if(e._n)return e;const n=Wf((...r)=>Ai(e(...r)),s);return n._c=!1,n},za=(t,e,s)=>{const n=t._ctx;for(const r in t){if(Ua(r))continue;const i=t[r];if(U(i))e[r]=bh(r,i,n);else if(i!=null){const o=Ai(i);e[r]=()=>o}}},Wa=(t,e)=>{const s=Ai(e);t.slots.default=()=>s},qa=(t,e,s)=>{for(const n in e)(s||n!=="_")&&(t[n]=e[n])},yh=(t,e,s)=>{const n=t.slots=Da();if(t.vnode.shapeFlag&32){const r=e._;r?(qa(n,e,s),s&&Tf(n,"_",r,!0)):za(e,n)}else e&&Wa(t,e)},xh=(t,e,s)=>{const{vnode:n,slots:r}=t;let i=!0,o=ae;if(n.shapeFlag&32){const a=e._;a?s&&a===1?i=!1:qa(r,e,s):(i=!e.$stable,za(e,r)),o=e}else e&&(Wa(t,e),o={default:1});if(i)for(const a in r)!Ua(a)&&o[a]==null&&delete r[a]},Ie=Fh;function vh(t){return Ch(t)}function Ch(t,e){const s=ga();s.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:p,setScopeId:_=ht,insertStaticContent:S}=t,y=(f,d,m,v=null,b=null,x=null,$=void 0,P=null,A=!!d.dynamicChildren)=>{if(f===d)return;f&&!js(f,d)&&(v=Wr(f),rt(f,b,x,!0),f=null),d.patchFlag===-2&&(A=!1,d.dynamicChildren=null);const{type:C,ref:H,shapeFlag:T}=d;switch(C){case In:k(f,d,m,v);break;case Bt:j(f,d,m,v);break;case $i:f==null&&E(d,m,v,$);break;case Ve:$e(f,d,m,v,b,x,$,P,A);break;default:T&1?R(f,d,m,v,b,x,$,P,A):T&6?Rt(f,d,m,v,b,x,$,P,A):(T&64||T&128)&&C.process(f,d,m,v,b,x,$,P,A,cn)}H!=null&&b&&bi(H,f&&f.ref,x,d||f,!d)},k=(f,d,m,v)=>{if(f==null)n(d.el=a(d.children),m,v);else{const b=d.el=f.el;d.children!==f.children&&u(b,d.children)}},j=(f,d,m,v)=>{f==null?n(d.el=l(d.children||""),m,v):d.el=f.el},E=(f,d,m,v)=>{[f.el,f.anchor]=S(f.children,d,m,v,f.el,f.anchor)},w=({el:f,anchor:d},m,v)=>{let b;for(;f&&f!==d;)b=p(f),n(f,m,v),f=b;n(d,m,v)},g=({el:f,anchor:d})=>{let m;for(;f&&f!==d;)m=p(f),r(f),f=m;r(d)},R=(f,d,m,v,b,x,$,P,A)=>{d.type==="svg"?$="svg":d.type==="math"&&($="mathml"),f==null?N(d,m,v,b,x,$,P,A):F(f,d,b,x,$,P,A)},N=(f,d,m,v,b,x,$,P)=>{let A,C;const{props:H,shapeFlag:T,transition:L,dirs:V}=f;if(A=f.el=o(f.type,x,H&&H.is,H),T&8?c(A,f.children):T&16&&B(f.children,A,null,v,b,Ri(f,x),$,P),V&&Lt(f,null,v,"created"),D(A,f,f.scopeId,$,v),H){for(const oe in H)oe!=="value"&&!Ss(oe)&&i(A,oe,null,H[oe],x,v);"value"in H&&i(A,"value",null,H.value,x),(C=H.onVnodeBeforeMount)&&tt(C,v,f)}V&&Lt(f,null,v,"beforeMount");const K=kh(b,L);K&&L.beforeEnter(A),n(A,d,m),((C=H&&H.onVnodeMounted)||K||V)&&Ie(()=>{C&&tt(C,v,f),K&&L.enter(A),V&&Lt(f,null,v,"mounted")},b)},D=(f,d,m,v,b)=>{if(m&&_(f,m),v)for(let x=0;x<v.length;x++)_(f,v[x]);if(b){let x=b.subTree;if(d===x||el(x.type)&&(x.ssContent===d||x.ssFallback===d)){const $=b.vnode;D(f,$,$.scopeId,$.slotScopeIds,b.parent)}}},B=(f,d,m,v,b,x,$,P,A=0)=>{for(let C=A;C<f.length;C++){const H=f[C]=P?kt(f[C]):et(f[C]);y(null,H,d,m,v,b,x,$,P)}},F=(f,d,m,v,b,x,$)=>{const P=d.el=f.el;let{patchFlag:A,dynamicChildren:C,dirs:H}=d;A|=f.patchFlag&16;const T=f.props||ae,L=d.props||ae;let V;if(m&&Dt(m,!1),(V=L.onVnodeBeforeUpdate)&&tt(V,m,d,f),H&&Lt(d,f,m,"beforeUpdate"),m&&Dt(m,!0),(T.innerHTML&&L.innerHTML==null||T.textContent&&L.textContent==null)&&c(P,""),C?X(f.dynamicChildren,C,P,m,v,Ri(d,b),x):$||ie(f,d,P,null,m,v,Ri(d,b),x,!1),A>0){if(A&16)W(P,T,L,m,b);else if(A&2&&T.class!==L.class&&i(P,"class",null,L.class,b),A&4&&i(P,"style",T.style,L.style,b),A&8){const K=d.dynamicProps;for(let oe=0;oe<K.length;oe++){const te=K[oe],Be=T[te],Ee=L[te];(Ee!==Be||te==="value")&&i(P,te,Be,Ee,b,m)}}A&1&&f.children!==d.children&&c(P,d.children)}else!$&&C==null&&W(P,T,L,m,b);((V=L.onVnodeUpdated)||H)&&Ie(()=>{V&&tt(V,m,d,f),H&&Lt(d,f,m,"updated")},v)},X=(f,d,m,v,b,x,$)=>{for(let P=0;P<d.length;P++){const A=f[P],C=d[P],H=A.el&&(A.type===Ve||!js(A,C)||A.shapeFlag&70)?h(A.el):m;y(A,C,H,null,v,b,x,$,!0)}},W=(f,d,m,v,b)=>{if(d!==m){if(d!==ae)for(const x in d)!Ss(x)&&!(x in m)&&i(f,x,d[x],null,b,v);for(const x in m){if(Ss(x))continue;const $=m[x],P=d[x];$!==P&&x!=="value"&&i(f,x,P,$,b,v)}"value"in m&&i(f,"value",d.value,m.value,b)}},$e=(f,d,m,v,b,x,$,P,A)=>{const C=d.el=f?f.el:a(""),H=d.anchor=f?f.anchor:a("");let{patchFlag:T,dynamicChildren:L,slotScopeIds:V}=d;V&&(P=P?P.concat(V):V),f==null?(n(C,m,v),n(H,m,v),B(d.children||[],m,H,b,x,$,P,A)):T>0&&T&64&&L&&f.dynamicChildren?(X(f.dynamicChildren,L,m,b,x,$,P),(d.key!=null||b&&d===b.subTree)&&Ka(f,d,!0)):ie(f,d,m,H,b,x,$,P,A)},Rt=(f,d,m,v,b,x,$,P,A)=>{d.slotScopeIds=P,f==null?d.shapeFlag&512?b.ctx.activate(d,m,v,$,A):an(d,m,v,b,x,$,A):Ur(f,d,A)},an=(f,d,m,v,b,x,$)=>{const P=f.component=zh(f,v,b);if(Aa(f)&&(P.ctx.renderer=cn),Wh(P,!1,$),P.asyncDep){if(b&&b.registerDep(P,fe,$),!f.el){const A=P.subTree=Re(Bt);j(null,A,d,m)}}else fe(P,f,d,m,b,x,$)},Ur=(f,d,m)=>{const v=d.component=f.component;if(Ih(f,d,m))if(v.asyncDep&&!v.asyncResolved){q(v,d,m);return}else v.next=d,v.update();else d.el=f.el,v.vnode=d},fe=(f,d,m,v,b,x,$)=>{const P=()=>{if(f.isMounted){let{next:T,bu:L,u:V,parent:K,vnode:oe}=f;{const Ne=Ga(f);if(Ne){T&&(T.el=oe.el,q(f,T,$)),Ne.asyncDep.then(()=>{f.isUnmounted||P()});return}}let te=T,Be;Dt(f,!1),T?(T.el=oe.el,q(f,T,$)):T=oe,L&&fi(L),(Be=T.props&&T.props.onVnodeBeforeUpdate)&&tt(Be,K,T,oe),Dt(f,!0);const Ee=Pi(f),Qe=f.subTree;f.subTree=Ee,y(Qe,Ee,h(Qe.el),Wr(Qe),f,b,x),T.el=Ee.el,te===null&&Oh(f,Ee.el),V&&Ie(V,b),(Be=T.props&&T.props.onVnodeUpdated)&&Ie(()=>tt(Be,K,T,oe),b)}else{let T;const{el:L,props:V}=d,{bm:K,m:oe,parent:te,root:Be,type:Ee}=f,Qe=Ts(d);if(Dt(f,!1),K&&fi(K),!Qe&&(T=V&&V.onVnodeBeforeMount)&&tt(T,te,d),Dt(f,!0),L&&$u){const Ne=()=>{f.subTree=Pi(f),$u(L,f.subTree,f,b,null)};Qe?Ee.__asyncHydrate(L,f,Ne):Ne()}else{Be.ce&&Be.ce._injectChildStyle(Ee);const Ne=f.subTree=Pi(f);y(null,Ne,m,v,f,b,x),d.el=Ne.el}if(oe&&Ie(oe,b),!Qe&&(T=V&&V.onVnodeMounted)){const Ne=d;Ie(()=>tt(T,te,Ne),b)}(d.shapeFlag&256||te&&Ts(te.vnode)&&te.vnode.shapeFlag&256)&&f.a&&Ie(f.a,b),f.isMounted=!0,d=m=v=null}};f.scope.on();const A=f.effect=new Ho(P);f.scope.off();const C=f.update=A.run.bind(A),H=f.job=A.runIfDirty.bind(A);H.i=f,H.id=f.uid,A.scheduler=()=>wi(H),Dt(f,!0),C()},q=(f,d,m)=>{d.component=f;const v=f.vnode.props;f.vnode=d,f.next=null,_h(f,d.props,v,m),xh(f,d.children,m),at(),xa(f),lt()},ie=(f,d,m,v,b,x,$,P,A=!1)=>{const C=f&&f.children,H=f?f.shapeFlag:0,T=d.children,{patchFlag:L,shapeFlag:V}=d;if(L>0){if(L&128){zr(C,T,m,v,b,x,$,P,A);return}else if(L&256){qt(C,T,m,v,b,x,$,P,A);return}}V&8?(H&16&&ln(C,b,x),T!==C&&c(m,T)):H&16?V&16?zr(C,T,m,v,b,x,$,P,A):ln(C,b,x,!0):(H&8&&c(m,""),V&16&&B(T,m,v,b,x,$,P,A))},qt=(f,d,m,v,b,x,$,P,A)=>{f=f||Xt,d=d||Xt;const C=f.length,H=d.length,T=Math.min(C,H);let L;for(L=0;L<T;L++){const V=d[L]=A?kt(d[L]):et(d[L]);y(f[L],V,m,null,b,x,$,P,A)}C>H?ln(f,b,x,!0,!1,T):B(d,m,v,b,x,$,P,A,T)},zr=(f,d,m,v,b,x,$,P,A)=>{let C=0;const H=d.length;let T=f.length-1,L=H-1;for(;C<=T&&C<=L;){const V=f[C],K=d[C]=A?kt(d[C]):et(d[C]);if(js(V,K))y(V,K,m,null,b,x,$,P,A);else break;C++}for(;C<=T&&C<=L;){const V=f[T],K=d[L]=A?kt(d[L]):et(d[L]);if(js(V,K))y(V,K,m,null,b,x,$,P,A);else break;T--,L--}if(C>T){if(C<=L){const V=L+1,K=V<H?d[V].el:v;for(;C<=L;)y(null,d[C]=A?kt(d[C]):et(d[C]),m,K,b,x,$,P,A),C++}}else if(C>L)for(;C<=T;)rt(f[C],b,x,!0),C++;else{const V=C,K=C,oe=new Map;for(C=K;C<=L;C++){const He=d[C]=A?kt(d[C]):et(d[C]);He.key!=null&&oe.set(He.key,C)}let te,Be=0;const Ee=L-K+1;let Qe=!1,Ne=0;const un=new Array(Ee);for(C=0;C<Ee;C++)un[C]=0;for(C=V;C<=T;C++){const He=f[C];if(Be>=Ee){rt(He,b,x,!0);continue}let it;if(He.key!=null)it=oe.get(He.key);else for(te=K;te<=L;te++)if(un[te-K]===0&&js(He,d[te])){it=te;break}it===void 0?rt(He,b,x,!0):(un[it-K]=C+1,it>=Ne?Ne=it:Qe=!0,y(He,d[it],m,null,b,x,$,P,A),Be++)}const Mu=Qe?Sh(un):Xt;for(te=Mu.length-1,C=Ee-1;C>=0;C--){const He=K+C,it=d[He],Tu=He+1<H?d[He+1].el:v;un[C]===0?y(null,it,m,Tu,b,x,$,P,A):Qe&&(te<0||C!==Mu[te]?Kt(it,m,Tu,2):te--)}}},Kt=(f,d,m,v,b=null)=>{const{el:x,type:$,transition:P,children:A,shapeFlag:C}=f;if(C&6){Kt(f.component.subTree,d,m,v);return}if(C&128){f.suspense.move(d,m,v);return}if(C&64){$.move(f,d,m,cn);return}if($===Ve){n(x,d,m);for(let T=0;T<A.length;T++)Kt(A[T],d,m,v);n(f.anchor,d,m);return}if($===$i){w(f,d,m);return}if(v!==2&&C&1&&P)if(v===0)P.beforeEnter(x),n(x,d,m),Ie(()=>P.enter(x),b);else{const{leave:T,delayLeave:L,afterLeave:V}=P,K=()=>n(x,d,m),oe=()=>{T(x,()=>{K(),V&&V()})};L?L(x,K,oe):oe()}else n(x,d,m)},rt=(f,d,m,v=!1,b=!1)=>{const{type:x,props:$,ref:P,children:A,dynamicChildren:C,shapeFlag:H,patchFlag:T,dirs:L,cacheIndex:V}=f;if(T===-2&&(b=!1),P!=null&&bi(P,null,m,f,!0),V!=null&&(d.renderCache[V]=void 0),H&256){d.ctx.deactivate(f);return}const K=H&1&&L,oe=!Ts(f);let te;if(oe&&(te=$&&$.onVnodeBeforeUnmount)&&tt(te,d,f),H&6)f0(f.component,m,v);else{if(H&128){f.suspense.unmount(m,v);return}K&&Lt(f,null,d,"beforeUnmount"),H&64?f.type.remove(f,d,m,cn,v):C&&!C.hasOnce&&(x!==Ve||T>0&&T&64)?ln(C,d,m,!1,!0):(x===Ve&&T&384||!b&&H&16)&&ln(A,d,m),v&&Au(f)}(oe&&(te=$&&$.onVnodeUnmounted)||K)&&Ie(()=>{te&&tt(te,d,f),K&&Lt(f,null,d,"unmounted")},m)},Au=f=>{const{type:d,el:m,anchor:v,transition:b}=f;if(d===Ve){u0(m,v);return}if(d===$i){g(f);return}const x=()=>{r(m),b&&!b.persisted&&b.afterLeave&&b.afterLeave()};if(f.shapeFlag&1&&b&&!b.persisted){const{leave:$,delayLeave:P}=b,A=()=>$(m,x);P?P(f.el,x,A):A()}else x()},u0=(f,d)=>{let m;for(;f!==d;)m=p(f),r(f),f=m;r(d)},f0=(f,d,m)=>{const{bum:v,scope:b,job:x,subTree:$,um:P,m:A,a:C}=f;Ja(A),Ja(C),v&&fi(v),b.stop(),x&&(x.flags|=8,rt($,f,d,m)),P&&Ie(P,d),Ie(()=>{f.isUnmounted=!0},d),d&&d.pendingBranch&&!d.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===d.pendingId&&(d.deps--,d.deps===0&&d.resolve())},ln=(f,d,m,v=!1,b=!1,x=0)=>{for(let $=x;$<f.length;$++)rt(f[$],d,m,v,b)},Wr=f=>{if(f.shapeFlag&6)return Wr(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const d=p(f.anchor||f.el),m=d&&d[qf];return m?p(m):d};let jo=!1;const Ru=(f,d,m)=>{f==null?d._vnode&&rt(d._vnode,null,null,!0):y(d._vnode||null,f,d,null,null,null,m),d._vnode=f,jo||(jo=!0,xa(),va(),jo=!1)},cn={p:y,um:rt,m:Kt,r:Au,mt:an,mc:B,pc:ie,pbc:X,n:Wr,o:t};let Pu,$u;return{render:Ru,hydrate:Pu,createApp:dh(Ru,Pu)}}function Ri({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Dt({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function kh(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ka(t,e,s=!1){const n=t.children,r=e.children;if(J(n)&&J(r))for(let i=0;i<n.length;i++){const o=n[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=kt(r[i]),a.el=o.el),!s&&a.patchFlag!==-2&&Ka(o,a)),a.type===In&&(a.el=o.el)}}function Sh(t){const e=t.slice(),s=[0];let n,r,i,o,a;const l=t.length;for(n=0;n<l;n++){const u=t[n];if(u!==0){if(r=s[s.length-1],t[r]<u){e[n]=r,s.push(n);continue}for(i=0,o=s.length-1;i<o;)a=i+o>>1,t[s[a]]<u?i=a+1:o=a;u<t[s[i]]&&(i>0&&(e[n]=s[i-1]),s[i]=n)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function Ga(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ga(e)}function Ja(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Eh=Symbol.for("v-scx"),Ah=()=>es(Eh);function Mn(t,e,s){return Xa(t,e,s)}function Xa(t,e,s=ae){const{immediate:n,deep:r,flush:i,once:o}=s,a=ye({},s);let l;if(Ln)if(i==="sync"){const p=Ah();l=p.__watcherHandles||(p.__watcherHandles=[])}else if(!e||n)a.once=!0;else return{stop:ht,resume:ht,pause:ht};const u=xe;a.call=(p,_,S)=>Ye(p,u,_,S);let c=!1;i==="post"?a.scheduler=p=>{Ie(p,u&&u.suspense)}:i!=="sync"&&(c=!0,a.scheduler=(p,_)=>{_?p():wi(p)}),a.augmentJob=p=>{e&&(p.flags|=4),c&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const h=vf(t,e,a);return l&&l.push(h),h}function Rh(t,e,s){const n=this.proxy,r=ke(t)?t.includes(".")?Za(n,t):()=>n[t]:t.bind(n,n);let i;U(e)?i=e:(i=e.handler,s=e);const o=Ds(this),a=Xa(r,i.bind(n),s);return o(),a}function Za(t,e){const s=e.split(".");return()=>{let n=t;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const Ph=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${It(e)}Modifiers`]||t[`${Es(e)}Modifiers`];function $h(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||ae;let r=s;const i=e.startsWith("update:"),o=i&&Ph(n,e.slice(7));o&&(o.trim&&(r=s.map(c=>ke(c)?c.trim():c)),o.number&&(r=s.map(If)));let a,l=n[a=ui(e)]||n[a=ui(It(e))];!l&&i&&(l=n[a=ui(Es(e))]),l&&Ye(l,t,6,r);const u=n[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ye(u,t,6,r)}}function Qa(t,e,s=!1){const n=e.emitsCache,r=n.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!U(t)){const l=u=>{const c=Qa(u,e,!0);c&&(a=!0,ye(o,c))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(pe(t)&&n.set(t,null),null):(J(i)?i.forEach(l=>o[l]=null):ye(o,i),pe(t)&&n.set(t,o),o)}function Tn(t,e){return!t||!li(e)?!1:(e=e.slice(2).replace(/Once$/,""),Q(t,e[0].toLowerCase()+e.slice(1))||Q(t,Es(e))||Q(t,e))}function _0(){}function Pi(t){const{type:e,vnode:s,proxy:n,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:h,data:p,setupState:_,ctx:S,inheritAttrs:y}=t,k=An(t);let j,E;try{if(s.shapeFlag&4){const g=r||n,R=g;j=et(u.call(R,g,c,h,_,p,S)),E=a}else{const g=e;j=et(g.length>1?g(h,{attrs:a,slots:o,emit:l}):g(h,null)),E=e.props?a:Mh(a)}}catch(g){Fs.length=0,En(g,t,1),j=Re(Bt)}let w=j;if(E&&y!==!1){const g=Object.keys(E),{shapeFlag:R}=w;g.length&&R&7&&(i&&g.some(ca)&&(E=Th(E,i)),w=ts(w,E,!1,!0))}return s.dirs&&(w=ts(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(s.dirs):s.dirs),s.transition&&(w.transition=s.transition),j=w,An(k),j}const Mh=t=>{let e;for(const s in t)(s==="class"||s==="style"||li(s))&&((e||(e={}))[s]=t[s]);return e},Th=(t,e)=>{const s={};for(const n in t)(!ca(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function Ih(t,e,s){const{props:n,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?Ya(n,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const p=c[h];if(o[p]!==n[p]&&!Tn(u,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?Ya(n,o,u):!0:!!o;return!1}function Ya(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(e[i]!==t[i]&&!Tn(s,i))return!0}return!1}function Oh({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const el=t=>t.__isSuspense;function Fh(t,e){e&&e.pendingBranch?J(t)?e.effects.push(...t):e.effects.push(t):zf(t)}const Ve=Symbol.for("v-fgt"),In=Symbol.for("v-txt"),Bt=Symbol.for("v-cmt"),$i=Symbol.for("v-stc"),Fs=[];let Oe=null;function he(t=!1){Fs.push(Oe=t?null:[])}function Lh(){Fs.pop(),Oe=Fs[Fs.length-1]||null}let Ls=1;function tl(t){Ls+=t,t<0&&Oe&&(Oe.hasOnce=!0)}function sl(t){return t.dynamicChildren=Ls>0?Oe||Xt:null,Lh(),Ls>0&&Oe&&Oe.push(t),t}function ge(t,e,s,n,r,i){return sl(I(t,e,s,n,r,i,!0))}function nl(t,e,s,n,r){return sl(Re(t,e,s,n,r,!0))}function jh(t){return t?t.__v_isVNode===!0:!1}function js(t,e){return t.type===e.type&&t.key===e.key}const rl=({key:t})=>t??null,On=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?ke(t)||ce(t)||U(t)?{i:Te,r:t,k:e,f:!!s}:t:null);function I(t,e=null,s=null,n=0,r=null,i=t===Ve?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&rl(e),ref:e&&On(e),scopeId:ka,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Te};return a?(Mi(l,s),i&128&&t.normalize(l)):s&&(l.shapeFlag|=ke(s)?8:16),Ls>0&&!o&&Oe&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Oe.push(l),l}const Re=Dh;function Dh(t,e=null,s=null,n=0,r=null,i=!1){if((!t||t===ih)&&(t=Bt),jh(t)){const a=ts(t,e,!0);return s&&Mi(a,s),Ls>0&&!i&&Oe&&(a.shapeFlag&6?Oe[Oe.indexOf(t)]=a:Oe.push(a)),a.patchFlag=-2,a}if(Qh(t)&&(t=t.__vccOpts),e){e=Bh(e);let{class:a,style:l}=e;a&&!ke(a)&&(e.class=As(a)),pe(l)&&(ii(l)&&!J(l)&&(l=ye({},l)),e.style=hi(l))}const o=ke(t)?1:el(t)?128:Kf(t)?64:pe(t)?4:U(t)?2:0;return I(t,e,s,n,r,o,i,!0)}function Bh(t){return t?ii(t)||Ba(t)?ye({},t):t:null}function ts(t,e,s=!1,n=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?Hh(r||{},e):r,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&rl(u),ref:e&&e.ref?s&&i?J(i)?i.concat(On(e)):[i,On(e)]:On(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ve?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ts(t.ssContent),ssFallback:t.ssFallback&&ts(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&Sa(c,l.clone(c)),c}function Nh(t=" ",e=0){return Re(In,null,t,e)}function ss(t="",e=!1){return e?(he(),nl(Bt,null,t)):Re(Bt,null,t)}function et(t){return t==null||typeof t=="boolean"?Re(Bt):J(t)?Re(Ve,null,t.slice()):typeof t=="object"?kt(t):Re(In,null,String(t))}function kt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ts(t)}function Mi(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(J(e))s=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),Mi(t,r()),r._c&&(r._d=!0));return}else{s=32;const r=e._;!r&&!Ba(e)?e._ctx=Te:r===3&&Te&&(Te.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else U(e)?(e={default:e,_ctx:Te},s=32):(e=String(e),n&64?(s=16,e=[Nh(e)]):s=8);t.children=e,t.shapeFlag|=s}function Hh(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=As([e.class,n.class]));else if(r==="style")e.style=hi([e.style,n.style]);else if(li(r)){const i=e[r],o=n[r];o&&i!==o&&!(J(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=n[r])}return e}function tt(t,e,s,n=null){Ye(t,e,7,[s,n])}const Vh=La();let Uh=0;function zh(t,e,s){const n=t.type,r=(e?e.appContext:t.appContext)||Vh,i={uid:Uh++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Do(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ha(n,r),emitsOptions:Qa(n,r),emit:null,emitted:null,propsDefaults:ae,inheritAttrs:n.inheritAttrs,ctx:ae,data:ae,props:ae,attrs:ae,slots:ae,refs:ae,setupState:ae,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=$h.bind(null,i),t.ce&&t.ce(i),i}let xe=null,Fn,Ti;{const t=ga(),e=(s,n)=>{let r;return(r=t[s])||(r=t[s]=[]),r.push(n),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Fn=e("__VUE_INSTANCE_SETTERS__",s=>xe=s),Ti=e("__VUE_SSR_SETTERS__",s=>Ln=s)}const Ds=t=>{const e=xe;return Fn(t),t.scope.on(),()=>{t.scope.off(),Fn(e)}},il=()=>{xe&&xe.scope.off(),Fn(null)};function ol(t){return t.vnode.shapeFlag&4}let Ln=!1;function Wh(t,e=!1,s=!1){e&&Ti(e);const{props:n,children:r}=t.vnode,i=ol(t);mh(t,n,i,e),yh(t,r,s);const o=i?qh(t,e):void 0;return e&&Ti(!1),o}function qh(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,oh);const{setup:n}=s;if(n){const r=t.setupContext=n.length>1?Gh(t):null,i=Ds(t);at();const o=Zt(n,t,0,[t.props,r]);if(lt(),i(),ha(o)){if(Ts(t)||Ea(t),o.then(il,il),e)return o.then(a=>{al(t,a,e)}).catch(a=>{En(a,t,0)});t.asyncDep=o}else al(t,o,e)}else cl(t,e)}function al(t,e,s){U(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:pe(e)&&(t.setupState=la(e)),cl(t,s)}let ll;function cl(t,e,s){const n=t.type;if(!t.render){if(!e&&ll&&!n.render){const r=n.template||ki(t).template;if(r){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=n,u=ye(ye({isCustomElement:i,delimiters:a},o),l);n.render=ll(r,u)}}t.render=n.render||ht}{const r=Ds(t);at();try{ah(t)}finally{lt(),r()}}}const Kh={get(t,e){return we(t,"get",""),t[e]}};function Gh(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Kh),slots:t.slots,emit:t.emit,expose:e}}function jn(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(la(oi(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Is)return Is[s](t)},has(e,s){return s in e||s in Is}})):t.proxy}const Jh=/(?:^|[-_])(\w)/g,Xh=t=>t.replace(Jh,e=>e.toUpperCase()).replace(/[-_]/g,"");function Zh(t,e=!0){return U(t)?t.displayName||t.name:t.name||e&&t.__name}function ul(t,e,s=!1){let n=Zh(e);if(!n&&e.__file){const r=e.__file.match(/([^/\\]+)\.\w+$/);r&&(n=r[1])}if(!n&&t&&t.parent){const r=i=>{for(const o in i)if(i[o]===e)return o};n=r(t.components||t.parent.type.components)||r(t.appContext.components)}return n?Xh(n):s?"App":"Anonymous"}function Qh(t){return U(t)&&"__vccOpts"in t}const Ii=(t,e)=>yf(t,e,Ln),Yh="3.5.0-beta.3";/**
* @vue/shared v3.5.0-beta.3
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ed(t,e){const s=new Set(t.split(","));return n=>s.has(n)}const td=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),sd=t=>t.startsWith("onUpdate:"),Dn=Object.assign,nd=Object.prototype.hasOwnProperty,rd=(t,e)=>nd.call(t,e),Bs=Array.isArray,fl=t=>typeof t=="function",ns=t=>typeof t=="string",id=t=>typeof t=="symbol",od=Object.prototype.toString,ad=t=>od.call(t),hl=t=>ad(t)==="[object Object]",Oi=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},ld=/-(\w)/g,Fi=Oi(t=>t.replace(ld,(e,s)=>s?s.toUpperCase():"")),cd=/\B([A-Z])/g,St=Oi(t=>t.replace(cd,"-$1").toLowerCase()),ud=Oi(t=>t.charAt(0).toUpperCase()+t.slice(1)),fd=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},dl=t=>{const e=parseFloat(t);return isNaN(e)?t:e},pl=t=>{const e=ns(t)?Number(t):NaN;return isNaN(e)?t:e},hd=ed("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function gl(t){return!!t||t===""}/**
* @vue/runtime-dom v3.5.0-beta.3
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Li;const ml=typeof window<"u"&&window.trustedTypes;if(ml)try{Li=ml.createPolicy("vue",{createHTML:t=>t})}catch{}const dd=Li?t=>Li.createHTML(t):t=>t,pd="http://www.w3.org/2000/svg",gd="http://www.w3.org/1998/Math/MathML",pt=typeof document<"u"?document:null,_l=pt&&pt.createElement("template"),md={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const r=e==="svg"?pt.createElementNS(pd,t):e==="mathml"?pt.createElementNS(gd,t):s?pt.createElement(t,{is:s}):pt.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>pt.createTextNode(t),createComment:t=>pt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>pt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,r,i){const o=s?s.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),s),!(r===i||!(r=r.nextSibling)););else{_l.innerHTML=dd(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=_l.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},_d=Symbol("_vtc");function wd(t,e,s){const n=t[_d];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const wl=Symbol("_vod"),bd=Symbol("_vsh"),yd=Symbol(""),xd=/(^|;)\s*display\s*:/;function vd(t,e,s){const n=t.style,r=ns(s);let i=!1;if(s&&!r){if(e)if(ns(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&Bn(n,a,"")}else for(const o in e)s[o]==null&&Bn(n,o,"");for(const o in s)o==="display"&&(i=!0),Bn(n,o,s[o])}else if(r){if(e!==s){const o=n[yd];o&&(s+=";"+o),n.cssText=s,i=xd.test(s)}}else e&&t.removeAttribute("style");wl in t&&(t[wl]=i?n.display:"",t[bd]&&(n.display="none"))}const bl=/\s*!important$/;function Bn(t,e,s){if(Bs(s))s.forEach(n=>Bn(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=Cd(t,e);bl.test(s)?t.setProperty(St(n),s.replace(bl,""),"important"):t[n]=s}}const yl=["Webkit","Moz","ms"],ji={};function Cd(t,e){const s=ji[e];if(s)return s;let n=It(e);if(n!=="filter"&&n in t)return ji[e]=n;n=ud(n);for(let r=0;r<yl.length;r++){const i=yl[r]+n;if(i in t)return ji[e]=i}return e}const xl="http://www.w3.org/1999/xlink";function vl(t,e,s,n,r,i=hd(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(xl,e.slice(6,e.length)):t.setAttributeNS(xl,e,s):s==null||i&&!gl(s)?t.removeAttribute(e):t.setAttribute(e,i?"":id(s)?String(s):s)}function kd(t,e,s,n){if(e==="innerHTML"||e==="textContent"){if(s==null)return;t[e]=s;return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const o=r==="OPTION"?t.getAttribute("value")||"":t.value,a=s==null?"":String(s);(o!==a||!("_value"in t))&&(t.value=a),s==null&&t.removeAttribute(e),t._value=s;return}let i=!1;if(s===""||s==null){const o=typeof t[e];o==="boolean"?s=gl(s):s==null&&o==="string"?(s="",i=!0):o==="number"&&(s=0,i=!0)}try{t[e]=s}catch{}i&&t.removeAttribute(e)}function rs(t,e,s,n){t.addEventListener(e,s,n)}function Sd(t,e,s,n){t.removeEventListener(e,s,n)}const Cl=Symbol("_vei");function Ed(t,e,s,n,r=null){const i=t[Cl]||(t[Cl]={}),o=i[e];if(n&&o)o.value=n;else{const[a,l]=Ad(e);if(n){const u=i[e]=$d(n,r);rs(t,a,u,l)}else o&&(Sd(t,a,o,l),i[e]=void 0)}}const kl=/(?:Once|Passive|Capture)$/;function Ad(t){let e;if(kl.test(t)){e={};let n;for(;n=t.match(kl);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):St(t.slice(2)),e]}let Di=0;const Rd=Promise.resolve(),Pd=()=>Di||(Rd.then(()=>Di=0),Di=Date.now());function $d(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Ye(Md(n,s.value),e,5,[n])};return s.value=t,s.attached=Pd(),s}function Md(t,e){if(Bs(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const Sl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Td=(t,e,s,n,r,i)=>{const o=r==="svg";e==="class"?wd(t,n,o):e==="style"?vd(t,s,n):td(e)?sd(e)||Ed(t,e,s,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Id(t,e,n,o))?(kd(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&vl(t,e,n,o,i,e!=="value")):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),vl(t,e,n,o))};function Id(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Sl(e)&&fl(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Sl(e)&&ns(s)?!1:!!(e in t||t._isVueCE&&(/[A-Z]/.test(e)||!ns(s)))}const El={};/*! #__NO_SIDE_EFFECTS__ */function Od(t,e,s){const n=Ms(t,e);hl(n)&&Dn(n,e);class r extends Bi{constructor(o){super(n,o,s)}}return r.def=n,r}const Fd=typeof HTMLElement<"u"?HTMLElement:class{};class Bi extends Fd{constructor(e,s={},n=Tl){super(),this._def=e,this._props=s,this._createApp=n,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&n!==Tl?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Bi){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,_i(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance.ce=void 0,this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);this._ob=new MutationObserver(n=>{for(const r of n)this._setAttr(r.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(n,r=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:i,styles:o}=n;let a;if(i&&!Bs(i))for(const l in i){const u=i[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=pl(this._props[l])),(a||(a=Object.create(null)))[Fi(l)]=!0)}this._numberProps=a,r&&this._resolveProps(n),this.shadowRoot&&this._applyStyles(o),this._mount(n)},s=this._def.__asyncLoader;s?this._pendingResolve=s().then(n=>e(this._def=n,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const s=this._instance&&this._instance.exposed;if(s)for(const n in s)rd(this,n)||Object.defineProperty(this,n,{get:()=>Mt(s[n])})}_resolveProps(e){const{props:s}=e,n=Bs(s)?s:Object.keys(s||{});for(const r of Object.keys(this))r[0]!=="_"&&n.includes(r)&&this._setProp(r,this[r]);for(const r of n.map(Fi))Object.defineProperty(this,r,{get(){return this._getProp(r)},set(i){this._setProp(r,i,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const s=this.hasAttribute(e);let n=s?this.getAttribute(e):El;const r=Fi(e);s&&this._numberProps&&this._numberProps[r]&&(n=pl(n)),this._setProp(r,n,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,s,n=!0,r=!1){s!==this._props[e]&&(s===El?delete this._props[e]:this._props[e]=s,r&&this._instance&&this._update(),n&&(s===!0?this.setAttribute(St(e),""):typeof s=="string"||typeof s=="number"?this.setAttribute(St(e),s+""):s||this.removeAttribute(St(e))))}_update(){Hd(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const s=Re(this._def,Dn(e,this._props));return this._instance||(s.ce=n=>{this._instance=n,n.ce=this,n.isCE=!0;const r=(i,o)=>{this.dispatchEvent(new CustomEvent(i,hl(o[0])?Dn({detail:o},o[0]):{detail:o}))};n.emit=(i,...o)=>{r(i,o),St(i)!==i&&r(St(i),o)},this._setParent()}),s}_applyStyles(e,s){if(!e)return;if(s){if(s===this._def||this._styleChildren.has(s))return;this._styleChildren.add(s)}const n=this._nonce;for(let r=e.length-1;r>=0;r--){const i=document.createElement("style");n&&i.setAttribute("nonce",n),i.textContent=e[r],this.shadowRoot.prepend(i)}}_parseSlots(){const e=this._slots={};let s;for(;s=this.firstChild;){const n=s.nodeType===1&&s.getAttribute("slot")||"default";(e[n]||(e[n]=[])).push(s),this.removeChild(s)}}_renderSlots(){const e=this.querySelectorAll("slot"),s=this._instance.type.__scopeId;for(let n=0;n<e.length;n++){const r=e[n],i=r.getAttribute("name")||"default",o=this._slots[i],a=r.parentNode;if(o)for(const l of o){if(s&&l.nodeType===1){const u=s+"-s",c=document.createTreeWalker(l,1);l.setAttribute(u,"");let h;for(;h=c.nextNode();)h.setAttribute(u,"")}a.insertBefore(l,r)}else for(;r.firstChild;)a.insertBefore(r.firstChild,r);a.removeChild(r)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}const Al=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Bs(e)?s=>fd(e,s):e};function Ld(t){t.target.composing=!0}function Rl(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ni=Symbol("_assign"),Nn={created(t,{modifiers:{lazy:e,trim:s,number:n}},r){t[Ni]=Al(r);const i=n||r.props&&r.props.type==="number";rs(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;s&&(a=a.trim()),i&&(a=dl(a)),t[Ni](a)}),s&&rs(t,"change",()=>{t.value=t.value.trim()}),e||(rs(t,"compositionstart",Ld),rs(t,"compositionend",Rl),rs(t,"change",Rl))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:r,number:i}},o){if(t[Ni]=Al(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?dl(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||r&&t.value.trim()===l)||(t.value=l))}},jd=["ctrl","shift","alt","meta"],Dd={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>jd.some(s=>t[`${s}Key`]&&!e.includes(s))},Hn=(t,e)=>{const s=t._withMods||(t._withMods={}),n=e.join(".");return s[n]||(s[n]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=Dd[e[o]];if(a&&a(r,e))return}return t(r,...i)})},Bd={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Pl=(t,e)=>{const s=t._withKeys||(t._withKeys={}),n=e.join(".");return s[n]||(s[n]=r=>{if(!("key"in r))return;const i=St(r.key);if(e.some(o=>o===i||Bd[o]===i))return t(r)})},Nd=Dn({patchProp:Td},md);let $l;function Ml(){return $l||($l=vh(Nd))}const Hd=(...t)=>{Ml().render(...t)},Tl=(...t)=>{const e=Ml().createApp(...t),{mount:s}=e;return e.mount=n=>{const r=Ud(n);if(!r)return;const i=e._component;!fl(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=s(r,!1,Vd(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function Vd(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Ud(t){return ns(t)?document.querySelector(t):t}const Vn="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Menu%20/%20Close_LG'%3e%3cpath%20id='Vector'%20d='M21%2021L12%2012M12%2012L3%203M12%2012L21.0001%203M12%2012L3%2021.0001'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",Il="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='%23003274'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Arrow%20/%20Caret_Circle_Up'%3e%3cpath%20id='Vector'%20d='M9%2013L12%2010L15%2013M21%2012C21%207.02944%2016.9706%203%2012%203C7.02944%203%203%207.02944%203%2012C3%2016.9706%207.02944%2021%2012%2021C16.9706%2021%2021%2016.9706%2021%2012Z'%20stroke='%23FFFFFF'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",Ol="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Edit%20/%20List_Unordered'%3e%3cpath%20id='Vector'%20d='M9%2017H19M9%2012H19M9%207H19M5.00195%2017V17.002L5%2017.002V17H5.00195ZM5.00195%2012V12.002L5%2012.002V12H5.00195ZM5.00195%207V7.002L5%207.00195V7H5.00195Z'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",Fl="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Navigation%20/%20House_03'%3e%3cpath%20id='Vector'%20d='M2%2020.0001H4M4%2020.0001H10M4%2020.0001V11.4522C4%2010.9179%204%2010.6506%204.06497%2010.4019C4.12255%2010.1816%204.21779%209.97307%204.3457%209.78464C4.49004%209.57201%204.69064%209.39569%205.09277%209.04383L9.89436%204.84244C10.6398%204.19014%2011.0126%203.86397%2011.4324%203.73982C11.8026%203.63035%2012.1972%203.63035%2012.5674%203.73982C12.9875%203.86406%2013.3608%204.19054%2014.1074%204.84383L18.9074%209.04383C19.3095%209.39568%2019.5102%209.57202%2019.6546%209.78464C19.7825%209.97307%2019.877%2010.1816%2019.9346%2010.4019C19.9995%2010.6506%2020%2010.9179%2020%2011.4522V20.0001M10%2020.0001H14M10%2020.0001V16.0001C10%2014.8955%2010.8954%2014.0001%2012%2014.0001C13.1046%2014.0001%2014%2014.8955%2014%2016.0001V20.0001M14%2020.0001H20M20%2020.0001H22'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",Ll="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Warning%20/%20Circle_Help'%3e%3cpath%20id='Vector'%20d='M9.14648%209.07361C9.31728%208.54732%209.63015%208.07896%2010.0508%207.71948C10.4714%207.36001%2010.9838%207.12378%2011.5303%207.03708C12.0768%206.95038%2012.6362%207.0164%2013.1475%207.22803C13.6587%207.43966%2014.1014%207.78875%2014.4268%208.23633C14.7521%208.68391%2014.9469%209.21256%2014.9904%209.76416C15.0339%2010.3158%2014.9238%2010.8688%2014.6727%2011.3618C14.4215%2011.8548%2014.0394%2012.2685%2013.5676%2012.5576C13.0958%2012.8467%2012.5533%2012.9998%2012%2012.9998V14.0002M12%2021C7.02944%2021%203%2016.9706%203%2012C3%207.02944%207.02944%203%2012%203C16.9706%203%2021%207.02944%2021%2012C21%2016.9706%2016.9706%2021%2012%2021ZM12.0498%2017V17.1L11.9502%2017.1002V17H12.0498Z'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",zd="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23FFFFFF'%20color='FFFFFF'%20width='800px'%20height='800px'%20viewBox='0%200%2032%2032'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M24%200h-11c-1.104%200-2%200.895-2%202h11v8h8v16h-7v2h7c1.105%200%202-0.895%202-2v-18zM24%208v-5.172l5.171%205.172h-5.171zM2%204c-1.105%200-2%200.896-2%202v24c0%201.105%200.895%202%202%202h17c1.105%200%202-0.895%202-2v-18l-8-8.001h-11zM19%2030h-17v-24h9v8h8v16zM13%2012v-5.172l5.171%205.172h-5.171z'%3e%3c/path%3e%3c/svg%3e",Wd="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Arrow%20/%20Arrow_Reload_02'%3e%3cpath%20id='Vector'%20d='M14%2016H19V21M10%208H5V3M19.4176%209.0034C18.8569%207.61566%2017.9181%206.41304%2016.708%205.53223C15.4979%204.65141%2014.0652%204.12752%2012.5723%204.02051C11.0794%203.9135%209.58606%204.2274%208.2627%204.92661C6.93933%205.62582%205.83882%206.68254%205.08594%207.97612M4.58203%2014.9971C5.14272%2016.3848%206.08146%2017.5874%207.29157%2018.4682C8.50169%2019.3491%209.93588%2019.8723%2011.4288%2019.9793C12.9217%2020.0863%2014.4138%2019.7725%2015.7371%2019.0732C17.0605%2018.374%2018.1603%2017.3175%2018.9131%2016.0239'%20stroke='%23FFFFFF'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",qd="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Communication%20/%20Share_iOS_Export'%3e%3cpath%20id='Vector'%20d='M9%206L12%203M12%203L15%206M12%203V13M7.00023%2010C6.06835%2010%205.60241%2010%205.23486%2010.1522C4.74481%2010.3552%204.35523%2010.7448%204.15224%2011.2349C4%2011.6024%204%2012.0681%204%2013V17.8C4%2018.9201%204%2019.4798%204.21799%2019.9076C4.40973%2020.2839%204.71547%2020.5905%205.0918%2020.7822C5.5192%2021%206.07899%2021%207.19691%2021H16.8036C17.9215%2021%2018.4805%2021%2018.9079%2020.7822C19.2842%2020.5905%2019.5905%2020.2839%2019.7822%2019.9076C20%2019.4802%2020%2018.921%2020%2017.8031V13C20%2012.0681%2019.9999%2011.6024%2019.8477%2011.2349C19.6447%2010.7448%2019.2554%2010.3552%2018.7654%2010.1522C18.3978%2010%2017.9319%2010%2017%2010'%20stroke='%23FFFFFF'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",is="4.56.0";let jl=!1,Ns,Dl,Bl,Hi,Nl,Hl,Vl,Ul,zl;function Kd(t,e={auto:!1}){if(jl)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(Ns)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${Ns}'\``);jl=e.auto,Ns=t.kind,Dl=t.fetch,Bl=t.FormData,Hi=t.File,Nl=t.ReadableStream,Hl=t.getMultipartRequestOptions,Vl=t.getDefaultAgent,Ul=t.fileFromPath,zl=t.isFsReadStream}class Gd{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function Jd({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let s,n,r,i;try{s=fetch,n=Request,r=Response,i=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:s,Request:n,Response:r,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,a)=>({...a,body:new Gd(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}Ns||Kd(Jd(),{auto:!0});class st{constructor(e,s){this.iterator=e,this.controller=s}static fromSSEResponse(e,s){let n=!1;async function*r(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(const o of Xd(e,s))if(!i){if(o.data.startsWith("[DONE]")){i=!0;continue}if(o.event===null){let a;try{a=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(a&&a.error)throw new me(void 0,a.error,void 0,void 0);yield a}else{let a;try{a=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(o.event=="error")throw new me(void 0,a.error,a.message,void 0);yield{event:o.event,data:a}}}i=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{i||s.abort()}}return new st(r,s)}static fromReadableStream(e,s){let n=!1;async function*r(){const o=new Nt,a=Wl(e);for await(const l of a)for(const u of o.decode(l))yield u;for(const l of o.flush())yield l}async function*i(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let o=!1;try{for await(const a of r())o||a&&(yield JSON.parse(a));o=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{o||s.abort()}}return new st(i,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],s=[],n=this.iterator(),r=i=>({next:()=>{if(i.length===0){const o=n.next();e.push(o),s.push(o)}return i.shift()}});return[new st(()=>r(e),this.controller),new st(()=>r(s),this.controller)]}toReadableStream(){const e=this;let s;const n=new TextEncoder;return new Nl({async start(){s=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await s.next();if(o)return r.close();const a=n.encode(JSON.stringify(i)+`
`);r.enqueue(a)}catch(i){r.error(i)}},async cancel(){var r;await((r=s.return)==null?void 0:r.call(s))}})}}async function*Xd(t,e){if(!t.body)throw e.abort(),new z("Attempted to iterate over a response with no body");const s=new Yd,n=new Nt,r=Wl(t.body);for await(const i of Zd(r))for(const o of n.decode(i)){const a=s.decode(o);a&&(yield a)}for(const i of n.flush()){const o=s.decode(i);o&&(yield o)}}async function*Zd(t){let e=new Uint8Array;for await(const s of t){if(s==null)continue;const n=s instanceof ArrayBuffer?new Uint8Array(s):typeof s=="string"?new TextEncoder().encode(s):s;let r=new Uint8Array(e.length+n.length);r.set(e),r.set(n,e.length),e=r;let i;for(;(i=Qd(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}function Qd(t){for(let n=0;n<t.length-2;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}class Yd{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[s,n,r]=ep(e,":");return r.startsWith(" ")&&(r=r.substring(1)),s==="event"?this.event=r:s==="data"&&this.data.push(r),null}}class Nt{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let s=this.decodeText(e);if(this.trailingCR&&(s="\r"+s,this.trailingCR=!1),s.endsWith("\r")&&(this.trailingCR=!0,s=s.slice(0,-1)),!s)return[];const n=Nt.NEWLINE_CHARS.has(s[s.length-1]||"");let r=s.split(Nt.NEWLINE_REGEXP);return n&&r.pop(),r.length===1&&!n?(this.buffer.push(r[0]),[]):(this.buffer.length>0&&(r=[this.buffer.join("")+r[0],...r.slice(1)],this.buffer=[]),n||(this.buffer=[r.pop()||""]),r)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new z(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new z(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new z("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}Nt.NEWLINE_CHARS=new Set([`
`,"\r"]),Nt.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function ep(t,e){const s=t.indexOf(e);return s!==-1?[t.substring(0,s),e,t.substring(s+e.length)]:[t,"",""]}function Wl(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const s=await e.read();return s!=null&&s.done&&e.releaseLock(),s}catch(s){throw e.releaseLock(),s}},async return(){const s=e.cancel();return e.releaseLock(),await s,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const ql=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",Kl=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Vi(t),Vi=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",tp=t=>Kl(t)||ql(t)||zl(t);async function Gl(t,e,s){var r;if(t=await t,s??(s=Kl(t)?{lastModified:t.lastModified,type:t.type}:{}),ql(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new Hi([i],e,s)}const n=await sp(t);if(e||(e=rp(t)??"unknown_file"),!s.type){const i=(r=n[0])==null?void 0:r.type;typeof i=="string"&&(s={...s,type:i})}return new Hi(n,e,s)}async function sp(t){var s;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Vi(t))e.push(await t.arrayBuffer());else if(ip(t))for await(const n of t)e.push(n);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(s=t==null?void 0:t.constructor)==null?void 0:s.name}; props: ${np(t)}`);return e}function np(t){return`[${Object.getOwnPropertyNames(t).map(s=>`"${s}"`).join(", ")}]`}function rp(t){var e;return Ui(t.name)||Ui(t.filename)||((e=Ui(t.path))==null?void 0:e.split(/[\\/]/).pop())}const Ui=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},ip=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Jl=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",os=async t=>{const e=await op(t.body);return Hl(e,t)},op=async t=>{const e=new Bl;return await Promise.all(Object.entries(t||{}).map(([s,n])=>zi(e,s,n))),e},zi=async(t,e,s)=>{if(s!==void 0){if(s==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")t.append(e,String(s));else if(tp(s)){const n=await Gl(s);t.append(e,n)}else if(Array.isArray(s))await Promise.all(s.map(n=>zi(t,e+"[]",n)));else if(typeof s=="object")await Promise.all(Object.entries(s).map(([n,r])=>zi(t,`${e}[${n}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${s} instead`)}};var as={},ap=function(t,e,s,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,s),s},lp=function(t,e,s,n){if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?n:s==="a"?n.call(t):n?n.value:e.get(t)},Un;async function Xl(t){const{response:e}=t;if(t.options.stream)return ls("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):st.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const s=e.headers.get("content-type");if((s==null?void 0:s.includes("application/json"))||(s==null?void 0:s.includes("application/vnd.api+json"))){const i=await e.json();return ls("response",e.status,e.url,e.headers,i),i}const r=await e.text();return ls("response",e.status,e.url,e.headers,r),r}class zn extends Promise{constructor(e,s=Xl){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=s}_thenUnwrap(e){return new zn(this.responsePromise,async s=>e(await this.parseResponse(s)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,s]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:s}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,s){return this.parse().then(e,s)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class cp{constructor({baseURL:e,maxRetries:s=2,timeout:n=6e5,httpAgent:r,fetch:i}){this.baseURL=e,this.maxRetries=Wi("maxRetries",s),this.timeout=Wi("timeout",n),this.httpAgent=r,this.fetch=i??Dl}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...gp(),...this.authHeaders(e)}}validateHeaders(e,s){}defaultIdempotencyKey(){return`stainless-node-retry-${bp()}`}get(e,s){return this.methodRequest("get",e,s)}post(e,s){return this.methodRequest("post",e,s)}patch(e,s){return this.methodRequest("patch",e,s)}put(e,s){return this.methodRequest("put",e,s)}delete(e,s){return this.methodRequest("delete",e,s)}methodRequest(e,s,n){return this.request(Promise.resolve(n).then(async r=>{const i=r&&Vi(r==null?void 0:r.body)?new DataView(await r.body.arrayBuffer()):(r==null?void 0:r.body)instanceof DataView?r.body:(r==null?void 0:r.body)instanceof ArrayBuffer?new DataView(r.body):r&&ArrayBuffer.isView(r==null?void 0:r.body)?new DataView(r.body.buffer):r==null?void 0:r.body;return{method:e,path:s,...r,body:i}}))}getAPIList(e,s,n){return this.requestAPIList(s,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e){var S;const{method:s,path:n,query:r,headers:i={}}=e,o=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:Jl(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,a=this.calculateContentLength(o),l=this.buildURL(n,r);"timeout"in e&&Wi("timeout",e.timeout);const u=e.timeout??this.timeout,c=e.httpAgent??this.httpAgent??Vl(l),h=u+1e3;typeof((S=c==null?void 0:c.options)==null?void 0:S.timeout)=="number"&&h>(c.options.timeout??0)&&(c.options.timeout=h),this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const p=this.buildHeaders({options:e,headers:i,contentLength:a});return{req:{method:s,...o&&{body:o},headers:p,...c&&{agent:c},signal:e.signal??null},url:l,timeout:u}}buildHeaders({options:e,headers:s,contentLength:n}){const r={};n&&(r["content-length"]=n);const i=this.defaultHeaders(e);return nc(r,i),nc(r,s),Jl(e.body)&&Ns!=="node"&&delete r["content-type"],this.validateHeaders(r,s),r}async prepareOptions(e){}async prepareRequest(e,{url:s,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(s=>[...s])):{...e}:{}}makeStatusError(e,s,n,r){return me.generate(e,s,n,r)}request(e,s=null){return new zn(this.makeRequest(e,s))}async makeRequest(e,s){var c,h;const n=await e;s==null&&(s=n.maxRetries??this.maxRetries),await this.prepareOptions(n);const{req:r,url:i,timeout:o}=this.buildRequest(n);if(await this.prepareRequest(r,{url:i,options:n}),ls("request",i,n,r.headers),(c=n.signal)!=null&&c.aborted)throw new Ke;const a=new AbortController,l=await this.fetchWithTimeout(i,r,o,a).catch(qi);if(l instanceof Error){if((h=n.signal)!=null&&h.aborted)throw new Ke;if(s)return this.retryRequest(n,s);throw l.name==="AbortError"?new Ki:new qn({cause:l})}const u=fp(l.headers);if(!l.ok){if(s&&this.shouldRetry(l)){const j=`retrying, ${s} attempts remaining`;return ls(`response (error; ${j})`,l.status,i,u),this.retryRequest(n,s,u)}const p=await l.text().catch(j=>qi(j).message),_=mp(p),S=_?void 0:p;throw ls(`response (error; ${s?"(error; no more retries left)":"(error; not retryable)"})`,l.status,i,u,S),this.makeStatusError(l.status,_,S,u)}return{response:l,options:n,controller:a}}requestAPIList(e,s){const n=this.makeRequest(s,null);return new up(this,n,e)}buildURL(e,s){const n=wp(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return tc(r)||(s={...r,...s}),typeof s=="object"&&s&&!Array.isArray(s)&&(n.search=this.stringifyQuery(s)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([s,n])=>typeof n<"u").map(([s,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(s)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(s)}=`;throw new z(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,s,n,r){const{signal:i,...o}=s||{};i&&i.addEventListener("abort",()=>r.abort());const a=setTimeout(()=>r.abort(),n);return this.getRequestClient().fetch.call(void 0,e,{signal:r.signal,...o}).finally(()=>{clearTimeout(a)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const s=e.headers.get("x-should-retry");return s==="true"?!0:s==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,s,n){let r;const i=n==null?void 0:n["retry-after-ms"];if(i){const a=parseFloat(i);Number.isNaN(a)||(r=a)}const o=n==null?void 0:n["retry-after"];if(o&&!r){const a=parseFloat(o);Number.isNaN(a)?r=Date.parse(o)-Date.now():r=a*1e3}if(!(r&&0<=r&&r<60*1e3)){const a=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(s,a)}return await Hs(r),this.makeRequest(e,s-1)}calculateDefaultRetryTimeoutMillis(e,s){const i=s-e,o=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return o*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${is}`}}class Zl{constructor(e,s,n,r){Un.set(this,void 0),ap(this,Un,e),this.options=r,this.response=s,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new z("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const s={...this.options};if("params"in e&&typeof s.query=="object")s.query={...s.query,...e.params};else if("url"in e){const n=[...Object.entries(s.query||{}),...e.url.searchParams.entries()];for(const[r,i]of n)e.url.searchParams.set(r,i);s.query=void 0,s.path=e.url.toString()}return await lp(this,Un,"f").requestAPIList(this.constructor,s)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Un=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const s of e.getPaginatedItems())yield s}}class up extends zn{constructor(e,s,n){super(s,async r=>new n(e,r.response,await Xl(r),r.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const s of e)yield s}}const fp=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,s){const n=s.toString();return e[n.toLowerCase()]||e[n]}}),hp={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Fe=t=>typeof t=="object"&&t!==null&&!tc(t)&&Object.keys(t).every(e=>sc(hp,e)),dp=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":is,"X-Stainless-OS":Yl(Deno.build.os),"X-Stainless-Arch":Ql(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":is,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":is,"X-Stainless-OS":Yl(process.platform),"X-Stainless-Arch":Ql(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=pp();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":is,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":is,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function pp(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:s}of t){const n=s.exec(navigator.userAgent);if(n){const r=n[1]||0,i=n[2]||0,o=n[3]||0;return{browser:e,version:`${r}.${i}.${o}`}}}return null}const Ql=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Yl=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ec;const gp=()=>ec??(ec=dp()),mp=t=>{try{return JSON.parse(t)}catch{return}},_p=new RegExp("^(?:[a-z]+:)?//","i"),wp=t=>_p.test(t),Hs=t=>new Promise(e=>setTimeout(e,t)),Wi=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new z(`${t} must be an integer`);if(e<0)throw new z(`${t} must be a positive integer`);return e},qi=t=>t instanceof Error?t:new Error(t),Wn=t=>{var e,s,n,r;if(typeof process<"u")return((e=as==null?void 0:as[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(r=(n=(s=Deno.env)==null?void 0:s.get)==null?void 0:n.call(s,t))==null?void 0:r.trim()};function tc(t){if(!t)return!0;for(const e in t)return!1;return!0}function sc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function nc(t,e){for(const s in e){if(!sc(e,s))continue;const n=s.toLowerCase();if(!n)continue;const r=e[s];r===null?delete t[n]:r!==void 0&&(t[n]=r)}}function ls(t,...e){typeof process<"u"&&(as==null?void 0:as.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${t}`,...e)}const bp=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),yp=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function rc(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class z extends Error{}class me extends z{constructor(e,s,n,r){super(`${me.makeMessage(e,s,n)}`),this.status=e,this.headers=r,this.request_id=r==null?void 0:r["x-request-id"];const i=s;this.error=i,this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,s,n){const r=s!=null&&s.message?typeof s.message=="string"?s.message:JSON.stringify(s.message):s?JSON.stringify(s):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,s,n,r){if(!e)return new qn({cause:qi(s)});const i=s==null?void 0:s.error;return e===400?new ic(e,i,n,r):e===401?new oc(e,i,n,r):e===403?new ac(e,i,n,r):e===404?new lc(e,i,n,r):e===409?new cc(e,i,n,r):e===422?new uc(e,i,n,r):e===429?new fc(e,i,n,r):e>=500?new hc(e,i,n,r):new me(e,i,n,r)}}class Ke extends me{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class qn extends me{constructor({message:e,cause:s}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,s&&(this.cause=s)}}class Ki extends qn{constructor({message:e}={}){super({message:e??"Request timed out."})}}class ic extends me{constructor(){super(...arguments),this.status=400}}class oc extends me{constructor(){super(...arguments),this.status=401}}class ac extends me{constructor(){super(...arguments),this.status=403}}class lc extends me{constructor(){super(...arguments),this.status=404}}class cc extends me{constructor(){super(...arguments),this.status=409}}class uc extends me{constructor(){super(...arguments),this.status=422}}class fc extends me{constructor(){super(...arguments),this.status=429}}class hc extends me{}class dc extends z{constructor(){super("Could not parse response content as the length limit was reached")}}class pc extends z{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Gi extends Zl{constructor(e,s,n,r){super(e,s,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Ge extends Zl{constructor(e,s,n,r){super(e,s,n,r),this.data=n.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const s=Object.fromEntries(e.url.searchParams);return Object.keys(s).length?s:null}nextPageInfo(){var n;const e=this.getPaginatedItems();if(!e.length)return null;const s=(n=e[e.length-1])==null?void 0:n.id;return s?{params:{after:s}}:null}}class Y{constructor(e){this._client=e}}let Kn=class extends Y{create(e,s){return this._client.post("/chat/completions",{body:e,...s,stream:e.stream??!1})}};Kn||(Kn={});let Gn=class extends Y{constructor(){super(...arguments),this.completions=new Kn(this._client)}};(function(t){t.Completions=Kn})(Gn||(Gn={}));class Jn extends Y{create(e,s){return this._client.post("/audio/speech",{body:e,...s,__binaryResponse:!0})}}Jn||(Jn={});class Xn extends Y{create(e,s){return this._client.post("/audio/transcriptions",os({body:e,...s}))}}Xn||(Xn={});class Zn extends Y{create(e,s){return this._client.post("/audio/translations",os({body:e,...s}))}}Zn||(Zn={});class Qn extends Y{constructor(){super(...arguments),this.transcriptions=new Xn(this._client),this.translations=new Zn(this._client),this.speech=new Jn(this._client)}}(function(t){t.Transcriptions=Xn,t.Translations=Zn,t.Speech=Jn})(Qn||(Qn={}));class Yn extends Y{create(e,s){return this._client.post("/batches",{body:e,...s})}retrieve(e,s){return this._client.get(`/batches/${e}`,s)}list(e={},s){return Fe(e)?this.list({},e):this._client.getAPIList("/batches",Ji,{query:e,...s})}cancel(e,s){return this._client.post(`/batches/${e}/cancel`,s)}}class Ji extends Ge{}(function(t){t.BatchesPage=Ji})(Yn||(Yn={}));class er extends Y{create(e,s){return this._client.post("/assistants",{body:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}retrieve(e,s){return this._client.get(`/assistants/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}update(e,s,n){return this._client.post(`/assistants/${e}`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},s){return Fe(e)?this.list({},e):this._client.getAPIList("/assistants",Xi,{query:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}del(e,s){return this._client.delete(`/assistants/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class Xi extends Ge{}(function(t){t.AssistantsPage=Xi})(er||(er={}));function gc(t){return typeof t.parse=="function"}const cs=t=>(t==null?void 0:t.role)==="assistant",mc=t=>(t==null?void 0:t.role)==="function",_c=t=>(t==null?void 0:t.role)==="tool";var Je=function(t,e,s,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(t,s):r?r.value=s:e.set(t,s),s},le=function(t,e,s,n){if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?n:s==="a"?n.call(t):n?n.value:e.get(t)},Zi,tr,sr,Vs,Us,nr,zs,gt,Ws,rr,ir,us,wc;class bc{constructor(){Zi.add(this),this.controller=new AbortController,tr.set(this,void 0),sr.set(this,()=>{}),Vs.set(this,()=>{}),Us.set(this,void 0),nr.set(this,()=>{}),zs.set(this,()=>{}),gt.set(this,{}),Ws.set(this,!1),rr.set(this,!1),ir.set(this,!1),us.set(this,!1),Je(this,tr,new Promise((e,s)=>{Je(this,sr,e,"f"),Je(this,Vs,s,"f")}),"f"),Je(this,Us,new Promise((e,s)=>{Je(this,nr,e,"f"),Je(this,zs,s,"f")}),"f"),le(this,tr,"f").catch(()=>{}),le(this,Us,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},le(this,Zi,"m",wc).bind(this))},0)}_connected(){this.ended||(le(this,sr,"f").call(this),this._emit("connect"))}get ended(){return le(this,Ws,"f")}get errored(){return le(this,rr,"f")}get aborted(){return le(this,ir,"f")}abort(){this.controller.abort()}on(e,s){return(le(this,gt,"f")[e]||(le(this,gt,"f")[e]=[])).push({listener:s}),this}off(e,s){const n=le(this,gt,"f")[e];if(!n)return this;const r=n.findIndex(i=>i.listener===s);return r>=0&&n.splice(r,1),this}once(e,s){return(le(this,gt,"f")[e]||(le(this,gt,"f")[e]=[])).push({listener:s,once:!0}),this}emitted(e){return new Promise((s,n)=>{Je(this,us,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,s)})}async done(){Je(this,us,!0,"f"),await le(this,Us,"f")}_emit(e,...s){if(le(this,Ws,"f"))return;e==="end"&&(Je(this,Ws,!0,"f"),le(this,nr,"f").call(this));const n=le(this,gt,"f")[e];if(n&&(le(this,gt,"f")[e]=n.filter(r=>!r.once),n.forEach(({listener:r})=>r(...s))),e==="abort"){const r=s[0];!le(this,us,"f")&&!(n!=null&&n.length)&&Promise.reject(r),le(this,Vs,"f").call(this,r),le(this,zs,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=s[0];!le(this,us,"f")&&!(n!=null&&n.length)&&Promise.reject(r),le(this,Vs,"f").call(this,r),le(this,zs,"f").call(this,r),this._emit("end")}}_emitFinal(){}}tr=new WeakMap,sr=new WeakMap,Vs=new WeakMap,Us=new WeakMap,nr=new WeakMap,zs=new WeakMap,gt=new WeakMap,Ws=new WeakMap,rr=new WeakMap,ir=new WeakMap,us=new WeakMap,Zi=new WeakSet,wc=function(e){if(Je(this,rr,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Ke),e instanceof Ke)return Je(this,ir,!0,"f"),this._emit("abort",e);if(e instanceof z)return this._emit("error",e);if(e instanceof Error){const s=new z(e.message);return s.cause=e,this._emit("error",s)}return this._emit("error",new z(String(e)))};function yc(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function qs(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function xp(t,e){return!e||!xc(e)?{...t,choices:t.choices.map(s=>({...s,message:{...s.message,parsed:null,tool_calls:s.message.tool_calls??[]}}))}:Qi(t,e)}function Qi(t,e){const s=t.choices.map(n=>{var r;if(n.finish_reason==="length")throw new dc;if(n.finish_reason==="content_filter")throw new pc;return{...n,message:{...n.message,tool_calls:((r=n.message.tool_calls)==null?void 0:r.map(i=>Cp(e,i)))??[],parsed:n.message.content&&!n.message.refusal?vp(e,n.message.content):null}}});return{...t,choices:s}}function vp(t,e){var s,n;return((s=t.response_format)==null?void 0:s.type)!=="json_schema"?null:((n=t.response_format)==null?void 0:n.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function Cp(t,e){var n;const s=(n=t.tools)==null?void 0:n.find(r=>{var i;return((i=r.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:qs(s)?s.$parseRaw(e.function.arguments):s!=null&&s.function.strict?JSON.parse(e.function.arguments):null}}}function kp(t,e){var n;if(!t)return!1;const s=(n=t.tools)==null?void 0:n.find(r=>{var i;return((i=r.function)==null?void 0:i.name)===e.function.name});return qs(s)||(s==null?void 0:s.function.strict)||!1}function xc(t){var e;return yc(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(s=>qs(s)||s.type==="function"&&s.function.strict===!0))??!1}function Sp(t){for(const e of t??[]){if(e.type!=="function")throw new z(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new z(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Pe=function(t,e,s,n){if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?n:s==="a"?n.call(t):n?n.value:e.get(t)},ve,Yi,or,eo,to,so,vc,no;const Cc=10;class kc extends bc{constructor(){super(...arguments),ve.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);const s=(n=e.choices[0])==null?void 0:n.message;return s&&this._addMessage(s),e}_addMessage(e,s=!0){if("content"in e||(e.content=null),this.messages.push(e),s){if(this._emit("message",e),(mc(e)||_c(e))&&e.content)this._emit("functionCallResult",e.content);else if(cs(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(cs(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionCall",n.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new z("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Pe(this,ve,"m",Yi).call(this)}async finalMessage(){return await this.done(),Pe(this,ve,"m",or).call(this)}async finalFunctionCall(){return await this.done(),Pe(this,ve,"m",eo).call(this)}async finalFunctionCallResult(){return await this.done(),Pe(this,ve,"m",to).call(this)}async totalUsage(){return await this.done(),Pe(this,ve,"m",so).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const s=Pe(this,ve,"m",or).call(this);s&&this._emit("finalMessage",s);const n=Pe(this,ve,"m",Yi).call(this);n&&this._emit("finalContent",n);const r=Pe(this,ve,"m",eo).call(this);r&&this._emit("finalFunctionCall",r);const i=Pe(this,ve,"m",to).call(this);i!=null&&this._emit("finalFunctionCallResult",i),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",Pe(this,ve,"m",so).call(this))}async _createChatCompletion(e,s,n){const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Pe(this,ve,"m",vc).call(this,s);const i=await e.chat.completions.create({...s,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Qi(i,s))}async _runChatCompletion(e,s,n){for(const r of s.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,s,n)}async _runFunctions(e,s,n){var p;const r="function",{function_call:i="auto",stream:o,...a}=s,l=typeof i!="string"&&(i==null?void 0:i.name),{maxChatCompletions:u=Cc}=n||{},c={};for(const _ of s.functions)c[_.name||_.function.name]=_;const h=s.functions.map(_=>({name:_.name||_.function.name,parameters:_.parameters,description:_.description}));for(const _ of s.messages)this._addMessage(_,!1);for(let _=0;_<u;++_){const y=(p=(await this._createChatCompletion(e,{...a,function_call:i,functions:h,messages:[...this.messages]},n)).choices[0])==null?void 0:p.message;if(!y)throw new z("missing message in ChatCompletion response");if(!y.function_call)return;const{name:k,arguments:j}=y.function_call,E=c[k];if(E){if(l&&l!==k){const N=`Invalid function_call: ${JSON.stringify(k)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,name:k,content:N});continue}}else{const N=`Invalid function_call: ${JSON.stringify(k)}. Available options are: ${h.map(D=>JSON.stringify(D.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:k,content:N});continue}let w;try{w=gc(E)?await E.parse(j):j}catch(N){this._addMessage({role:r,name:k,content:N instanceof Error?N.message:String(N)});continue}const g=await E.function(w,this),R=Pe(this,ve,"m",no).call(this,g);if(this._addMessage({role:r,name:k,content:R}),l)return}}async _runTools(e,s,n){var _,S,y;const r="tool",{tool_choice:i="auto",stream:o,...a}=s,l=typeof i!="string"&&((_=i==null?void 0:i.function)==null?void 0:_.name),{maxChatCompletions:u=Cc}=n||{},c=s.tools.map(k=>{if(qs(k)){if(!k.$callback)throw new z("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:k.$callback,name:k.function.name,description:k.function.description||"",parameters:k.function.parameters,parse:k.$parseRaw,strict:!0}}}return k}),h={};for(const k of c)k.type==="function"&&(h[k.function.name||k.function.function.name]=k.function);const p="tools"in s?c.map(k=>k.type==="function"?{type:"function",function:{name:k.function.name||k.function.function.name,parameters:k.function.parameters,description:k.function.description,strict:k.function.strict}}:k):void 0;for(const k of s.messages)this._addMessage(k,!1);for(let k=0;k<u;++k){const E=(S=(await this._createChatCompletion(e,{...a,tool_choice:i,tools:p,messages:[...this.messages]},n)).choices[0])==null?void 0:S.message;if(!E)throw new z("missing message in ChatCompletion response");if(!((y=E.tool_calls)!=null&&y.length))return;for(const w of E.tool_calls){if(w.type!=="function")continue;const g=w.id,{name:R,arguments:N}=w.function,D=h[R];if(D){if(l&&l!==R){const W=`Invalid tool_call: ${JSON.stringify(R)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,tool_call_id:g,content:W});continue}}else{const W=`Invalid tool_call: ${JSON.stringify(R)}. Available options are: ${Object.keys(h).map($e=>JSON.stringify($e)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:g,content:W});continue}let B;try{B=gc(D)?await D.parse(N):N}catch(W){const $e=W instanceof Error?W.message:String(W);this._addMessage({role:r,tool_call_id:g,content:$e});continue}const F=await D.function(B,this),X=Pe(this,ve,"m",no).call(this,F);if(this._addMessage({role:r,tool_call_id:g,content:X}),l)return}}}}ve=new WeakSet,Yi=function(){return Pe(this,ve,"m",or).call(this).content??null},or=function(){let e=this.messages.length;for(;e-- >0;){const s=this.messages[e];if(cs(s)){const{function_call:n,...r}=s,i={...r,content:s.content??null,refusal:s.refusal??null};return n&&(i.function_call=n),i}}throw new z("stream ended without producing a ChatCompletionMessage with role=assistant")},eo=function(){var e,s;for(let n=this.messages.length-1;n>=0;n--){const r=this.messages[n];if(cs(r)&&(r!=null&&r.function_call))return r.function_call;if(cs(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(s=r.tool_calls.at(-1))==null?void 0:s.function}},to=function(){for(let e=this.messages.length-1;e>=0;e--){const s=this.messages[e];if(mc(s)&&s.content!=null||_c(s)&&s.content!=null&&typeof s.content=="string"&&this.messages.some(n=>{var r;return n.role==="assistant"&&((r=n.tool_calls)==null?void 0:r.some(i=>i.type==="function"&&i.id===s.tool_call_id))}))return s.content}},so=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:s}of this._chatCompletions)s&&(e.completion_tokens+=s.completion_tokens,e.prompt_tokens+=s.prompt_tokens,e.total_tokens+=s.total_tokens);return e},vc=function(e){if(e.n!=null&&e.n>1)throw new z("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},no=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Ks extends kc{static runFunctions(e,s,n){const r=new Ks,i={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,s,i)),r}static runTools(e,s,n){const r=new Ks,i={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,s,i)),r}_addMessage(e){super._addMessage(e),cs(e)&&e.content&&this._emit("content",e.content)}}const Ep=t=>{let e=0,s=[];for(;e<t.length;){let n=t[e];if(n==="\\"){e++;continue}if(n==="{"){s.push({type:"brace",value:"{"}),e++;continue}if(n==="}"){s.push({type:"brace",value:"}"}),e++;continue}if(n==="["){s.push({type:"paren",value:"["}),e++;continue}if(n==="]"){s.push({type:"paren",value:"]"}),e++;continue}if(n===":"){s.push({type:"separator",value:":"}),e++;continue}if(n===","){s.push({type:"delimiter",value:","}),e++;continue}if(n==='"'){let a="",l=!1;for(n=t[++e];n!=='"';){if(e===t.length){l=!0;break}if(n==="\\"){if(e++,e===t.length){l=!0;break}a+=n+t[e],n=t[++e]}else a+=n,n=t[++e]}n=t[++e],l||s.push({type:"string",value:a});continue}if(n&&/\s/.test(n)){e++;continue}let i=/[0-9]/;if(n&&i.test(n)||n==="-"||n==="."){let a="";for(n==="-"&&(a+=n,n=t[++e]);n&&i.test(n)||n===".";)a+=n,n=t[++e];s.push({type:"number",value:a});continue}let o=/[a-z]/i;if(n&&o.test(n)){let a="";for(;n&&o.test(n)&&e!==t.length;)a+=n,n=t[++e];if(a=="true"||a=="false"||a==="null")s.push({type:"name",value:a});else{e++;continue}continue}e++}return s},fs=t=>{if(t.length===0)return t;let e=t[t.length-1];switch(e.type){case"separator":return t=t.slice(0,t.length-1),fs(t);case"number":let s=e.value[e.value.length-1];if(s==="."||s==="-")return t=t.slice(0,t.length-1),fs(t);case"string":let n=t[t.length-2];if((n==null?void 0:n.type)==="delimiter")return t=t.slice(0,t.length-1),fs(t);if((n==null?void 0:n.type)==="brace"&&n.value==="{")return t=t.slice(0,t.length-1),fs(t);break;case"delimiter":return t=t.slice(0,t.length-1),fs(t)}return t},Ap=t=>{let e=[];return t.map(s=>{s.type==="brace"&&(s.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),s.type==="paren"&&(s.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(s=>{s==="}"?t.push({type:"brace",value:"}"}):s==="]"&&t.push({type:"paren",value:"]"})}),t},Rp=t=>{let e="";return t.map(s=>{switch(s.type){case"string":e+='"'+s.value+'"';break;default:e+=s.value;break}}),e},Sc=t=>JSON.parse(Rp(Ap(fs(Ep(t)))));var hs=function(t,e,s,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(t,s):r?r.value=s:e.set(t,s),s},se=function(t,e,s,n){if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?n:s==="a"?n.call(t):n?n.value:e.get(t)},de,mt,ds,Et,ro,ar,io,oo,ao,lr,lo,Ec;class Gs extends kc{constructor(e){super(),de.add(this),mt.set(this,void 0),ds.set(this,void 0),Et.set(this,void 0),hs(this,mt,e,"f"),hs(this,ds,[],"f")}get currentChatCompletionSnapshot(){return se(this,Et,"f")}static fromReadableStream(e){const s=new Gs(null);return s._run(()=>s._fromReadableStream(e)),s}static createChatCompletion(e,s,n){const r=new Gs(s);return r._run(()=>r._runChatCompletion(e,{...s,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,s,n){var o;super._createChatCompletion;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),se(this,de,"m",ro).call(this);const i=await e.chat.completions.create({...s,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const a of i)se(this,de,"m",io).call(this,a);if((o=i.controller.signal)!=null&&o.aborted)throw new Ke;return this._addChatCompletion(se(this,de,"m",lr).call(this))}async _fromReadableStream(e,s){var o;const n=s==null?void 0:s.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),se(this,de,"m",ro).call(this),this._connected();const r=st.fromReadableStream(e,this.controller);let i;for await(const a of r)i&&i!==a.id&&this._addChatCompletion(se(this,de,"m",lr).call(this)),se(this,de,"m",io).call(this,a),i=a.id;if((o=r.controller.signal)!=null&&o.aborted)throw new Ke;return this._addChatCompletion(se(this,de,"m",lr).call(this))}[(mt=new WeakMap,ds=new WeakMap,Et=new WeakMap,de=new WeakSet,ro=function(){this.ended||hs(this,Et,void 0,"f")},ar=function(s){let n=se(this,ds,"f")[s.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},se(this,ds,"f")[s.index]=n,n)},io=function(s){var r,i,o,a,l,u,c,h,p,_,S,y,k,j,E;if(this.ended)return;const n=se(this,de,"m",Ec).call(this,s);this._emit("chunk",s,n);for(const w of s.choices){const g=n.choices[w.index];w.delta.content!=null&&((r=g.message)==null?void 0:r.role)==="assistant"&&((i=g.message)!=null&&i.content)&&(this._emit("content",w.delta.content,g.message.content),this._emit("content.delta",{delta:w.delta.content,snapshot:g.message.content,parsed:g.message.parsed})),w.delta.refusal!=null&&((o=g.message)==null?void 0:o.role)==="assistant"&&((a=g.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:w.delta.refusal,snapshot:g.message.refusal}),((l=w.logprobs)==null?void 0:l.content)!=null&&((u=g.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(c=w.logprobs)==null?void 0:c.content,snapshot:((h=g.logprobs)==null?void 0:h.content)??[]}),((p=w.logprobs)==null?void 0:p.refusal)!=null&&((_=g.message)==null?void 0:_.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(S=w.logprobs)==null?void 0:S.refusal,snapshot:((y=g.logprobs)==null?void 0:y.refusal)??[]});const R=se(this,de,"m",ar).call(this,g);g.finish_reason&&(se(this,de,"m",ao).call(this,g),R.current_tool_call_index!=null&&se(this,de,"m",oo).call(this,g,R.current_tool_call_index));for(const N of w.delta.tool_calls??[])R.current_tool_call_index!==N.index&&(se(this,de,"m",ao).call(this,g),R.current_tool_call_index!=null&&se(this,de,"m",oo).call(this,g,R.current_tool_call_index)),R.current_tool_call_index=N.index;for(const N of w.delta.tool_calls??[]){const D=(k=g.message.tool_calls)==null?void 0:k[N.index];D!=null&&D.type&&((D==null?void 0:D.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(j=D.function)==null?void 0:j.name,index:N.index,arguments:D.function.arguments,parsed_arguments:D.function.parsed_arguments,arguments_delta:((E=N.function)==null?void 0:E.arguments)??""}):(D==null||D.type,void 0))}}},oo=function(s,n){var o,a,l;if(se(this,de,"m",ar).call(this,s).done_tool_calls.has(n))return;const i=(o=s.message.tool_calls)==null?void 0:o[n];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const u=(l=(a=se(this,mt,"f"))==null?void 0:a.tools)==null?void 0:l.find(c=>c.type==="function"&&c.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:n,arguments:i.function.arguments,parsed_arguments:qs(u)?u.$parseRaw(i.function.arguments):u!=null&&u.function.strict?JSON.parse(i.function.arguments):null})}else i.type},ao=function(s){var r,i;const n=se(this,de,"m",ar).call(this,s);if(s.message.content&&!n.content_done){n.content_done=!0;const o=se(this,de,"m",lo).call(this);this._emit("content.done",{content:s.message.content,parsed:o?o.$parseRaw(s.message.content):null})}s.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:s.message.refusal})),(r=s.logprobs)!=null&&r.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:s.logprobs.content})),(i=s.logprobs)!=null&&i.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:s.logprobs.refusal}))},lr=function(){if(this.ended)throw new z("stream has ended, this shouldn't happen");const s=se(this,Et,"f");if(!s)throw new z("request ended without sending any chunks");return hs(this,Et,void 0,"f"),hs(this,ds,[],"f"),Pp(s,se(this,mt,"f"))},lo=function(){var n;const s=(n=se(this,mt,"f"))==null?void 0:n.response_format;return yc(s)?s:null},Ec=function(s){var n,r,i,o;let a=se(this,Et,"f");const{choices:l,...u}=s;a?Object.assign(a,u):a=hs(this,Et,{...u,choices:[]},"f");for(const{delta:c,finish_reason:h,index:p,logprobs:_=null,...S}of s.choices){let y=a.choices[p];if(y||(y=a.choices[p]={finish_reason:h,index:p,message:{},logprobs:_,...S}),_)if(!y.logprobs)y.logprobs=Object.assign({},_);else{const{content:N,refusal:D,...B}=_;Object.assign(y.logprobs,B),N&&((n=y.logprobs).content??(n.content=[]),y.logprobs.content.push(...N)),D&&((r=y.logprobs).refusal??(r.refusal=[]),y.logprobs.refusal.push(...D))}if(h&&(y.finish_reason=h,se(this,mt,"f")&&xc(se(this,mt,"f")))){if(h==="length")throw new dc;if(h==="content_filter")throw new pc}if(Object.assign(y,S),!c)continue;const{content:k,refusal:j,function_call:E,role:w,tool_calls:g,...R}=c;if(Object.assign(y.message,R),j&&(y.message.refusal=(y.message.refusal||"")+j),w&&(y.message.role=w),E&&(y.message.function_call?(E.name&&(y.message.function_call.name=E.name),E.arguments&&((i=y.message.function_call).arguments??(i.arguments=""),y.message.function_call.arguments+=E.arguments)):y.message.function_call=E),k&&(y.message.content=(y.message.content||"")+k,!y.message.refusal&&se(this,de,"m",lo).call(this)&&(y.message.parsed=Sc(y.message.content))),g){y.message.tool_calls||(y.message.tool_calls=[]);for(const{index:N,id:D,type:B,function:F,...X}of g){const W=(o=y.message.tool_calls)[N]??(o[N]={});Object.assign(W,X),D&&(W.id=D),B&&(W.type=B),F&&(W.function??(W.function={name:F.name??"",arguments:""})),F!=null&&F.name&&(W.function.name=F.name),F!=null&&F.arguments&&(W.function.arguments+=F.arguments,kp(se(this,mt,"f"),W)&&(W.function.parsed_arguments=Sc(W.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],s=[];let n=!1;return this.on("chunk",r=>{const i=s.shift();i?i.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of s)r.resolve(void 0);s.length=0}),this.on("abort",r=>{n=!0;for(const i of s)i.reject(r);s.length=0}),this.on("error",r=>{n=!0;for(const i of s)i.reject(r);s.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,o)=>s.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new st(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Pp(t,e){const{id:s,choices:n,created:r,model:i,system_fingerprint:o,...a}=t,l={...a,id:s,choices:n.map(({message:u,finish_reason:c,index:h,logprobs:p,..._})=>{if(!c)throw new z(`missing finish_reason for choice ${h}`);const{content:S=null,function_call:y,tool_calls:k,...j}=u,E=u.role;if(!E)throw new z(`missing role for choice ${h}`);if(y){const{arguments:w,name:g}=y;if(w==null)throw new z(`missing function_call.arguments for choice ${h}`);if(!g)throw new z(`missing function_call.name for choice ${h}`);return{..._,message:{content:S,function_call:{arguments:w,name:g},role:E,refusal:u.refusal??null},finish_reason:c,index:h,logprobs:p}}return k?{..._,index:h,finish_reason:c,logprobs:p,message:{...j,role:E,content:S,refusal:u.refusal??null,tool_calls:k.map((w,g)=>{const{function:R,type:N,id:D,...B}=w,{arguments:F,name:X,...W}=R||{};if(D==null)throw new z(`missing choices[${h}].tool_calls[${g}].id
${cr(t)}`);if(N==null)throw new z(`missing choices[${h}].tool_calls[${g}].type
${cr(t)}`);if(X==null)throw new z(`missing choices[${h}].tool_calls[${g}].function.name
${cr(t)}`);if(F==null)throw new z(`missing choices[${h}].tool_calls[${g}].function.arguments
${cr(t)}`);return{...B,id:D,type:N,function:{...W,name:X,arguments:F}}})}}:{..._,message:{...j,content:S,role:E,refusal:u.refusal??null},finish_reason:c,index:h,logprobs:p}}),created:r,model:i,object:"chat.completion",...o?{system_fingerprint:o}:{}};return xp(l,e)}function cr(t){return JSON.stringify(t)}function b0(t){}class ps extends Gs{static fromReadableStream(e){const s=new ps(null);return s._run(()=>s._fromReadableStream(e)),s}static runFunctions(e,s,n){const r=new ps(null),i={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,s,i)),r}static runTools(e,s,n){const r=new ps(s),i={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,s,i)),r}}let Ac=class extends Y{async parse(e,s){Sp(e.tools);const n=await this._client.chat.completions.create(e,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}});return Qi(n,e)}runFunctions(e,s){return e.stream?ps.runFunctions(this._client,e,s):Ks.runFunctions(this._client,e,s)}runTools(e,s){return e.stream?ps.runTools(this._client,e,s):Ks.runTools(this._client,e,s)}stream(e,s){return Gs.createChatCompletion(this._client,e,s)}};class ur extends Y{constructor(){super(...arguments),this.completions=new Ac(this._client)}}(function(t){t.Completions=Ac})(ur||(ur={}));var O=function(t,e,s,n){if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?n:s==="a"?n.call(t):n?n.value:e.get(t)},Le=function(t,e,s,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(t,s):r?r.value=s:e.set(t,s),s},_e,co,nt,fr,Xe,Ht,gs,Vt,hr,je,dr,pr,Js,Xs,Zs,Rc,Pc,$c,Mc,Tc,Ic,Oc;class Ze extends bc{constructor(){super(...arguments),_e.add(this),co.set(this,[]),nt.set(this,{}),fr.set(this,{}),Xe.set(this,void 0),Ht.set(this,void 0),gs.set(this,void 0),Vt.set(this,void 0),hr.set(this,void 0),je.set(this,void 0),dr.set(this,void 0),pr.set(this,void 0),Js.set(this,void 0)}[(co=new WeakMap,nt=new WeakMap,fr=new WeakMap,Xe=new WeakMap,Ht=new WeakMap,gs=new WeakMap,Vt=new WeakMap,hr=new WeakMap,je=new WeakMap,dr=new WeakMap,pr=new WeakMap,Js=new WeakMap,_e=new WeakSet,Symbol.asyncIterator)](){const e=[],s=[];let n=!1;return this.on("event",r=>{const i=s.shift();i?i.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of s)r.resolve(void 0);s.length=0}),this.on("abort",r=>{n=!0;for(const i of s)i.reject(r);s.length=0}),this.on("error",r=>{n=!0;for(const i of s)i.reject(r);s.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,o)=>s.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const s=new Ze;return s._run(()=>s._fromReadableStream(e)),s}async _fromReadableStream(e,s){var i;const n=s==null?void 0:s.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=st.fromReadableStream(e,this.controller);for await(const o of r)O(this,_e,"m",Xs).call(this,o);if((i=r.controller.signal)!=null&&i.aborted)throw new Ke;return this._addRun(O(this,_e,"m",Zs).call(this))}toReadableStream(){return new st(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,s,n,r,i){const o=new Ze;return o._run(()=>o._runToolAssistantStream(e,s,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,s,n,r,i){var u;const o=i==null?void 0:i.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},l=await e.submitToolOutputs(s,n,a,{...i,signal:this.controller.signal});this._connected();for await(const c of l)O(this,_e,"m",Xs).call(this,c);if((u=l.controller.signal)!=null&&u.aborted)throw new Ke;return this._addRun(O(this,_e,"m",Zs).call(this))}static createThreadAssistantStream(e,s,n){const r=new Ze;return r._run(()=>r._threadAssistantStream(e,s,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,s,n,r){const i=new Ze;return i._run(()=>i._runAssistantStream(e,s,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return O(this,dr,"f")}currentRun(){return O(this,pr,"f")}currentMessageSnapshot(){return O(this,Xe,"f")}currentRunStepSnapshot(){return O(this,Js,"f")}async finalRunSteps(){return await this.done(),Object.values(O(this,nt,"f"))}async finalMessages(){return await this.done(),Object.values(O(this,fr,"f"))}async finalRun(){if(await this.done(),!O(this,Ht,"f"))throw Error("Final run was not received.");return O(this,Ht,"f")}async _createThreadAssistantStream(e,s,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const i={...s,stream:!0},o=await e.createAndRun(i,{...n,signal:this.controller.signal});this._connected();for await(const l of o)O(this,_e,"m",Xs).call(this,l);if((a=o.controller.signal)!=null&&a.aborted)throw new Ke;return this._addRun(O(this,_e,"m",Zs).call(this))}async _createAssistantStream(e,s,n,r){var l;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},a=await e.create(s,o,{...r,signal:this.controller.signal});this._connected();for await(const u of a)O(this,_e,"m",Xs).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new Ke;return this._addRun(O(this,_e,"m",Zs).call(this))}static accumulateDelta(e,s){for(const[n,r]of Object.entries(s)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let i=e[n];if(i==null){e[n]=r;continue}if(n==="index"||n==="type"){e[n]=r;continue}if(typeof i=="string"&&typeof r=="string")i+=r;else if(typeof i=="number"&&typeof r=="number")i+=r;else if(rc(i)&&rc(r))i=this.accumulateDelta(i,r);else if(Array.isArray(i)&&Array.isArray(r)){if(i.every(o=>typeof o=="string"||typeof o=="number")){i.push(...r);continue}}else throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${i}`);e[n]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,s,n){return await this._createThreadAssistantStream(s,e,n)}async _runAssistantStream(e,s,n,r){return await this._createAssistantStream(s,e,n,r)}async _runToolAssistantStream(e,s,n,r,i){return await this._createToolAssistantStream(n,e,s,r,i)}}Xs=function(e){if(!this.ended)switch(Le(this,dr,e,"f"),O(this,_e,"m",$c).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":O(this,_e,"m",Oc).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":O(this,_e,"m",Pc).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":O(this,_e,"m",Rc).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Zs=function(){if(this.ended)throw new z("stream has ended, this shouldn't happen");if(!O(this,Ht,"f"))throw Error("Final run has not been received");return O(this,Ht,"f")},Rc=function(e){const[s,n]=O(this,_e,"m",Tc).call(this,e,O(this,Xe,"f"));Le(this,Xe,s,"f"),O(this,fr,"f")[s.id]=s;for(const r of n){const i=s.content[r.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,s),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let i=r.text,o=s.content[r.index];if(o&&o.type=="text")this._emit("textDelta",i,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=O(this,gs,"f")){if(O(this,Vt,"f"))switch(O(this,Vt,"f").type){case"text":this._emit("textDone",O(this,Vt,"f").text,O(this,Xe,"f"));break;case"image_file":this._emit("imageFileDone",O(this,Vt,"f").image_file,O(this,Xe,"f"));break}Le(this,gs,r.index,"f")}Le(this,Vt,s.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(O(this,gs,"f")!==void 0){const r=e.data.content[O(this,gs,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,O(this,Xe,"f"));break;case"text":this._emit("textDone",r.text,O(this,Xe,"f"));break}}O(this,Xe,"f")&&this._emit("messageDone",e.data),Le(this,Xe,void 0,"f")}},Pc=function(e){const s=O(this,_e,"m",Mc).call(this,e);switch(Le(this,Js,s,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&s.step_details.type=="tool_calls")for(const i of n.step_details.tool_calls)i.index==O(this,hr,"f")?this._emit("toolCallDelta",i,s.step_details.tool_calls[i.index]):(O(this,je,"f")&&this._emit("toolCallDone",O(this,je,"f")),Le(this,hr,i.index,"f"),Le(this,je,s.step_details.tool_calls[i.index],"f"),O(this,je,"f")&&this._emit("toolCallCreated",O(this,je,"f")));this._emit("runStepDelta",e.data.delta,s);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Le(this,Js,void 0,"f"),e.data.step_details.type=="tool_calls"&&O(this,je,"f")&&(this._emit("toolCallDone",O(this,je,"f")),Le(this,je,void 0,"f")),this._emit("runStepDone",e.data,s);break}},$c=function(e){O(this,co,"f").push(e),this._emit("event",e)},Mc=function(e){switch(e.event){case"thread.run.step.created":return O(this,nt,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let s=O(this,nt,"f")[e.data.id];if(!s)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=Ze.accumulateDelta(s,n.delta);O(this,nt,"f")[e.data.id]=r}return O(this,nt,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":O(this,nt,"f")[e.data.id]=e.data;break}if(O(this,nt,"f")[e.data.id])return O(this,nt,"f")[e.data.id];throw new Error("No snapshot available")},Tc=function(e,s){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!s)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const i of r.delta.content)if(i.index in s.content){let o=s.content[i.index];s.content[i.index]=O(this,_e,"m",Ic).call(this,i,o)}else s.content[i.index]=i,n.push(i);return[s,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(s)return[s,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Ic=function(e,s){return Ze.accumulateDelta(s,e)},Oc=function(e){switch(Le(this,pr,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Le(this,Ht,e.data,"f"),O(this,je,"f")&&(this._emit("toolCallDone",O(this,je,"f")),Le(this,je,void 0,"f"));break}};class gr extends Y{create(e,s,n){return this._client.post(`/threads/${e}/messages`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,s,n){return this._client.get(`/threads/${e}/messages/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,s,n,r){return this._client.post(`/threads/${e}/messages/${s}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,s={},n){return Fe(s)?this.list(e,{},s):this._client.getAPIList(`/threads/${e}/messages`,uo,{query:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,s,n){return this._client.delete(`/threads/${e}/messages/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class uo extends Ge{}(function(t){t.MessagesPage=uo})(gr||(gr={}));class mr extends Y{retrieve(e,s,n,r){return this._client.get(`/threads/${e}/runs/${s}/steps/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,s,n={},r){return Fe(n)?this.list(e,s,{},n):this._client.getAPIList(`/threads/${e}/runs/${s}/steps`,fo,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class fo extends Ge{}(function(t){t.RunStepsPage=fo})(mr||(mr={}));class _r extends Y{constructor(){super(...arguments),this.steps=new mr(this._client)}create(e,s,n){return this._client.post(`/threads/${e}/runs`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:s.stream??!1})}retrieve(e,s,n){return this._client.get(`/threads/${e}/runs/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,s,n,r){return this._client.post(`/threads/${e}/runs/${s}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,s={},n){return Fe(s)?this.list(e,{},s):this._client.getAPIList(`/threads/${e}/runs`,ho,{query:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,s,n){return this._client.post(`/threads/${e}/runs/${s}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,s,n){const r=await this.create(e,s,n);return await this.poll(e,r.id,n)}createAndStream(e,s,n){return Ze.createAssistantStream(e,this._client.beta.threads.runs,s,n)}async poll(e,s,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:i,response:o}=await this.retrieve(e,s,{...n,headers:{...n==null?void 0:n.headers,...r}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(n!=null&&n.pollIntervalMs)a=n.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(a=u)}}await Hs(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,s,n){return Ze.createAssistantStream(e,this._client.beta.threads.runs,s,n)}submitToolOutputs(e,s,n,r){return this._client.post(`/threads/${e}/runs/${s}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,s,n,r){const i=await this.submitToolOutputs(e,s,n,r);return await this.poll(e,i.id,r)}submitToolOutputsStream(e,s,n,r){return Ze.createToolAssistantStream(e,s,this._client.beta.threads.runs,n,r)}}class ho extends Ge{}(function(t){t.RunsPage=ho,t.Steps=mr,t.RunStepsPage=fo})(_r||(_r={}));class wr extends Y{constructor(){super(...arguments),this.runs=new _r(this._client),this.messages=new gr(this._client)}create(e={},s){return Fe(e)?this.create({},e):this._client.post("/threads",{body:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}retrieve(e,s){return this._client.get(`/threads/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}update(e,s,n){return this._client.post(`/threads/${e}`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,s){return this._client.delete(`/threads/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}createAndRun(e,s){return this._client.post("/threads/runs",{body:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:e.stream??!1})}async createAndRunPoll(e,s){const n=await this.createAndRun(e,s);return await this.runs.poll(n.thread_id,n.id,s)}createAndRunStream(e,s){return Ze.createThreadAssistantStream(e,this._client.beta.threads,s)}}(function(t){t.Runs=_r,t.RunsPage=ho,t.Messages=gr,t.MessagesPage=uo})(wr||(wr={}));const $p=async t=>{const e=await Promise.allSettled(t),s=e.filter(r=>r.status==="rejected");if(s.length){for(const r of s)console.error(r.reason);throw new Error(`${s.length} promise(s) failed - see the above errors`)}const n=[];for(const r of e)r.status==="fulfilled"&&n.push(r.value);return n};let br=class extends Y{create(e,s,n){return this._client.post(`/vector_stores/${e}/files`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,s,n){return this._client.get(`/vector_stores/${e}/files/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e,s={},n){return Fe(s)?this.list(e,{},s):this._client.getAPIList(`/vector_stores/${e}/files`,yr,{query:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,s,n){return this._client.delete(`/vector_stores/${e}/files/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,s,n){const r=await this.create(e,s,n);return await this.poll(e,r.id,n)}async poll(e,s,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const i=await this.retrieve(e,s,{...n,headers:r}).withResponse(),o=i.data;switch(o.status){case"in_progress":let a=5e3;if(n!=null&&n.pollIntervalMs)a=n.pollIntervalMs;else{const l=i.response.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(a=u)}}await Hs(a);break;case"failed":case"completed":return o}}}async upload(e,s,n){const r=await this._client.files.create({file:s,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,s,n){const r=await this.upload(e,s,n);return await this.poll(e,r.id,n)}};class yr extends Ge{}(function(t){t.VectorStoreFilesPage=yr})(br||(br={}));class xr extends Y{create(e,s,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,s,n){return this._client.get(`/vector_stores/${e}/file_batches/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,s,n){return this._client.post(`/vector_stores/${e}/file_batches/${s}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,s,n){const r=await this.create(e,s);return await this.poll(e,r.id,n)}listFiles(e,s,n={},r){return Fe(n)?this.listFiles(e,s,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${s}/files`,yr,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async poll(e,s,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:i,response:o}=await this.retrieve(e,s,{...n,headers:r}).withResponse();switch(i.status){case"in_progress":let a=5e3;if(n!=null&&n.pollIntervalMs)a=n.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(a=u)}}await Hs(a);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:s,fileIds:n=[]},r){if(s==null||s.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=(r==null?void 0:r.maxConcurrency)??5,o=Math.min(i,s.length),a=this._client,l=s.values(),u=[...n];async function c(p){for(let _ of p){const S=await a.files.create({file:_,purpose:"assistants"},r);u.push(S.id)}}const h=Array(o).fill(l).map(c);return await $p(h),await this.createAndPoll(e,{file_ids:u})}}xr||(xr={});class vr extends Y{constructor(){super(...arguments),this.files=new br(this._client),this.fileBatches=new xr(this._client)}create(e,s){return this._client.post("/vector_stores",{body:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}retrieve(e,s){return this._client.get(`/vector_stores/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}update(e,s,n){return this._client.post(`/vector_stores/${e}`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},s){return Fe(e)?this.list({},e):this._client.getAPIList("/vector_stores",po,{query:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}del(e,s){return this._client.delete(`/vector_stores/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class po extends Ge{}(function(t){t.VectorStoresPage=po,t.Files=br,t.VectorStoreFilesPage=yr,t.FileBatches=xr})(vr||(vr={}));class Cr extends Y{constructor(){super(...arguments),this.vectorStores=new vr(this._client),this.chat=new ur(this._client),this.assistants=new er(this._client),this.threads=new wr(this._client)}}(function(t){t.VectorStores=vr,t.VectorStoresPage=po,t.Chat=ur,t.Assistants=er,t.AssistantsPage=Xi,t.Threads=wr})(Cr||(Cr={}));class kr extends Y{create(e,s){return this._client.post("/completions",{body:e,...s,stream:e.stream??!1})}}kr||(kr={});class Sr extends Y{create(e,s){return this._client.post("/embeddings",{body:e,...s})}}Sr||(Sr={});class Er extends Y{create(e,s){return this._client.post("/files",os({body:e,...s}))}retrieve(e,s){return this._client.get(`/files/${e}`,s)}list(e={},s){return Fe(e)?this.list({},e):this._client.getAPIList("/files",go,{query:e,...s})}del(e,s){return this._client.delete(`/files/${e}`,s)}content(e,s){return this._client.get(`/files/${e}/content`,{...s,__binaryResponse:!0})}retrieveContent(e,s){return this._client.get(`/files/${e}/content`,{...s,headers:{Accept:"application/json",...s==null?void 0:s.headers}})}async waitForProcessing(e,{pollInterval:s=5e3,maxWait:n=30*60*1e3}={}){const r=new Set(["processed","error","deleted"]),i=Date.now();let o=await this.retrieve(e);for(;!o.status||!r.has(o.status);)if(await Hs(s),o=await this.retrieve(e),Date.now()-i>n)throw new Ki({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return o}}class go extends Gi{}(function(t){t.FileObjectsPage=go})(Er||(Er={}));class Ar extends Y{list(e,s={},n){return Fe(s)?this.list(e,{},s):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,mo,{query:s,...n})}}class mo extends Ge{}(function(t){t.FineTuningJobCheckpointsPage=mo})(Ar||(Ar={}));class Rr extends Y{constructor(){super(...arguments),this.checkpoints=new Ar(this._client)}create(e,s){return this._client.post("/fine_tuning/jobs",{body:e,...s})}retrieve(e,s){return this._client.get(`/fine_tuning/jobs/${e}`,s)}list(e={},s){return Fe(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",_o,{query:e,...s})}cancel(e,s){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,s)}listEvents(e,s={},n){return Fe(s)?this.listEvents(e,{},s):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,wo,{query:s,...n})}}class _o extends Ge{}class wo extends Ge{}(function(t){t.FineTuningJobsPage=_o,t.FineTuningJobEventsPage=wo,t.Checkpoints=Ar,t.FineTuningJobCheckpointsPage=mo})(Rr||(Rr={}));class Pr extends Y{constructor(){super(...arguments),this.jobs=new Rr(this._client)}}(function(t){t.Jobs=Rr,t.FineTuningJobsPage=_o,t.FineTuningJobEventsPage=wo})(Pr||(Pr={}));class $r extends Y{createVariation(e,s){return this._client.post("/images/variations",os({body:e,...s}))}edit(e,s){return this._client.post("/images/edits",os({body:e,...s}))}generate(e,s){return this._client.post("/images/generations",{body:e,...s})}}$r||($r={});class Mr extends Y{retrieve(e,s){return this._client.get(`/models/${e}`,s)}list(e){return this._client.getAPIList("/models",bo,e)}del(e,s){return this._client.delete(`/models/${e}`,s)}}class bo extends Gi{}(function(t){t.ModelsPage=bo})(Mr||(Mr={}));class Tr extends Y{create(e,s){return this._client.post("/moderations",{body:e,...s})}}Tr||(Tr={});class Ir extends Y{create(e,s,n){return this._client.post(`/uploads/${e}/parts`,os({body:s,...n}))}}Ir||(Ir={});class Or extends Y{constructor(){super(...arguments),this.parts=new Ir(this._client)}create(e,s){return this._client.post("/uploads",{body:e,...s})}cancel(e,s){return this._client.post(`/uploads/${e}/cancel`,s)}complete(e,s,n){return this._client.post(`/uploads/${e}/complete`,{body:s,...n})}}(function(t){t.Parts=Ir})(Or||(Or={}));var Fc;class ue extends cp{constructor({baseURL:e=Wn("OPENAI_BASE_URL"),apiKey:s=Wn("OPENAI_API_KEY"),organization:n=Wn("OPENAI_ORG_ID")??null,project:r=Wn("OPENAI_PROJECT_ID")??null,...i}={}){if(s===void 0)throw new z("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:s,organization:n,project:r,...i,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&yp())throw new z(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new kr(this),this.chat=new Gn(this),this.embeddings=new Sr(this),this.files=new Er(this),this.images=new $r(this),this.audio=new Qn(this),this.moderations=new Tr(this),this.models=new Mr(this),this.fineTuning=new Pr(this),this.beta=new Cr(this),this.batches=new Yn(this),this.uploads=new Or(this),this._options=o,this.apiKey=s,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}Fc=ue,ue.OpenAI=Fc,ue.DEFAULT_TIMEOUT=6e5,ue.OpenAIError=z,ue.APIError=me,ue.APIConnectionError=qn,ue.APIConnectionTimeoutError=Ki,ue.APIUserAbortError=Ke,ue.NotFoundError=lc,ue.ConflictError=cc,ue.RateLimitError=fc,ue.BadRequestError=ic,ue.AuthenticationError=oc,ue.InternalServerError=hc,ue.PermissionDeniedError=ac,ue.UnprocessableEntityError=uc,ue.toFile=Gl,ue.fileFromPath=Ul,function(t){t.Page=Gi,t.CursorPage=Ge,t.Completions=kr,t.Chat=Gn,t.Embeddings=Sr,t.Files=Er,t.FileObjectsPage=go,t.Images=$r,t.Audio=Qn,t.Moderations=Tr,t.Models=Mr,t.ModelsPage=bo,t.FineTuning=Pr,t.Beta=Cr,t.Batches=Yn,t.BatchesPage=Ji,t.Uploads=Or}(ue||(ue={}));var Mp=!1;/*!
 * pinia v2.2.4
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let Lc;const Fr=t=>Lc=t,jc=Symbol();function yo(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Qs;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Qs||(Qs={}));function Tp(){const t=Bo(!0),e=t.run(()=>Ae({}));let s=[],n=[];const r=oi({install(i){Fr(r),r._a=i,i.provide(jc,r),i.config.globalProperties.$pinia=r,n.forEach(o=>s.push(o)),n=[]},use(i){return!this._a&&!Mp?n.push(i):s.push(i),this},_p:s,_a:null,_e:t,_s:new Map,state:e});return r}const Dc=()=>{};function Bc(t,e,s,n=Dc){t.push(e);const r=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!s&&No()&&Uu(r),r}function ms(t,...e){t.slice().forEach(s=>{s(...e)})}const Ip=t=>t(),Nc=Symbol(),xo=Symbol();function vo(t,e){t instanceof Map&&e instanceof Map?e.forEach((s,n)=>t.set(n,s)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const s in e){if(!e.hasOwnProperty(s))continue;const n=e[s],r=t[s];yo(r)&&yo(n)&&t.hasOwnProperty(s)&&!ce(n)&&!vt(n)?t[s]=vo(r,n):t[s]=n}return t}const Op=Symbol();function Fp(t){return!yo(t)||!t.hasOwnProperty(Op)}const{assign:At}=Object;function Lp(t){return!!(ce(t)&&t.effect)}function jp(t,e,s,n){const{state:r,actions:i,getters:o}=e,a=s.state.value[t];let l;function u(){a||(s.state.value[t]=r?r():{});const c=mf(s.state.value[t]);return At(c,i,Object.keys(o||{}).reduce((h,p)=>(h[p]=oi(Ii(()=>{Fr(s);const _=s._s.get(t);return o[p].call(_,_)})),h),{}))}return l=Hc(t,u,e,s,n,!0),l}function Hc(t,e,s={},n,r,i){let o;const a=At({actions:{}},s),l={deep:!0};let u,c,h=[],p=[],_;const S=n.state.value[t];!i&&!S&&(n.state.value[t]={}),Ae({});let y;function k(B){let F;u=c=!1,typeof B=="function"?(B(n.state.value[t]),F={type:Qs.patchFunction,storeId:t,events:_}):(vo(n.state.value[t],B),F={type:Qs.patchObject,payload:B,storeId:t,events:_});const X=y=Symbol();_i().then(()=>{y===X&&(u=!0)}),c=!0,ms(h,F,n.state.value[t])}const j=i?function(){const{state:F}=s,X=F?F():{};this.$patch(W=>{At(W,X)})}:Dc;function E(){o.stop(),h=[],p=[],n._s.delete(t)}const w=(B,F="")=>{if(Nc in B)return B[xo]=F,B;const X=function(){Fr(n);const W=Array.from(arguments),$e=[],Rt=[];function an(q){$e.push(q)}function Ur(q){Rt.push(q)}ms(p,{args:W,name:X[xo],store:R,after:an,onError:Ur});let fe;try{fe=B.apply(this&&this.$id===t?this:R,W)}catch(q){throw ms(Rt,q),q}return fe instanceof Promise?fe.then(q=>(ms($e,q),q)).catch(q=>(ms(Rt,q),Promise.reject(q))):(ms($e,fe),fe)};return X[Nc]=!0,X[xo]=F,X},g={_p:n,$id:t,$onAction:Bc.bind(null,p),$patch:k,$reset:j,$subscribe(B,F={}){const X=Bc(h,B,F.detached,()=>W()),W=o.run(()=>Mn(()=>n.state.value[t],$e=>{(F.flush==="sync"?c:u)&&B({storeId:t,type:Qs.direct,events:_},$e)},At({},l,F)));return X},$dispose:E},R=ks(g);n._s.set(t,R);const D=(n._a&&n._a.runWithContext||Ip)(()=>n._e.run(()=>(o=Bo()).run(()=>e({action:w}))));for(const B in D){const F=D[B];if(ce(F)&&!Lp(F)||vt(F))i||(S&&Fp(F)&&(ce(F)?F.value=S[B]:vo(F,S[B])),n.state.value[t][B]=F);else if(typeof F=="function"){const X=w(F,B);D[B]=X,a.actions[B]=F}}return At(R,D),At(G(R),D),Object.defineProperty(R,"$state",{get:()=>n.state.value[t],set:B=>{k(F=>{At(F,B)})}}),n._p.forEach(B=>{At(R,o.run(()=>B({store:R,app:n._a,pinia:n,options:a})))}),S&&i&&s.hydrate&&s.hydrate(R.$state,S),u=!0,c=!0,R}function Dp(t,e,s){let n,r;const i=typeof e=="function";n=t,r=i?s:e;function o(a,l){const u=gh();return a=a||(u?es(jc,null):null),a&&Fr(a),a=Lc,a._s.has(n)||(i?Hc(n,e,r,a):jp(n,r,a)),a._s.get(n)}return o.$id=n,o}function Bp(t){return t&&typeof t.then=="function"}Promise.resolve(!1),Promise.resolve(!0);var Ut=Promise.resolve();function Vc(t,e){return t||(t=0),new Promise(function(s){return setTimeout(function(){return s(e)},t)})}function Np(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function Co(){return Math.random().toString(36).substring(2)}var ko=0;function Ys(){var t=Date.now()*1e3;return t<=ko&&(t=ko+1),ko=t,t}var Hp=Ys,Vp="native";function Up(t){var e={time:Ys(),messagesCallback:null,bc:new BroadcastChannel(t),subFns:[]};return e.bc.onmessage=function(s){e.messagesCallback&&e.messagesCallback(s.data)},e}function zp(t){t.bc.close(),t.subFns=[]}function Wp(t,e){try{return t.bc.postMessage(e,!1),Ut}catch(s){return Promise.reject(s)}}function qp(t,e){t.messagesCallback=e}function Kp(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function Gp(){return 150}var Jp={create:Up,close:zp,onMessage:qp,postMessage:Wp,canBeUsed:Kp,type:Vp,averageResponseTime:Gp,microSeconds:Hp};class Uc{constructor(e){Z(this,"ttl");Z(this,"map",new Map);Z(this,"_to",!1);this.ttl=e}has(e){return this.map.has(e)}add(e){this.map.set(e,zc()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,Xp(this)},0))}clear(){this.map.clear()}}function Xp(t){const e=zc()-t.ttl,s=t.map[Symbol.iterator]();for(;;){const n=s.next().value;if(!n)return;const r=n[0];if(n[1]<e)t.map.delete(r);else return}}function zc(){return Date.now()}function So(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=JSON.parse(JSON.stringify(t));return typeof e.webWorkerSupport>"u"&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=1e3*45),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),t.idb&&typeof t.idb.onclose=="function"&&(e.idb.onclose=t.idb.onclose),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=1e3*60),t.methods&&(e.methods=t.methods),e.node||(e.node={}),e.node.ttl||(e.node.ttl=1e3*60*2),e.node.maxParallelWrites||(e.node.maxParallelWrites=2048),typeof e.node.useFastPath>"u"&&(e.node.useFastPath=!0),e}var Zp=Ys,Qp="pubkey.broadcast-channel-0-",_t="messages",Lr={durability:"relaxed"},Yp="idb";function Wc(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function Eo(t){t.commit&&t.commit()}function eg(t){var e=Wc(),s=Qp+t,n=e.open(s);return n.onupgradeneeded=function(r){var i=r.target.result;i.createObjectStore(_t,{keyPath:"id",autoIncrement:!0})},new Promise(function(r,i){n.onerror=function(o){return i(o)},n.onsuccess=function(){r(n.result)}})}function tg(t,e,s){var n=Date.now(),r={uuid:e,time:n,data:s},i=t.transaction([_t],"readwrite",Lr);return new Promise(function(o,a){i.oncomplete=function(){return o()},i.onerror=function(u){return a(u)};var l=i.objectStore(_t);l.add(r),Eo(i)})}function sg(t,e){var s=t.transaction(_t,"readonly",Lr),n=s.objectStore(_t),r=[],i=IDBKeyRange.bound(e+1,1/0);if(n.getAll){var o=n.getAll(i);return new Promise(function(l,u){o.onerror=function(c){return u(c)},o.onsuccess=function(c){l(c.target.result)}})}function a(){try{return i=IDBKeyRange.bound(e+1,1/0),n.openCursor(i)}catch{return n.openCursor()}}return new Promise(function(l,u){var c=a();c.onerror=function(h){return u(h)},c.onsuccess=function(h){var p=h.target.result;p?p.value.id<e+1?p.continue(e+1):(r.push(p.value),p.continue()):(Eo(s),l(r))}})}function ng(t,e){if(t.closed)return Promise.resolve([]);var s=t.db.transaction(_t,"readwrite",Lr),n=s.objectStore(_t);return Promise.all(e.map(function(r){var i=n.delete(r);return new Promise(function(o){i.onsuccess=function(){return o()}})}))}function rg(t,e){var s=Date.now()-e,n=t.transaction(_t,"readonly",Lr),r=n.objectStore(_t),i=[];return new Promise(function(o){r.openCursor().onsuccess=function(a){var l=a.target.result;if(l){var u=l.value;u.time<s?(i.push(u),l.continue()):(Eo(n),o(i))}else o(i)}})}function ig(t){return rg(t.db,t.options.idb.ttl).then(function(e){return ng(t,e.map(function(s){return s.id}))})}function og(t,e){return e=So(e),eg(t).then(function(s){var n={closed:!1,lastCursorId:0,channelName:t,options:e,uuid:Co(),eMIs:new Uc(e.idb.ttl*2),writeBlockPromise:Ut,messagesCallback:null,readQueuePromises:[],db:s};return s.onclose=function(){n.closed=!0,e.idb.onclose&&e.idb.onclose()},qc(n),n})}function qc(t){t.closed||Kc(t).then(function(){return Vc(t.options.idb.fallbackInterval)}).then(function(){return qc(t)})}function ag(t,e){return!(t.uuid===e.uuid||e.eMIs.has(t.id)||t.data.time<e.messagesCallbackTime)}function Kc(t){return t.closed||!t.messagesCallback?Ut:sg(t.db,t.lastCursorId).then(function(e){var s=e.filter(function(n){return!!n}).map(function(n){return n.id>t.lastCursorId&&(t.lastCursorId=n.id),n}).filter(function(n){return ag(n,t)}).sort(function(n,r){return n.time-r.time});return s.forEach(function(n){t.messagesCallback&&(t.eMIs.add(n.id),t.messagesCallback(n.data))}),Ut})}function lg(t){t.closed=!0,t.db.close()}function cg(t,e){return t.writeBlockPromise=t.writeBlockPromise.then(function(){return tg(t.db,t.uuid,e)}).then(function(){Np(0,10)===0&&ig(t)}),t.writeBlockPromise}function ug(t,e,s){t.messagesCallbackTime=s,t.messagesCallback=e,Kc(t)}function fg(){return!!Wc()}function hg(t){return t.idb.fallbackInterval*2}var dg={create:og,close:lg,onMessage:ug,postMessage:cg,canBeUsed:fg,type:Yp,averageResponseTime:hg,microSeconds:Zp},pg=Ys,gg="pubkey.broadcastChannel-",mg="localstorage";function Gc(){var t;if(typeof window>"u")return null;try{t=window.localStorage,t=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return t}function Jc(t){return gg+t}function _g(t,e){return new Promise(function(s){Vc().then(function(){var n=Jc(t.channelName),r={token:Co(),time:Date.now(),data:e,uuid:t.uuid},i=JSON.stringify(r);Gc().setItem(n,i);var o=document.createEvent("Event");o.initEvent("storage",!0,!0),o.key=n,o.newValue=i,window.dispatchEvent(o),s()})})}function wg(t,e){var s=Jc(t),n=function(i){i.key===s&&e(JSON.parse(i.newValue))};return window.addEventListener("storage",n),n}function bg(t){window.removeEventListener("storage",t)}function yg(t,e){if(e=So(e),!Xc())throw new Error("BroadcastChannel: localstorage cannot be used");var s=Co(),n=new Uc(e.localstorage.removeTimeout),r={channelName:t,uuid:s,eMIs:n};return r.listener=wg(t,function(i){r.messagesCallback&&i.uuid!==s&&(!i.token||n.has(i.token)||i.data.time&&i.data.time<r.messagesCallbackTime||(n.add(i.token),r.messagesCallback(i.data)))}),r}function xg(t){bg(t.listener)}function vg(t,e,s){t.messagesCallbackTime=s,t.messagesCallback=e}function Xc(){var t=Gc();if(!t)return!1;try{var e="__broadcastchannel_check";t.setItem(e,"works"),t.removeItem(e)}catch{return!1}return!0}function Cg(){var t=120,e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?t*2:t}var kg={create:yg,close:xg,onMessage:vg,postMessage:_g,canBeUsed:Xc,type:mg,averageResponseTime:Cg,microSeconds:pg},Zc=Ys,Sg="simulate",Ao=new Set;function Eg(t){var e={time:Zc(),name:t,messagesCallback:null};return Ao.add(e),e}function Ag(t){Ao.delete(t)}var Qc=5;function Rg(t,e){return new Promise(function(s){return setTimeout(function(){var n=Array.from(Ao);n.forEach(function(r){r.name===t.name&&r!==t&&r.messagesCallback&&r.time<e.time&&r.messagesCallback(e)}),s()},Qc)})}function Pg(t,e){t.messagesCallback=e}function $g(){return!0}function Mg(){return Qc}var Tg={create:Eg,close:Ag,onMessage:Pg,postMessage:Rg,canBeUsed:$g,type:Sg,averageResponseTime:Mg,microSeconds:Zc},Yc=[Jp,dg,kg];function Ig(t){var e=[].concat(t.methods,Yc).filter(Boolean);if(t.type){if(t.type==="simulate")return Tg;var s=e.find(function(r){return r.type===t.type});if(s)return s;throw new Error("method-type "+t.type+" not found")}t.webWorkerSupport||(e=e.filter(function(r){return r.type!=="idb"}));var n=e.find(function(r){return r.canBeUsed()});if(n)return n;throw new Error("No usable method found in "+JSON.stringify(Yc.map(function(r){return r.type})))}var eu=new Set,Og=0,Ro=function(e,s){this.id=Og++,eu.add(this),this.name=e,tu&&(s=tu),this.options=So(s),this.method=Ig(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,Fg(this)};Ro._pubkey=!0;var tu;Ro.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return su(this,"message",e)},postInternal:function(e){return su(this,"internal",e)},set onmessage(t){var e=this.method.microSeconds(),s={time:e,fn:t};iu(this,"message",this._onML),t&&typeof t=="function"?(this._onML=s,ru(this,"message",s)):this._onML=null},addEventListener:function(e,s){var n=this.method.microSeconds(),r={time:n,fn:s};ru(this,e,r)},removeEventListener:function(e,s){var n=this._addEL[e].find(function(r){return r.fn===s});iu(this,e,n)},close:function(){var e=this;if(!this.closed){eu.delete(this),this.closed=!0;var s=this._prepP?this._prepP:Ut;return this._onML=null,this._addEL.message=[],s.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(n){return n()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function su(t,e,s){var n=t.method.microSeconds(),r={time:n,type:e,data:s},i=t._prepP?t._prepP:Ut;return i.then(function(){var o=t.method.postMessage(t._state,r);return t._uMP.add(o),o.catch().then(function(){return t._uMP.delete(o)}),o})}function Fg(t){var e=t.method.create(t.name,t.options);Bp(e)?(t._prepP=e,e.then(function(s){t._state=s})):t._state=e}function nu(t){return t._addEL.message.length>0||t._addEL.internal.length>0}function ru(t,e,s){t._addEL[e].push(s),Lg(t)}function iu(t,e,s){t._addEL[e]=t._addEL[e].filter(function(n){return n!==s}),jg(t)}function Lg(t){if(!t._iL&&nu(t)){var e=function(r){t._addEL[r.type].forEach(function(i){r.time>=i.time&&i.fn(r.data)})},s=t.method.microSeconds();t._prepP?t._prepP.then(function(){t._iL=!0,t.method.onMessage(t._state,e,s)}):(t._iL=!0,t.method.onMessage(t._state,e,s))}}function jg(t){if(t._iL&&!nu(t)){t._iL=!1;var e=t.method.microSeconds();t.method.onMessage(t._state,null,e)}}function ou(t,e={serialize:JSON.stringify,deserialize:JSON.parse}){return e.deserialize(e.serialize(t))}function Dg(t,e){return Object.keys(e).includes(t)}function Bg({enable:t=!0,initialize:e=!0,type:s,serializer:n}){return({store:r,options:i})=>{var _,S,y;const o=((_=i==null?void 0:i.share)==null?void 0:_.enable)??t,a=((S=i==null?void 0:i.share)==null?void 0:S.omit)??[];if(!o)return;const l=new Ro(r.$id,{type:s});let u=0,c=!1;const h=Object.keys(r.$state).filter(k=>!a.includes(k)&&Dg(k,r.$state));l.onmessage=k=>{if(k===void 0){l.postMessage({timestamp:u,state:ou(r.$state,n)});return}k.timestamp<=u||(c=!0,u=Date.now(),r.$patch(j=>{h.forEach(E=>{j[E]=k.state[E]})}))},(((y=i==null?void 0:i.share)==null?void 0:y.initialize)??e)&&l.postMessage(void 0),r.$subscribe((k,j)=>{c||(u=Date.now(),l.postMessage({timestamp:u,state:ou(j,n)})),c=!1})}}const au=Symbol("client"),Ng=({client:t,systemPrompt:e})=>s=>{const n=Tp();n.use(Bg({enable:!0,initialize:!1,type:"localstorage"})),s.use(n).provide(au,{client:t,systemPrompt:e})};function Hg(){return es(au)}const lu=Dp("chatbox",{state:()=>({models:[],selectedModel:"",systemPrompt:"",userMessages:[],newMessage:"",maxTokens:5e3,chatHistory:JSON.parse(localStorage.getItem("chatHistory")||"[]").map(t=>({...t,timestamp:new Date(t.timestamp)})),currentChatId:localStorage.getItem("currentChatId")||""}),actions:{setSystemPrompt(t){this.systemPrompt=t},setModels(t){this.models=t},setSelectedModel(t){this.selectedModel=t},setUserMessages(t){this.userMessages=[...t],this.saveToStorage()},addMessage(t){if(this.userMessages.push(t),!this.currentChatId&&t.role==="user"){const e=crypto.randomUUID();this.currentChatId=e,this.chatHistory.unshift({id:e,title:t.content.slice(0,50)+(t.content.length>50?"...":""),timestamp:new Date,messages:[t]})}else if(this.currentChatId){const e=this.chatHistory.findIndex(s=>s.id===this.currentChatId);e!==-1&&(this.chatHistory[e]={...this.chatHistory[e],messages:[...this.userMessages],timestamp:new Date})}this.saveToStorage()},saveToStorage(){localStorage.setItem("chatHistory",JSON.stringify(this.chatHistory)),localStorage.setItem("currentChatId",this.currentChatId)},clearMessages(){this.userMessages=[],this.currentChatId="",this.saveToStorage()},loadChat(t){const e=this.chatHistory.find(s=>s.id===t);e&&(this.currentChatId=t,this.userMessages=[...e.messages],this.saveToStorage())},startNewChat(){this.clearMessages(),this.clearNewMessage()},clearNewMessage(){this.newMessage=""}},getters:{messages(){return this.systemPrompt?[{role:"system",content:this.systemPrompt},...this.userMessages]:this.userMessages}}});function Po(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let zt=Po();function cu(t){zt=t}const uu=/[&<>"']/,Vg=new RegExp(uu.source,"g"),fu=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Ug=new RegExp(fu.source,"g"),zg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},hu=t=>zg[t];function De(t,e){if(e){if(uu.test(t))return t.replace(Vg,hu)}else if(fu.test(t))return t.replace(Ug,hu);return t}const Wg=/(^|[^\[])\^/g;function ne(t,e){let s=typeof t=="string"?t:t.source;e=e||"";const n={replace:(r,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Wg,"$1"),s=s.replace(r,o),n},getRegex:()=>new RegExp(s,e)};return n}function du(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const en={exec:()=>null};function pu(t,e){const s=t.replace(/\|/g,(i,o,a)=>{let l=!1,u=o;for(;--u>=0&&a[u]==="\\";)l=!l;return l?"|":" |"}),n=s.split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function tn(t,e,s){const n=t.length;if(n===0)return"";let r=0;for(;r<n;){const i=t.charAt(n-r-1);if(i===e&&!s)r++;else if(i!==e&&s)r++;else break}return t.slice(0,n-r)}function qg(t,e){if(t.indexOf(e[1])===-1)return-1;let s=0;for(let n=0;n<t.length;n++)if(t[n]==="\\")n++;else if(t[n]===e[0])s++;else if(t[n]===e[1]&&(s--,s<0))return n;return-1}function gu(t,e,s,n){const r=e.href,i=e.title?De(e.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){n.state.inLink=!0;const a={type:"link",raw:s,href:r,title:i,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,a}return{type:"image",raw:s,href:r,title:i,text:De(o)}}function Kg(t,e){const s=t.match(/^(\s+)(?:```)/);if(s===null)return e;const n=s[1];return e.split(`
`).map(r=>{const i=r.match(/^\s+/);if(i===null)return r;const[o]=i;return o.length>=n.length?r.slice(n.length):r}).join(`
`)}class jr{constructor(e){Z(this,"options");Z(this,"rules");Z(this,"lexer");this.options=e||zt}space(e){const s=this.rules.block.newline.exec(e);if(s&&s[0].length>0)return{type:"space",raw:s[0]}}code(e){const s=this.rules.block.code.exec(e);if(s){const n=s[0].replace(/^(?: {1,4}| {0,3}\t)/gm,"");return{type:"code",raw:s[0],codeBlockStyle:"indented",text:this.options.pedantic?n:tn(n,`
`)}}}fences(e){const s=this.rules.block.fences.exec(e);if(s){const n=s[0],r=Kg(n,s[3]||"");return{type:"code",raw:n,lang:s[2]?s[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):s[2],text:r}}}heading(e){const s=this.rules.block.heading.exec(e);if(s){let n=s[2].trim();if(/#$/.test(n)){const r=tn(n,"#");(this.options.pedantic||!r||/ $/.test(r))&&(n=r.trim())}return{type:"heading",raw:s[0],depth:s[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const s=this.rules.block.hr.exec(e);if(s)return{type:"hr",raw:tn(s[0],`
`)}}blockquote(e){const s=this.rules.block.blockquote.exec(e);if(s){let n=tn(s[0],`
`).split(`
`),r="",i="";const o=[];for(;n.length>0;){let a=!1;const l=[];let u;for(u=0;u<n.length;u++)if(/^ {0,3}>/.test(n[u]))l.push(n[u]),a=!0;else if(!a)l.push(n[u]);else break;n=n.slice(u);const c=l.join(`
`),h=c.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");r=r?`${r}
${c}`:c,i=i?`${i}
${h}`:h;const p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,o,!0),this.lexer.state.top=p,n.length===0)break;const _=o[o.length-1];if((_==null?void 0:_.type)==="code")break;if((_==null?void 0:_.type)==="blockquote"){const S=_,y=S.raw+`
`+n.join(`
`),k=this.blockquote(y);o[o.length-1]=k,r=r.substring(0,r.length-S.raw.length)+k.raw,i=i.substring(0,i.length-S.text.length)+k.text;break}else if((_==null?void 0:_.type)==="list"){const S=_,y=S.raw+`
`+n.join(`
`),k=this.list(y);o[o.length-1]=k,r=r.substring(0,r.length-_.raw.length)+k.raw,i=i.substring(0,i.length-S.raw.length)+k.raw,n=y.substring(o[o.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:o,text:i}}}list(e){let s=this.rules.block.list.exec(e);if(s){let n=s[1].trim();const r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const o=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a=!1;for(;e;){let l=!1,u="",c="";if(!(s=o.exec(e))||this.rules.block.hr.test(e))break;u=s[0],e=e.substring(u.length);let h=s[2].split(`
`,1)[0].replace(/^\t+/,j=>" ".repeat(3*j.length)),p=e.split(`
`,1)[0],_=!h.trim(),S=0;if(this.options.pedantic?(S=2,c=h.trimStart()):_?S=s[1].length+1:(S=s[2].search(/[^ ]/),S=S>4?1:S,c=h.slice(S),S+=s[1].length),_&&/^[ \t]*$/.test(p)&&(u+=p+`
`,e=e.substring(p.length+1),l=!0),!l){const j=new RegExp(`^ {0,${Math.min(3,S-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),E=new RegExp(`^ {0,${Math.min(3,S-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),w=new RegExp(`^ {0,${Math.min(3,S-1)}}(?:\`\`\`|~~~)`),g=new RegExp(`^ {0,${Math.min(3,S-1)}}#`);for(;e;){const R=e.split(`
`,1)[0];let N;if(p=R,this.options.pedantic?(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  "),N=p):N=p.replace(/\t/g,"    "),w.test(p)||g.test(p)||j.test(p)||E.test(p))break;if(N.search(/[^ ]/)>=S||!p.trim())c+=`
`+N.slice(S);else{if(_||h.replace(/\t/g,"    ").search(/[^ ]/)>=4||w.test(h)||g.test(h)||E.test(h))break;c+=`
`+p}!_&&!p.trim()&&(_=!0),u+=R+`
`,e=e.substring(R.length+1),h=N.slice(S)}}i.loose||(a?i.loose=!0:/\n[ \t]*\n[ \t]*$/.test(u)&&(a=!0));let y=null,k;this.options.gfm&&(y=/^\[[ xX]\] /.exec(c),y&&(k=y[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:u,task:!!y,checked:k,loose:!1,text:c,tokens:[]}),i.raw+=u}i.items[i.items.length-1].raw=i.items[i.items.length-1].raw.trimEnd(),i.items[i.items.length-1].text=i.items[i.items.length-1].text.trimEnd(),i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){const u=i.items[l].tokens.filter(h=>h.type==="space"),c=u.length>0&&u.some(h=>/\n.*\n/.test(h.raw));i.loose=c}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(e){const s=this.rules.block.html.exec(e);if(s)return{type:"html",block:!0,raw:s[0],pre:s[1]==="pre"||s[1]==="script"||s[1]==="style",text:s[0]}}def(e){const s=this.rules.block.def.exec(e);if(s){const n=s[1].toLowerCase().replace(/\s+/g," "),r=s[2]?s[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=s[3]?s[3].substring(1,s[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):s[3];return{type:"def",tag:n,raw:s[0],href:r,title:i}}}table(e){const s=this.rules.block.table.exec(e);if(!s||!/[:|]/.test(s[2]))return;const n=pu(s[1]),r=s[2].replace(/^\||\| *$/g,"").split("|"),i=s[3]&&s[3].trim()?s[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:s[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const a of r)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<n.length;a++)o.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:o.align[a]});for(const a of i)o.rows.push(pu(a,o.header.length).map((l,u)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[u]})));return o}}lheading(e){const s=this.rules.block.lheading.exec(e);if(s)return{type:"heading",raw:s[0],depth:s[2].charAt(0)==="="?1:2,text:s[1],tokens:this.lexer.inline(s[1])}}paragraph(e){const s=this.rules.block.paragraph.exec(e);if(s){const n=s[1].charAt(s[1].length-1)===`
`?s[1].slice(0,-1):s[1];return{type:"paragraph",raw:s[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const s=this.rules.block.text.exec(e);if(s)return{type:"text",raw:s[0],text:s[0],tokens:this.lexer.inline(s[0])}}escape(e){const s=this.rules.inline.escape.exec(e);if(s)return{type:"escape",raw:s[0],text:De(s[1])}}tag(e){const s=this.rules.inline.tag.exec(e);if(s)return!this.lexer.state.inLink&&/^<a /i.test(s[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(s[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:s[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:s[0]}}link(e){const s=this.rules.inline.link.exec(e);if(s){const n=s[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const o=tn(n.slice(0,-1),"\\");if((n.length-o.length)%2===0)return}else{const o=qg(s[2],"()");if(o>-1){const l=(s[0].indexOf("!")===0?5:4)+s[1].length+o;s[2]=s[2].substring(0,o),s[0]=s[0].substring(0,l).trim(),s[3]=""}}let r=s[2],i="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],i=o[3])}else i=s[3]?s[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(n)?r=r.slice(1):r=r.slice(1,-1)),gu(s,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},s[0],this.lexer)}}reflink(e,s){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const r=(n[2]||n[1]).replace(/\s+/g," "),i=s[r.toLowerCase()];if(!i){const o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return gu(n,i,n[0],this.lexer)}}emStrong(e,s,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const o=[...r[0]].length-1;let a,l,u=o,c=0;const h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,s=s.slice(-1*e.length+o);(r=h.exec(s))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(l=[...a].length,r[3]||r[4]){u+=l;continue}else if((r[5]||r[6])&&o%3&&!((o+l)%3)){c+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+c);const p=[...r[0]][0].length,_=e.slice(0,o+r.index+p+l);if(Math.min(o,l)%2){const y=_.slice(1,-1);return{type:"em",raw:_,text:y,tokens:this.lexer.inlineTokens(y)}}const S=_.slice(2,-2);return{type:"strong",raw:_,text:S,tokens:this.lexer.inlineTokens(S)}}}}codespan(e){const s=this.rules.inline.code.exec(e);if(s){let n=s[2].replace(/\n/g," ");const r=/[^ ]/.test(n),i=/^ /.test(n)&&/ $/.test(n);return r&&i&&(n=n.substring(1,n.length-1)),n=De(n,!0),{type:"codespan",raw:s[0],text:n}}}br(e){const s=this.rules.inline.br.exec(e);if(s)return{type:"br",raw:s[0]}}del(e){const s=this.rules.inline.del.exec(e);if(s)return{type:"del",raw:s[0],text:s[2],tokens:this.lexer.inlineTokens(s[2])}}autolink(e){const s=this.rules.inline.autolink.exec(e);if(s){let n,r;return s[2]==="@"?(n=De(s[1]),r="mailto:"+n):(n=De(s[1]),r=n),{type:"link",raw:s[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let s;if(s=this.rules.inline.url.exec(e)){let r,i;if(s[2]==="@")r=De(s[0]),i="mailto:"+r;else{let o;do o=s[0],s[0]=((n=this.rules.inline._backpedal.exec(s[0]))==null?void 0:n[0])??"";while(o!==s[0]);r=De(s[0]),s[1]==="www."?i="http://"+s[0]:i=s[0]}return{type:"link",raw:s[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const s=this.rules.inline.text.exec(e);if(s){let n;return this.lexer.state.inRawBlock?n=s[0]:n=De(s[0]),{type:"text",raw:s[0],text:n}}}}const Gg=/^(?:[ \t]*(?:\n|$))+/,Jg=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Xg=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,sn=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Zg=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,mu=/(?:[*+-]|\d{1,9}[.)])/,_u=ne(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,mu).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),$o=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Qg=/^[^\n]+/,Mo=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Yg=ne(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Mo).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),em=ne(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,mu).getRegex(),Dr="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",To=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,tm=ne("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",To).replace("tag",Dr).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),wu=ne($o).replace("hr",sn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Dr).getRegex(),Io={blockquote:ne(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",wu).getRegex(),code:Jg,def:Yg,fences:Xg,heading:Zg,hr:sn,html:tm,lheading:_u,list:em,newline:Gg,paragraph:wu,table:en,text:Qg},bu=ne("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",sn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Dr).getRegex(),sm={...Io,table:bu,paragraph:ne($o).replace("hr",sn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",bu).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Dr).getRegex()},nm={...Io,html:ne(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",To).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:en,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ne($o).replace("hr",sn).replace("heading",` *#{1,6} *[^
]`).replace("lheading",_u).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},yu=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,rm=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,xu=/^( {2,}|\\)\n(?!\s*$)/,im=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,nn="\\p{P}\\p{S}",om=ne(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,nn).getRegex(),am=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,lm=ne(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,nn).getRegex(),cm=ne("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,nn).getRegex(),um=ne("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,nn).getRegex(),fm=ne(/\\([punct])/,"gu").replace(/punct/g,nn).getRegex(),hm=ne(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),dm=ne(To).replace("(?:-->|$)","-->").getRegex(),pm=ne("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",dm).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Br=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,gm=ne(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Br).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),vu=ne(/^!?\[(label)\]\[(ref)\]/).replace("label",Br).replace("ref",Mo).getRegex(),Cu=ne(/^!?\[(ref)\](?:\[\])?/).replace("ref",Mo).getRegex(),mm=ne("reflink|nolink(?!\\()","g").replace("reflink",vu).replace("nolink",Cu).getRegex(),Oo={_backpedal:en,anyPunctuation:fm,autolink:hm,blockSkip:am,br:xu,code:rm,del:en,emStrongLDelim:lm,emStrongRDelimAst:cm,emStrongRDelimUnd:um,escape:yu,link:gm,nolink:Cu,punctuation:om,reflink:vu,reflinkSearch:mm,tag:pm,text:im,url:en},_m={...Oo,link:ne(/^!?\[(label)\]\((.*?)\)/).replace("label",Br).getRegex(),reflink:ne(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Br).getRegex()},Fo={...Oo,escape:ne(yu).replace("])","~|])").getRegex(),url:ne(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},wm={...Fo,br:ne(xu).replace("{2,}","*").getRegex(),text:ne(Fo.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Nr={normal:Io,gfm:sm,pedantic:nm},rn={normal:Oo,gfm:Fo,breaks:wm,pedantic:_m};class Ue{constructor(e){Z(this,"tokens");Z(this,"options");Z(this,"state");Z(this,"tokenizer");Z(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||zt,this.options.tokenizer=this.options.tokenizer||new jr,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const s={block:Nr.normal,inline:rn.normal};this.options.pedantic?(s.block=Nr.pedantic,s.inline=rn.pedantic):this.options.gfm&&(s.block=Nr.gfm,this.options.breaks?s.inline=rn.breaks:s.inline=rn.gfm),this.tokenizer.rules=s}static get rules(){return{block:Nr,inline:rn}}static lex(e,s){return new Ue(s).lex(e)}static lexInline(e,s){return new Ue(s).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let s=0;s<this.inlineQueue.length;s++){const n=this.inlineQueue[s];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,s=[],n=!1){this.options.pedantic&&(e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""));let r,i,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,s))?(e=e.substring(r.raw.length),s.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&s.length>0?s[s.length-1].raw+=`
`:s.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=s[s.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),s.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),s.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),s.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),s.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),s.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),s.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=s[s.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),s.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),s.push(r);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let u;this.options.extensions.startBlock.forEach(c=>{u=c.call({lexer:this},l),typeof u=="number"&&u>=0&&(a=Math.min(a,u))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){i=s[s.length-1],n&&(i==null?void 0:i.type)==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(r),n=o.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=s[s.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(r);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,s}inline(e,s=[]){return this.inlineQueue.push({src:e,tokens:s}),s}inlineTokens(e,s=[]){let n,r,i,o=e,a,l,u;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)c.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>(n=c.call({lexer:this},e,s))?(e=e.substring(n.raw.length),s.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),r=s[s.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):s.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),r=s[s.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):s.push(n);continue}if(n=this.tokenizer.emStrong(e,o,u)){e=e.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),s.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),s.push(n);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const h=e.slice(1);let p;this.options.extensions.startInline.forEach(_=>{p=_.call({lexer:this},h),typeof p=="number"&&p>=0&&(c=Math.min(c,p))}),c<1/0&&c>=0&&(i=e.substring(0,c+1))}if(n=this.tokenizer.inlineText(i)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(u=n.raw.slice(-1)),l=!0,r=s[s.length-1],r&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):s.push(n);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return s}}class Hr{constructor(e){Z(this,"options");Z(this,"parser");this.options=e||zt}space(e){return""}code({text:e,lang:s,escaped:n}){var o;const r=(o=(s||"").match(/^\S*/))==null?void 0:o[0],i=e.replace(/\n$/,"")+`
`;return r?'<pre><code class="language-'+De(r)+'">'+(n?i:De(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:De(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:s}){return`<h${s}>${this.parser.parseInline(e)}</h${s}>
`}hr(e){return`<hr>
`}list(e){const s=e.ordered,n=e.start;let r="";for(let a=0;a<e.items.length;a++){const l=e.items[a];r+=this.listitem(l)}const i=s?"ol":"ul",o=s&&n!==1?' start="'+n+'"':"";return"<"+i+o+`>
`+r+"</"+i+`>
`}listitem(e){let s="";if(e.task){const n=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=n+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" "}):s+=n+" "}return s+=this.parser.parse(e.tokens,!!e.loose),`<li>${s}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let s="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);s+=this.tablerow({text:n});let r="";for(let i=0;i<e.rows.length;i++){const o=e.rows[i];n="";for(let a=0;a<o.length;a++)n+=this.tablecell(o[a]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+s+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const s=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+s+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:s,tokens:n}){const r=this.parser.parseInline(n),i=du(e);if(i===null)return r;e=i;let o='<a href="'+e+'"';return s&&(o+=' title="'+s+'"'),o+=">"+r+"</a>",o}image({href:e,title:s,text:n}){const r=du(e);if(r===null)return n;e=r;let i=`<img src="${e}" alt="${n}"`;return s&&(i+=` title="${s}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class Lo{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class ze{constructor(e){Z(this,"options");Z(this,"renderer");Z(this,"textRenderer");this.options=e||zt,this.options.renderer=this.options.renderer||new Hr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Lo}static parse(e,s){return new ze(s).parse(e)}static parseInline(e,s){return new ze(s).parseInline(e)}parse(e,s=!0){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const a=i,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){n+=l||"";continue}}const o=i;switch(o.type){case"space":{n+=this.renderer.space(o);continue}case"hr":{n+=this.renderer.hr(o);continue}case"heading":{n+=this.renderer.heading(o);continue}case"code":{n+=this.renderer.code(o);continue}case"table":{n+=this.renderer.table(o);continue}case"blockquote":{n+=this.renderer.blockquote(o);continue}case"list":{n+=this.renderer.list(o);continue}case"html":{n+=this.renderer.html(o);continue}case"paragraph":{n+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;r+1<e.length&&e[r+1].type==="text";)a=e[++r],l+=`
`+this.renderer.text(a);s?n+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l}]}):n+=l;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}parseInline(e,s){s=s||this.renderer;let n="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=a||"";continue}}const o=i;switch(o.type){case"escape":{n+=s.text(o);break}case"html":{n+=s.html(o);break}case"link":{n+=s.link(o);break}case"image":{n+=s.image(o);break}case"strong":{n+=s.strong(o);break}case"em":{n+=s.em(o);break}case"codespan":{n+=s.codespan(o);break}case"br":{n+=s.br(o);break}case"del":{n+=s.del(o);break}case"text":{n+=s.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}}class on{constructor(e){Z(this,"options");Z(this,"block");this.options=e||zt}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Ue.lex:Ue.lexInline}provideParser(){return this.block?ze.parse:ze.parseInline}}Z(on,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class bm{constructor(...e){Z(this,"defaults",Po());Z(this,"options",this.setOptions);Z(this,"parse",this.parseMarkdown(!0));Z(this,"parseInline",this.parseMarkdown(!1));Z(this,"Parser",ze);Z(this,"Renderer",Hr);Z(this,"TextRenderer",Lo);Z(this,"Lexer",Ue);Z(this,"Tokenizer",jr);Z(this,"Hooks",on);this.use(...e)}walkTokens(e,s){var r,i;let n=[];for(const o of e)switch(n=n.concat(s.call(this,o)),o.type){case"table":{const a=o;for(const l of a.header)n=n.concat(this.walkTokens(l.tokens,s));for(const l of a.rows)for(const u of l)n=n.concat(this.walkTokens(u.tokens,s));break}case"list":{const a=o;n=n.concat(this.walkTokens(a.items,s));break}default:{const a=o;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const u=a[l].flat(1/0);n=n.concat(this.walkTokens(u,s))}):a.tokens&&(n=n.concat(this.walkTokens(a.tokens,s)))}}return n}use(...e){const s=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const o=s.renderers[i.name];o?s.renderers[i.name]=function(...a){let l=i.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:s.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=s[i.level];o?o.unshift(i.tokenizer):s[i.level]=[i.tokenizer],i.start&&(i.level==="block"?s.startBlock?s.startBlock.push(i.start):s.startBlock=[i.start]:i.level==="inline"&&(s.startInline?s.startInline.push(i.start):s.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(s.childTokens[i.name]=i.childTokens)}),r.extensions=s),n.renderer){const i=this.defaults.renderer||new Hr(this.defaults);for(const o in n.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const a=o,l=n.renderer[a],u=i[a];i[a]=(...c)=>{let h=l.apply(i,c);return h===!1&&(h=u.apply(i,c)),h||""}}r.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new jr(this.defaults);for(const o in n.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,l=n.tokenizer[a],u=i[a];i[a]=(...c)=>{let h=l.apply(i,c);return h===!1&&(h=u.apply(i,c)),h}}r.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new on;for(const o in n.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;const a=o,l=n.hooks[a],u=i[a];on.passThroughHooks.has(o)?i[a]=c=>{if(this.defaults.async)return Promise.resolve(l.call(i,c)).then(p=>u.call(i,p));const h=l.call(i,c);return u.call(i,h)}:i[a]=(...c)=>{let h=l.apply(i,c);return h===!1&&(h=u.apply(i,c)),h}}r.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens,o=n.walkTokens;r.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),i&&(l=l.concat(i.call(this,a))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,s){return Ue.lex(e,s??this.defaults)}parser(e,s){return ze.parse(e,s??this.defaults)}parseMarkdown(e){return(n,r)=>{const i={...r},o={...this.defaults,...i},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);const l=o.hooks?o.hooks.provideLexer():e?Ue.lex:Ue.lexInline,u=o.hooks?o.hooks.provideParser():e?ze.parse:ze.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(n):n).then(c=>l(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>u(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(n=o.hooks.preprocess(n));let c=l(n,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let h=u(c,o);return o.hooks&&(h=o.hooks.postprocess(h)),h}catch(c){return a(c)}}}onError(e,s){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+De(n.message+"",!0)+"</pre>";return s?Promise.resolve(r):r}if(s)return Promise.reject(n);throw n}}}const Wt=new bm;function ee(t,e){return Wt.parse(t,e)}ee.options=ee.setOptions=function(t){return Wt.setOptions(t),ee.defaults=Wt.defaults,cu(ee.defaults),ee},ee.getDefaults=Po,ee.defaults=zt,ee.use=function(...t){return Wt.use(...t),ee.defaults=Wt.defaults,cu(ee.defaults),ee},ee.walkTokens=function(t,e){return Wt.walkTokens(t,e)},ee.parseInline=Wt.parseInline,ee.Parser=ze,ee.parser=ze.parse,ee.Renderer=Hr,ee.TextRenderer=Lo,ee.Lexer=Ue,ee.lexer=Ue.lex,ee.Tokenizer=jr,ee.Hooks=on,ee.parse=ee,ee.options,ee.setOptions,ee.use,ee.walkTokens,ee.parseInline,ze.parse,Ue.lex;const ym="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Edit%20/%20Edit_Pencil_01'%3e%3cpath%20id='Vector'%20d='M12%208.00012L4%2016.0001V20.0001L8%2020.0001L16%2012.0001M12%208.00012L14.8686%205.13146L14.8704%205.12976C15.2652%204.73488%2015.463%204.53709%2015.691%204.46301C15.8919%204.39775%2016.1082%204.39775%2016.3091%204.46301C16.5369%204.53704%2016.7345%204.7346%2017.1288%205.12892L18.8686%206.86872C19.2646%207.26474%2019.4627%207.46284%2019.5369%207.69117C19.6022%207.89201%2019.6021%208.10835%2019.5369%208.3092C19.4628%208.53736%2019.265%208.73516%2018.8695%209.13061L18.8686%209.13146L16%2012.0001M12%208.00012L16%2012.0001'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",xm="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Interface%20/%20Trash_Full'%3e%3cpath%20id='Vector'%20d='M14%2010V17M10%2010V17M6%206V17.8C6%2018.9201%206%2019.4798%206.21799%2019.9076C6.40973%2020.2839%206.71547%2020.5905%207.0918%2020.7822C7.5192%2021%208.07899%2021%209.19691%2021H14.8031C15.921%2021%2016.48%2021%2016.9074%2020.7822C17.2837%2020.5905%2017.5905%2020.2839%2017.7822%2019.9076C18%2019.4802%2018%2018.921%2018%2017.8031V6M6%206H8M6%206H4M8%206H16M8%206C8%205.06812%208%204.60241%208.15224%204.23486C8.35523%203.74481%208.74432%203.35523%209.23438%203.15224C9.60192%203%2010.0681%203%2011%203H13C13.9319%203%2014.3978%203%2014.7654%203.15224C15.2554%203.35523%2015.6447%203.74481%2015.8477%204.23486C15.9999%204.6024%2016%205.06812%2016%206M16%206H18M18%206H20'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",vm={key:0,class:"chat-history-overlay"},Cm={class:"chat-history-modal"},km={class:"chat-history-search-container"},Sm={class:"chat-history-content"},Em={key:0,class:"chat-history-empty-container"},Am={key:1,class:"chat-history-list"},Rm=["onMouseenter"],Pm={class:"chat-item-actions"},$m=["onClick"],Mm=["onClick"],Tm=["onClick"],Im={key:0,class:"chat-title-edit"},Om=["onKeydown","onBlur"],Fm={key:1},Lm={class:"chat-title"},jm={class:"chat-date"},Dm=Ms({__name:"ChatHistory",emits:["loadChat"],setup(t,{expose:e,emit:s}){const n=lu(),r=Ae(!1),i=Ae(""),o=Ae(null),a=Ae(null),l=Ae(""),u=Ii(()=>{if(!i.value)return n.chatHistory;const E=i.value.toLowerCase();return n.chatHistory.filter(w=>w.title.toLowerCase().includes(E)||w.messages.some(g=>g.content.toLowerCase().includes(E)))}),c=E=>E?new Date(E).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",h=E=>{a.value===null&&(n.loadChat(E),j())},p=(E,w)=>{E.stopPropagation(),a.value=w.id,l.value=w.title},_=(E,w)=>{if(E.stopPropagation(),l.value.trim()){const g=n.chatHistory.findIndex(R=>R.id===w);g!==-1&&(n.chatHistory[g].title=l.value.trim(),n.saveToStorage())}a.value=null,l.value=""},S=E=>{if(confirm("Are you sure you want to delete this chat?")){const w=n.chatHistory.findIndex(g=>g.id===E);w!==-1&&(n.chatHistory.splice(w,1),n.currentChatId===E&&(n.clearMessages(),n.currentChatId=""),n.saveToStorage())}},y=(E,w)=>{E.key==="Enter"?_(E,w):E.key==="Escape"&&(a.value=null,l.value="")},k=()=>{r.value=!0},j=()=>{r.value=!1,o.value=null,a.value=null,l.value=""};return e({show:k,hide:j}),(E,w)=>r.value?(he(),ge("div",vm,[I("div",Cm,[I("div",{class:"chat-history-header"},[w[4]||(w[4]=I("h2",{class:"chat-history-title"},"TeacherAIde",-1)),w[5]||(w[5]=I("div",{class:"chat-history-subtitle"},"Chat History",-1)),I("img",{onClick:j,src:Vn,alt:"close",class:"chat-history-close"})]),I("div",km,[Rn(I("input",{"onUpdate:modelValue":w[0]||(w[0]=g=>i.value=g),type:"text",placeholder:"Search your chats...",class:"chat-history-search-input"},null,512),[[Nn,i.value]])]),I("div",Sm,[u.value.length===0?(he(),ge("div",Em,w[6]||(w[6]=[I("div",{class:"chat-history-empty"},[I("p",null,"Your chat history is currently empty."),I("p",null,"Return to Home screen and start a new conversation!")],-1)]))):(he(),ge("div",Am,[(he(!0),ge(Ve,null,yi(u.value,g=>(he(),ge("div",{key:g.id,class:As(["chat-history-item",{active:o.value===g.id}]),onMouseenter:R=>o.value=g.id,onMouseleave:w[3]||(w[3]=R=>o.value=null)},[I("div",Pm,[I("img",{onClick:Hn(R=>p(R,g),["stop"]),src:ym,alt:"edit",class:"action-icon",title:"Edit title"},null,8,$m),I("img",{onClick:Hn(R=>S(g.id),["stop"]),src:xm,alt:"delete",class:"action-icon",title:"Delete chat"},null,8,Mm)]),I("div",{class:"chat-item-content",onClick:R=>h(g.id)},[a.value===g.id?(he(),ge("div",Im,[Rn(I("input",{"onUpdate:modelValue":w[1]||(w[1]=R=>l.value=R),type:"text",onClick:w[2]||(w[2]=Hn(()=>{},["stop"])),onKeydown:R=>y(R,g.id),onBlur:R=>_(R,g.id),class:"chat-title-input",ref_for:!0,ref:"editInput"},null,40,Om),[[Nn,l.value]])])):(he(),ge("div",Fm,[I("div",Lm,Ot(g.title),1),I("div",jm,Ot(c(g.timestamp)),1)]))],8,Tm)],42,Rm))),128))]))])])])):ss("",!0)}}),Bm=".chat-history-overlay[data-v-099e7435]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.chat-history-modal[data-v-099e7435]{background-color:#fff;border-radius:12px;width:90%;max-width:500px;height:90vh;display:flex;flex-direction:column;overflow:hidden}.chat-history-header[data-v-099e7435]{padding:20px;border-bottom:1px solid #e5e7eb;position:relative}.chat-history-title[data-v-099e7435]{color:#003274;font-size:24px;font-weight:600;margin:0}.chat-history-subtitle[data-v-099e7435]{color:#93a3bc;font-size:18px;margin-top:4px}.chat-history-close[data-v-099e7435]{position:absolute;top:20px;right:20px;width:15px;height:15px;cursor:pointer}.chat-history-search-container[data-v-099e7435]{padding:12px 20px;border-bottom:1px solid #e5e7eb}.chat-history-search-input[data-v-099e7435]{width:100%;padding:8px 12px;border:1px solid #e5e7eb;border-radius:4px;font-size:14px;outline:none;box-sizing:border-box}.chat-history-search-input[data-v-099e7435]:focus{border-color:#003274}.chat-history-content[data-v-099e7435]{flex:1;overflow-y:auto;padding:20px}.chat-history-empty-container[data-v-099e7435]{height:100%;display:flex;align-items:center;justify-content:center;text-align:center;color:#6b7280}.chat-history-empty[data-v-099e7435]{padding:20px}.chat-history-empty p[data-v-099e7435]{margin:4px 0}.chat-history-list[data-v-099e7435]{display:flex;flex-direction:column;gap:12px}.chat-history-item[data-v-099e7435]{position:relative;background-color:#e7eef7;border-radius:8px;padding:16px 32px 16px 16px;cursor:pointer;transition:all .2s ease}.chat-history-item.active[data-v-099e7435]{background-color:#b8cce8}.chat-item-actions[data-v-099e7435]{position:absolute;top:8px;right:8px;z-index:1;display:flex;gap:8px}.action-icon[data-v-099e7435]{width:16px;height:16px;cursor:pointer;opacity:0;transition:opacity .2s ease}.chat-history-item:hover .action-icon[data-v-099e7435]{opacity:.6}.action-icon[data-v-099e7435]:hover{opacity:1!important}.chat-title-edit[data-v-099e7435]{margin-right:40px}.chat-title-input[data-v-099e7435]{width:100%;padding:4px 8px;border:1px solid #003274;border-radius:4px;font-size:14px;background:#fff;color:#003274}.chat-title-input[data-v-099e7435]:focus{outline:none;border-color:#003274;box-shadow:0 0 0 2px #0032741a}.chat-title[data-v-099e7435]{font-size:16px;color:#1f2937;font-weight:500;margin-bottom:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.chat-date[data-v-099e7435]{font-size:12px;color:#6b7280}.chat-history-content[data-v-099e7435]::-webkit-scrollbar{width:6px}.chat-history-content[data-v-099e7435]::-webkit-scrollbar-track{background:transparent}.chat-history-content[data-v-099e7435]::-webkit-scrollbar-thumb{background:#ddd;border-radius:3px}.chat-history-content[data-v-099e7435]::-webkit-scrollbar-thumb:hover{background:#c4c4c4}",Vr=(t,e)=>{const s=t.__vccOpts||t;for(const[n,r]of e)s[n]=r;return s},ku=Vr(Dm,[["styles",[Bm]],["__scopeId","data-v-099e7435"]]),Nm={key:0,class:"help-overlay"},Hm={class:"help-modal"},Vm={class:"help-content"},Um=["onMouseenter","onMouseleave","onClick"],zm={class:"help-question"},Wm={key:0,class:"help-answer"},Su=Vr(Ms({__name:"HelpDialog",setup(t,{expose:e}){const s=Ae(!1),n=()=>{s.value=!0},r=()=>{s.value=!1,i.forEach(a=>a.isExpanded=!1)},i=ks([{id:1,question:"Who is TeacherAIde?",answer:"TeacherAIde is a helpful assistant designed to support teachers in their daily tasks.",isExpanded:!1,isHovered:!1},{id:2,question:"How to copy answer?",answer:"Click the copy icon (clipboard symbol) below any message to copy its content.",isExpanded:!1,isHovered:!1},{id:3,question:"How to regenerate answer?",answer:"Click the refresh icon below any message to generate a new response.",isExpanded:!1,isHovered:!1},{id:4,question:"How to insert answer to editor?",answer:"Click the share icon below any message to insert it into your current document.",isExpanded:!1,isHovered:!1},{id:5,question:"How to retrieve chat history?",answer:"Click the list icon at the bottom left of the screen to view your chat history.",isExpanded:!1,isHovered:!1},{id:6,question:"How to edit or delete chat history?",answer:"In the chat history view, you can click the pen icon to edit chat session name or click the bin icon to delete the chat session from the chat history.",isExpanded:!1,isHovered:!1}]),o=a=>{a.isExpanded=!a.isExpanded};return e({show:n,hide:r}),(a,l)=>s.value?(he(),ge("div",Nm,[I("div",Hm,[I("div",{class:"help-header"},[l[0]||(l[0]=I("h2",{class:"help-title"},"TeacherAIde",-1)),l[1]||(l[1]=I("div",{class:"help-subtitle"},"Help",-1)),I("img",{onClick:r,src:Vn,alt:"close",class:"help-close"})]),I("div",Vm,[(he(!0),ge(Ve,null,yi(i,u=>(he(),ge("div",{key:u.id,class:As(["help-item",{active:u.isHovered,expanded:u.isExpanded}]),onMouseenter:c=>u.isHovered=!0,onMouseleave:c=>u.isHovered=!1,onClick:c=>o(u)},[I("div",zm,Ot(u.id)+". "+Ot(u.question),1),u.isExpanded?(he(),ge("div",Wm,Ot(u.answer),1)):ss("",!0)],42,Um))),128))])])])):ss("",!0)}}),[["styles",[".help-overlay[data-v-c830c8ad]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.help-modal[data-v-c830c8ad]{background-color:#fff;border-radius:12px;width:90%;max-width:500px;height:90vh;display:flex;flex-direction:column;overflow:hidden}.help-header[data-v-c830c8ad]{padding:20px;border-bottom:1px solid #e5e7eb;position:relative}.help-title[data-v-c830c8ad]{color:#003274;font-size:24px;font-weight:600;margin:0}.help-subtitle[data-v-c830c8ad]{color:#93a3bc;font-size:18px;margin-top:4px}.help-close[data-v-c830c8ad]{position:absolute;top:20px;right:20px;width:15px;height:15px;cursor:pointer}.help-content[data-v-c830c8ad]{flex:1;overflow-y:auto;padding:20px}.help-item[data-v-c830c8ad]{background-color:#e7eef7;border-radius:8px;padding:16px;margin-bottom:12px;cursor:pointer;transition:all .2s ease}.help-item.active[data-v-c830c8ad],.help-item.expanded[data-v-c830c8ad]{background-color:#b8cce8}.help-question[data-v-c830c8ad]{font-size:16px;color:#003274;font-weight:500}.help-answer[data-v-c830c8ad]{margin-top:12px;padding-top:12px;border-top:1px solid rgba(0,50,116,.1);color:#4a5568;font-size:14px;line-height:1.4}.help-close[data-v-c830c8ad]:hover{opacity:.8}"]],["__scopeId","data-v-c830c8ad"]]),qm={class:"chat-container"},Km={class:"messages-container"},Gm={key:0,class:"empty-state"},Jm={key:0,class:"user-message"},Xm={class:"message-content"},Zm={key:1,class:"assistant-message"},Qm=["innerHTML"],Ym={class:"bottom-container"},e0={class:"input-wrapper"},t0={class:"input-area"},s0=Vr(Ms({__name:"SimpleChat",props:{textMessage:{type:String}},emits:["back-to-home"],setup(t,{emit:e}){const s=t,n=e,r=lu(),{client:i,systemPrompt:o}=Hg(),a=Ae(null),l=Ae(null);new AbortController;const u=async()=>{if(!r.newMessage)return;const E=r.newMessage;r.addMessage({content:E,role:"user"}),r.clearNewMessage();try{const w=r.messages,g=await i.chat.completions.create({model:r.selectedModel,messages:w,max_tokens:r.maxTokens});g.choices[0].message.content&&r.addMessage({content:g.choices[0].message.content,role:"assistant"})}catch(w){console.error("Failed to send message:",w)}},c=async E=>{try{r.clearMessages(),r.clearNewMessage(),r.currentChatId="",n("back-to-home")}catch(w){console.error("Failed to return to home:",w)}},h=E=>{r.currentChatId=E.id,r.setUserMessages(E.messages),r.clearNewMessage()},p=async E=>{var w;try{const g=(w=E.target.closest(".assistant-message"))==null?void 0:w.querySelector(".message-content");if(g){const R=g.textContent||"";await navigator.clipboard.writeText(R),alert("Message copied to clipboard!")}else console.warn("Message content not found")}catch(g){console.error("Failed to copy:",g),alert("Failed to copy message. Please try again.")}},_=async E=>{try{console.log("Refreshing response...");const w=document.querySelectorAll(".message-wrapper"),g=E.target.closest(".message-wrapper");if(!g){console.warn("Could not find message wrapper");return}const R=Array.from(w).indexOf(g);if(console.log("Message wrapper index:",R),R===-1){console.warn("Could not find message index");return}const N=r.messages.slice(0,R);console.log("Messages up to this:",N);const D=await i.chat.completions.create({model:r.selectedModel,messages:[...r.systemPrompt?[{role:"system",content:r.systemPrompt}]:[],...N],max_tokens:r.maxTokens,temperature:1,presence_penalty:.6,frequency_penalty:.6,top_p:.9});if(!D.choices[0].message.content)throw new Error("No response content received");const B=r.userMessages.map((F,X)=>X===R?{content:D.choices[0].message.content,role:"assistant"}:F);r.clearMessages(),B.forEach(F=>r.addMessage(F))}catch(w){console.error("Failed to refresh response:",w),alert("Failed to generate new response. Please try again.")}},S=async E=>{var w;try{const g=document.getElementById("teacheraide-modal-chatbox");if(console.log("parentChatWindow",g),g&&g!=null){const R=g.getAttribute("data-iframe-target")||"";console.log("target iframe ID",R);const N=document.getElementById(R);if(N&&N!=null&&N!=null){const D=N.contentDocument;if(D&&D!=null&&D!=null){const B=D.body;if(console.log("iframe body",B),B&&B!=null&&B!=null){const F=(w=E.target.closest(".assistant-message"))==null?void 0:w.querySelector(".message-content");if(F){const X=F.textContent||"";await navigator.clipboard.writeText(X);const W=document.createElement("p");W.innerText=X,B.appendChild(W)}else console.warn("Message content not found")}}}}}catch(g){console.error("Failed to copy:",g)}},y=async E=>{try{if(!a.value){console.warn("Chat history component not initialized");return}await a.value.show(),console.log("Chat history displayed successfully")}catch(w){console.error("Failed to display chat history:",w),alert("Failed to open chat history. Please try again.")}},k=async E=>{try{if(!l.value){console.warn("Help dialog component not initialized");return}await l.value.show(),console.log("Help dialog displayed successfully")}catch(w){console.error("Failed to display help dialog:",w),alert("Failed to open help. Please try again.")}};Pa(()=>{s.textMessage&&(r.newMessage=s.textMessage,u())});const j=()=>{console.log("close window");let E=document.getElementById("chat-screen");E&&(E.style.display="none")};return(E,w)=>(he(),ge("div",qm,[I("div",{class:"header"},[w[2]||(w[2]=I("h2",{class:"title"},"TeacherAIde",-1)),I("img",{onClick:j,src:Vn,alt:"close",class:"close-icon",title:"close"})]),I("div",Km,[Mt(r).messages.length===0?(he(),ge("div",Gm,w[3]||(w[3]=[I("p",null,"You are a helpful assistant that aids teachers.",-1)]))):ss("",!0),(he(!0),ge(Ve,null,yi(Mt(r).messages,(g,R)=>(he(),ge("div",{key:R,class:"message-wrapper"},[g.role==="user"?(he(),ge("div",Jm,[I("div",Xm,Ot(g.content),1)])):ss("",!0),g.role==="assistant"?(he(),ge("div",Zm,[w[4]||(w[4]=I("div",{class:"assistant-label"},"TeacherAIde:",-1)),I("div",{class:"message-content",innerHTML:Mt(ee).parse(g.content)},null,8,Qm),I("div",{class:"message-actions",onClick:w[0]||(w[0]=Hn(()=>{},["stop"]))},[I("img",{onClick:p,src:zd,alt:"copy",class:"action-icon",title:"Copy to clipboard"}),I("img",{onClick:_,src:Wd,alt:"refresh",class:"action-icon",title:"Regenerate response"}),I("img",{onClick:S,src:qd,alt:"share",class:"action-icon",title:"Copy to editor"})])])):ss("",!0)]))),128))]),I("div",Ym,[I("div",e0,[I("div",t0,[Rn(I("input",{"onUpdate:modelValue":w[1]||(w[1]=g=>Mt(r).newMessage=g),onKeyup:Pl(u,["enter"]),type:"text",placeholder:"Ask TeacherAIde...",class:"message-input"},null,544),[[Nn,Mt(r).newMessage]]),I("img",{onClick:u,src:Il,alt:"send",class:"send-icon",title:"send"})])]),I("div",{class:"navigation"},[I("img",{onClick:y,src:Ol,alt:"chat history",class:"nav-icon",title:"Chat history"}),I("img",{onClick:c,src:Fl,alt:"home",class:"nav-icon",title:"Start new chat"}),I("img",{onClick:k,src:Ll,alt:"help",class:"nav-icon",title:"Help"})])]),Re(ku,{ref_key:"chatHistoryRef",ref:a,onLoadChat:h},null,512),Re(Su,{ref_key:"helpDialogRef",ref:l},null,512)]))}}),[["styles",[".chat-container[data-v-78270efb]{width:90%;max-width:500px;height:90vh;margin:20px auto;background:#fff;border-radius:12px;display:flex;flex-direction:column;border:1px solid #e5e7eb;box-shadow:0 2px 10px #0000001a}.header[data-v-78270efb]{padding:16px 20px;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center}.title[data-v-78270efb]{color:#003274;font-size:24px;font-weight:600;margin:0}.close-icon[data-v-78270efb]{width:15px;height:15px;cursor:pointer}.messages-container[data-v-78270efb]{flex:1;overflow-y:auto;padding:16px 20px;display:flex;flex-direction:column;gap:16px}.message-wrapper[data-v-78270efb]{margin-bottom:8px;width:100%}.user-message[data-v-78270efb]{margin-bottom:4px}.user-message .message-content[data-v-78270efb]{color:#003274;text-align:left;font-weight:800}.assistant-message[data-v-78270efb]{background-color:#f8f9fa;padding:16px 20px;margin:0 -20px;position:relative}.assistant-label[data-v-78270efb]{color:#003274;font-weight:800;margin-bottom:4px}.assistant-message .message-content[data-v-78270efb]{color:#000;text-align:left;margin-bottom:24px}.message-content[data-v-78270efb]{line-height:1.4;white-space:pre-wrap}.message-actions[data-v-78270efb]{position:absolute;bottom:8px;left:20px;display:flex;gap:16px;align-items:center}.action-icon[data-v-78270efb]{width:16px;height:16px;cursor:pointer;filter:brightness(0);opacity:.8;transition:opacity .2s ease;padding:2px}.bottom-container[data-v-78270efb]{margin-top:auto}.input-wrapper[data-v-78270efb]{padding:0 20px;margin-bottom:8px}.input-area[data-v-78270efb]{background-color:#003274;border-radius:25px;display:flex;align-items:center;padding:8px 16px}.message-input[data-v-78270efb]{flex:1;padding:8px;border:none;background:transparent;color:#fff;outline:none;font-size:14px}.message-input[data-v-78270efb]::-moz-placeholder{color:#fff;opacity:.8}.message-input[data-v-78270efb]::placeholder{color:#fff;opacity:.8}.send-icon[data-v-78270efb]{width:20px;height:20px;cursor:pointer;margin-left:8px}.navigation[data-v-78270efb]{background:#f8f9fa;padding:12px 20px;display:flex;justify-content:space-between;align-items:center;border-top:1px solid #e5e7eb;border-bottom-left-radius:12px;border-bottom-right-radius:12px}.nav-icon[data-v-78270efb]{width:24px;height:24px;cursor:pointer;transition:opacity .2s ease}.nav-icon[data-v-78270efb]:hover,.send-icon[data-v-78270efb]:hover,.close-icon[data-v-78270efb]:hover{opacity:.8}.messages-container[data-v-78270efb]::-webkit-scrollbar{width:6px}.messages-container[data-v-78270efb]::-webkit-scrollbar-track{background:transparent}.messages-container[data-v-78270efb]::-webkit-scrollbar-thumb{background:#ddd;border-radius:3px}"]],["__scopeId","data-v-78270efb"]]),n0={key:0,class:"home-container"},r0={class:"content-container"},i0={class:"input-container"},o0=Vr(Ms({__name:"HomeScreen",setup(t){const e=Ae(!1),s=Ae(""),n=Ae(null),r=Ae(null),i=async()=>{var c;(c=n.value)==null||c.show()},o=async()=>{var c;(c=r.value)==null||c.show()},a=()=>{s.value.trim()&&(e.value=!0)},l=()=>{e.value=!1,s.value=""},u=()=>{e.value=!1,s.value=""};return(c,h)=>e.value?(he(),nl(s0,{key:1,"text-message":s.value,onBackToHome:u},null,8,["text-message"])):(he(),ge("div",n0,[I("img",{onClick:l,src:Vn,alt:"close",class:"close-icon"}),I("div",r0,[h[1]||(h[1]=I("h1",{class:"title"},"TeacherAIde",-1)),h[2]||(h[2]=I("p",{class:"subtitle"},"Your personal teaching assistant",-1)),I("div",i0,[Rn(I("input",{"onUpdate:modelValue":h[0]||(h[0]=p=>s.value=p),type:"text",placeholder:"Ask TeacherAIde...",class:"ask-input",onKeyup:Pl(a,["enter"])},null,544),[[Nn,s.value]]),I("img",{onClick:a,src:Il,alt:"send",class:"send-icon"})])]),I("div",{class:"navigation"},[I("img",{onClick:i,src:Ol,alt:"chat history",class:"nav-icon",title:"Chat history"}),h[3]||(h[3]=I("img",{src:Fl,alt:"home",class:"nav-icon active",title:"Home"},null,-1)),I("img",{onClick:o,src:Ll,alt:"help",class:"nav-icon",title:"Help"})]),Re(ku,{ref_key:"chatHistoryRef",ref:n},null,512),Re(Su,{ref_key:"helpDialogRef",ref:r},null,512)]))}}),[["styles",[".home-container[data-v-48677201]{width:90%;max-width:500px;height:90vh;margin:20px auto;background:#fff;border-radius:12px;display:flex;flex-direction:column;position:relative;border:1px solid #e5e7eb;box-shadow:0 2px 10px #0000001a}.close-icon[data-v-48677201]{position:absolute;top:20px;right:20px;width:15px;height:15px;cursor:pointer}.content-container[data-v-48677201]{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:20px}.title[data-v-48677201]{color:#003274;font-size:32px;font-weight:600;margin:0}.subtitle[data-v-48677201]{color:#666;margin-top:8px}.input-container[data-v-48677201]{margin-top:24px;width:calc(100% - 40px);max-width:400px;position:relative}.ask-input[data-v-48677201]{width:calc(100% - 40px);padding:12px 20px;border-radius:25px;border:none;background-color:#003274;color:#fff;font-size:16px;outline:none}.ask-input[data-v-48677201]::-moz-placeholder{color:#fffc}.ask-input[data-v-48677201]::placeholder{color:#fffc}.send-icon[data-v-48677201]{position:absolute;right:12px;top:50%;transform:translateY(-50%);width:24px;height:24px;cursor:pointer}.navigation[data-v-48677201]{padding:12px 20px;display:flex;justify-content:space-between;align-items:center;border-top:1px solid #e5e7eb}.nav-icon[data-v-48677201]{width:24px;height:24px;cursor:pointer;opacity:.5}.nav-icon.active[data-v-48677201]{opacity:1}"]],["__scopeId","data-v-48677201"]]);async function a0({endpoint:t,method:e,params:s}){return ot.call([{methodname:"local_teacheraide_openai_gateway",args:{endpoint:t,method:e,params:s}}])[0]}const Eu=`${M.cfg.wwwroot}/webservice/restful/server.php/local_teacheraide_openai_gateway`,l0=async(t,e)=>{const s=`${t}`.replace(Eu,""),n=e==null?void 0:e.method,r=e==null?void 0:e.body,i=await a0({endpoint:s,method:n,params:r});return new Response(i.data,{status:200,headers:{"Content-Type":"application/json"}})};async function c0({systemPrompt:t}){const e=new ue({baseURL:Eu,apiKey:"dummy",dangerouslyAllowBrowser:!0,fetch:l0}),s=Ng({client:e,systemPrompt:t});customElements.define("teacheraide-simple-chat",Od(o0,{configureApp:s}))}wt.init=c0,Object.defineProperty(wt,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=app-lazy.min.js.map
